"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[488],{5488:(go,$,d)=>{d.r($),d.d($,{FleetModule:()=>_o});var v=d(6895),D=d(1635),m=d(7155),L=d(3900),Q=d(6212);class ie extends Q.G{}var T=d(9172),q=d(5311),w=d(1654),x=d(673),c=d(4006),h=d(5412),U=d(9646),H=d(4128);class oe{}var e=d(4650),y=d(8112),k=d(5332),S=d(3104),J=d(5659),f=d(9549),I=d(4144),b=d(4859),F=d(4385),V=d(3238),C=d(9602),K=d(2833),B=d(4682),O=d(1837),z=d(1234),E=d(2043);const ne=["docUpload"],ae=["docName"];function le(t,n){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Vehicle\n"),e.qZA())}function ce(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function re(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function se(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function de(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function me(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function pe(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function ue(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(a);const o=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(o))}),e._uU(1,"Remove File"),e.qZA()}}function he(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",29)(1,"div",6)(2,"mat-form-field",7)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",30,31),e.NdJ("selectionChange",function(o){const r=e.CHM(a).index,s=e.oxw(2);return e.KtG(s.onDocumentTypeChange(o,r))}),e.YNc(7,pe,2,2,"mat-option",12),e.qZA()(),e.TgZ(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",32),e.qZA(),e.TgZ(12,"mat-form-field",33)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",34)(16,"mat-datepicker-toggle",35)(17,"mat-datepicker",null,36),e.qZA(),e.TgZ(19,"div",37)(20,"button",38),e.NdJ("click",function(){const l=e.CHM(a).index,r=e.oxw(2);return e.KtG(r.onDocSelect(l))}),e._uU(21,"Select File"),e.qZA(),e._UZ(22,"input",39,40)(24,"label",41,42),e.YNc(26,ue,2,0,"button",43),e.qZA(),e.TgZ(27,"div",44)(28,"app-delete-action-icon",45),e.NdJ("deleteEvent",function(){const l=e.CHM(a).index,r=e.oxw(2);return e.KtG(r.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const a=n.$implicit,i=n.index,o=e.MAs(6),l=e.MAs(18),r=e.MAs(25),s=e.oxw(2);e.Q6J("formGroupName",i),e.xp6(7),e.Q6J("ngForOf",s.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(4),e.Q6J("disabled",null==o.value),e.xp6(6),e.Q6J("ngIf",""!=r.textContent),e.xp6(2),e.Q6J("item",a)}}function _e(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.addVehicle())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Code"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Plate Number"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Make"),e.qZA(),e.TgZ(16,"mat-select",11),e.NdJ("selectionChange",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.onMakeChange(o))}),e.YNc(17,ce,2,2,"mat-option",12),e.qZA()(),e.TgZ(18,"mat-form-field",10)(19,"mat-label"),e._uU(20,"Model"),e.qZA(),e.TgZ(21,"mat-select",13),e.YNc(22,re,2,2,"mat-option",12),e.qZA()()(),e.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Year"),e.qZA(),e._UZ(27,"input",14),e.qZA(),e.TgZ(28,"mat-form-field",7)(29,"mat-label"),e._uU(30,"Wheel"),e.qZA(),e.TgZ(31,"mat-select",15),e._UZ(32,"mat-option"),e.YNc(33,se,2,2,"mat-option",12),e.qZA()(),e.TgZ(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"Fuel"),e.qZA(),e.TgZ(37,"mat-select",16),e._UZ(38,"mat-option"),e.YNc(39,de,2,2,"mat-option",12),e.qZA()(),e.TgZ(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"Color"),e.qZA(),e._UZ(43,"input",17),e.qZA(),e.TgZ(44,"mat-form-field",10)(45,"mat-label"),e._uU(46,"Owner"),e.qZA(),e.TgZ(47,"mat-select",18),e.YNc(48,me,2,2,"mat-option",12),e.qZA()()()()(),e.TgZ(49,"div",4)(50,"div",5)(51,"div",19)(52,"div",20)(53,"div",21)(54,"label"),e._uU(55,"Document"),e.qZA()(),e.TgZ(56,"div",22)(57,"app-add-action-icon",23),e.NdJ("addEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.addDocumentItemForm())}),e.qZA()()(),e.TgZ(58,"div",24),e.YNc(59,he,29,7,"div",25),e.qZA()()()(),e.TgZ(60,"div",4)(61,"app-crud-reset-button",26),e.NdJ("resetEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.reset())}),e.qZA(),e._UZ(62,"app-crud-add-button",27),e.qZA()()()}if(2&t){const a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.manageForm),e.xp6(16),e.Q6J("ngForOf",a.manageData.makeList),e.xp6(5),e.Q6J("ngForOf",a.modelListFiltered),e.xp6(11),e.Q6J("ngForOf",a.manageData.wheelTypeList),e.xp6(6),e.Q6J("ngForOf",a.manageData.fuelTypeList),e.xp6(9),e.Q6J("ngForOf",a.manageData.ownerList),e.xp6(11),e.Q6J("ngForOf",a.documentListControls),e.xp6(3),e.Q6J("disabled",a.isProcessing)}}let fe=(()=>{const n=class{constructor(i,o,l,r,s,p,u){this.dialogRef=i,this.vehicleService=o,this.employeeService=l,this.vehicleDocService=r,this.ds=s,this.renderer=p,this.data=u,this.isLoaded=!1,this.modelListFiltered=[],this.employeeList=[],this.isProcessing=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new c.cw({code:new c.NI("VHC-",[c.kI.required]),plateNumber:new c.NI(null,[c.kI.required]),makeId:new c.NI(null,[c.kI.required]),modelId:new c.NI(null,[c.kI.required]),year:new c.NI(null),ownerId:new c.NI(null,[c.kI.required]),wheelType:new c.NI("Four"),fuelType:new c.NI("Petrol"),color:new c.NI(null),documentList:new c.Oe([])}),this.isLoaded=!1,this.sub=this.vehicleService.getVehicleManageData().subscribe(i=>{this.manageData=i.item,this.addDefaultDoc("Mulkia"),this.isLoaded=!0})}addDefaultDoc(i){let o=this.manageData.documentTypeList.find(l=>l.name==i)?.id;this.manageForm.get("documentList").push(new c.cw({documentTypeId:new c.NI(o,c.kI.required),identifier:new c.NI(null,c.kI.required),expiryDate:new c.NI(null,c.kI.required),file:new c.NI(null)}))}onMakeChange(i){this.modelListFiltered=this.manageData.modelList.filter(o=>o.make.id==this.manageForm.value.makeId)??[],this.manageForm.patchValue({modelId:""})}onDocumentTypeChange(i,o){let l=this.manageData.documentTypeList.find(s=>s.id==i.value);var r=this.manageForm.get("documentList").at(o);r.get("identifier").disabled&&r.get("identifier").enable(),r.get("expiryDate").disabled&&r.get("expiryDate").enable(),r.patchValue({identifier:null,expiryDate:null,file:null}),this.onDocRemove(o),l.isIdentifier?r.get("identifier")?.setValidators(c.kI.required):r.get("identifier")?.removeValidators(c.kI.required),l.isExpiry?r.get("expiryDate")?.setValidators(c.kI.required):r.get("expiryDate")?.removeValidators(c.kI.required),r.get("identifier").markAsUntouched(),r.get("expiryDate").markAsUntouched(),r.get("identifier").updateValueAndValidity(),r.get("expiryDate").updateValueAndValidity()}addDocumentItemForm(){this.manageForm.get("documentList").push(new c.cw({documentTypeId:new c.NI(null,c.kI.required),identifier:new c.NI({value:null,disabled:!0}),expiryDate:new c.NI({value:null,disabled:!0}),file:new c.NI(null)}))}deleteDocumentItem(i){this.manageForm.get("documentList").removeAt(i)}onDocSelect(i){let o=this.manageForm.get("documentList").at(i),l=this.manageData.documentTypeList.find(s=>s.id==o.value.documentTypeId),r=this.docUpload.get(i).nativeElement;r.onchange=()=>{if(r.files&&r.files[0]){const s=r.files[0];if(l.contentLimitKb>0&&s.size>1e3*l.contentLimitKb)return r.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let p=this.docName.get(i).nativeElement;this.renderer.setProperty(p,"textContent",s.name),o.patchValue({file:s})}},r.click()}onDocRemove(i){let o=this.manageForm.get("documentList").at(i);this.docUpload.get(i).nativeElement.value="";let r=this.docName.get(i).nativeElement;this.renderer.setProperty(r,"textContent",""),o.patchValue({file:null})}addVehicle(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(q.J.areYouSureTo))return;let i=new oe;i.code=this.manageForm.value.code,i.plateNumber=this.manageForm.value.plateNumber,i.makeId=this.manageForm.value.makeId,i.modelId=this.manageForm.value.modelId,i.year=this.manageForm.value.year,i.ownerId=this.manageForm.value.ownerId,i.wheelType=this.manageForm.value.wheelType,i.fuelType=this.manageForm.value.fuelType,i.color=this.manageForm.value.color;let o=this.validateDoc();""==o?(this.isProcessing=!0,this.sub=this.vehicleService.addVehicle(i).pipe((0,L.w)(l=>{if(l.response?.status!=x.s.success)return this.isProcessing=!1,alert(l.response?.message),(0,U.of)(null);let r=l.item?.id;const s=[];return this.manageForm.value.documentList.forEach(p=>{const u=new FormData;u.append("vehicleId",r),u.append("documentTypeId",p.documentTypeId),u.append("identifier",p.identifier),null!=p.expiryDate&&u.append("expiryDate",this.ds.formatToRequest(p.expiryDate)),u.append("doc",p.file),s.push(this.vehicleDocService.addVehicleDoc(u))}),0==s.length?(this.reset(),this.closeDialog(),(0,U.of)(null)):(0,H.D)(s)})).subscribe(l=>{this.isProcessing=!1,this.reset(),this.closeDialog()})):alert(`Error : ${o}`)}validateDoc(){let i=[],o="";if(this.manageForm.value.documentList.forEach(r=>{i.findIndex(p=>p.key.docId==r.documentTypeId)>=0?o=r.documentTypeId:i.push({key:{docId:r.documentTypeId},value:1})}),""!=o){var l=this.manageData.documentTypeList.find(r=>r.id==o)?.name;return`Duplicate doc ${l} found`}return""}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.so),e.Y36(y.f),e.Y36(k.G),e.Y36(S.l),e.Y36(J.R),e.Y36(e.Qsj),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-vehicle"]],viewQuery:function(o,l){if(1&o&&(e.Gf(ne,5),e.Gf(ae,5)),2&o){let r;e.iGM(r=e.CRH())&&(l.docUpload=r),e.iGM(r=e.CRH())&&(l.docName=r)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-12"],[1,"row","form-group"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["type","text","matInput","","formControlName","plateNumber"],[1,"form-field","col-4"],["formControlName","makeId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","modelId"],["type","number","matInput","","formControlName","year"],["formControlName","wheelType"],["formControlName","fuelType"],["type","text","matInput","","formControlName","color"],["formControlName","ownerId"],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-2",3,"resetEvent"],[1,"col-2","offset-8",3,"disabled"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"]],template:function(o,l){1&o&&(e.YNc(0,le,2,0,"app-form-heading",0),e.YNc(1,_e,63,8,"div",1)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.sg,v.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,f.KE,f.hX,f.R9,I.Nt,b.lW,h.xY,F.gD,V.ey,C.Mq,C.hl,C.nW,K.L,B.X,O.b,z.E,E.H]}),t})();var N=d(1219),ge=d(2696),ve=d(3667),Z=d(7579);function Ze(t,n){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Te(t,n){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function we(t,n){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}let xe=(()=>{const n=class{constructor(){this.onSearchChange=new Z.x,this.onSearch=new Z.x,this.modelListFiltered=[]}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),makeId:new c.NI(""),modelId:new c.NI(""),ownerId:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(i=>{this.onSearchChange.next(i)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",makeId:"",modelId:"",ownerId:""})}onMakeChange(i){this.modelListFiltered=this.searchData.modelList.filter(o=>o.make.id==this.filterForm.value.makeId)??[],this.filterForm.patchValue({modelId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-2"],["formControlName","makeId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","modelId"],[1,"form-field","col-3"],["formControlName","ownerId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(o,l){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Make"),e.qZA(),e.TgZ(7,"mat-select",4),e.NdJ("selectionChange",function(s){return l.onMakeChange(s)}),e.TgZ(8,"mat-option",5),e._uU(9,"All"),e.qZA(),e.YNc(10,Ze,2,2,"mat-option",6),e.qZA()(),e.TgZ(11,"mat-form-field",3)(12,"mat-label"),e._uU(13,"Model"),e.qZA(),e.TgZ(14,"mat-select",7)(15,"mat-option",5),e._uU(16,"All"),e.qZA(),e.YNc(17,Te,2,2,"mat-option",6),e.qZA()(),e.TgZ(18,"mat-form-field",8)(19,"mat-label"),e._uU(20,"Owner"),e.qZA(),e.TgZ(21,"mat-select",9)(22,"mat-option",5),e._uU(23,"All"),e.qZA(),e.YNc(24,we,2,2,"mat-option",6),e.qZA()(),e.TgZ(25,"mat-form-field",10)(26,"mat-label"),e._uU(27,"Search"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"div",12)(30,"button",13)(31,"i",14),e._uU(32,"search"),e.qZA(),e._uU(33," Search"),e.qZA()()()()),2&o&&(e.Q6J("formGroup",l.filterForm),e.xp6(10),e.Q6J("ngForOf",l.searchData.makeList),e.xp6(7),e.Q6J("ngForOf",l.modelListFiltered),e.xp6(7),e.Q6J("ngForOf",l.searchData.ownerList))},dependencies:[v.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.KE,f.hX,I.Nt,b.lW,F.gD,V.ey]}),t})();var A=d(9057);class Ce{}class De extends Ce{}class ye{}var P=d(455),j=d(7786);const Ie=["docUpload"],be=["docName"];function Ne(t,n){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Vehicle\n"),e.qZA())}function Ae(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Le(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function qe(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function Fe(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function Ve(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ee(t,n){if(1&t&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ue(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(a);const o=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocSelect(o))}),e._uU(1,"Select File"),e.qZA()}if(2&t){e.oxw();const a=e.MAs(6);e.Q6J("disabled",null==a.value)}}function Se(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(a);const o=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(o))}),e._uU(1,"Remove File"),e.qZA()}}function Je(t,n){1&t&&(e.TgZ(0,"label"),e._uU(1,"Doc Uploaded"),e.qZA())}function Oe(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",29)(1,"div",6)(2,"mat-form-field",7)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",30,31),e.NdJ("selectionChange",function(o){const r=e.CHM(a).index,s=e.oxw(2);return e.KtG(s.onDocumentTypeChange(o,r))}),e.YNc(7,Ee,2,2,"mat-option",12),e.qZA()(),e.TgZ(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",32),e.qZA(),e.TgZ(12,"mat-form-field",33)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",34)(16,"mat-datepicker-toggle",35)(17,"mat-datepicker",null,36),e.qZA(),e._UZ(19,"input",37,38)(21,"input",39,40),e.TgZ(23,"div",41),e.YNc(24,Ue,2,1,"button",42),e._UZ(25,"input",43,44)(27,"label",45,46),e.YNc(29,Se,2,0,"button",47),e.YNc(30,Je,2,0,"label",0),e.qZA(),e.TgZ(31,"div",48)(32,"app-delete-action-icon",49),e.NdJ("deleteEvent",function(){const l=e.CHM(a).index,r=e.oxw(2);return e.KtG(r.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const a=n.$implicit,i=n.index,o=e.MAs(18),l=e.MAs(20),r=e.MAs(22),s=e.MAs(28),p=e.oxw(2);e.Q6J("formGroupName",i),e.xp6(7),e.Q6J("ngForOf",p.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(8),e.Q6J("ngIf",0==l.value.length||0==r.value.length),e.xp6(5),e.Q6J("ngIf",""!=s.textContent),e.xp6(1),e.Q6J("ngIf",l.value.length>0&&r.value.length>0),e.xp6(2),e.Q6J("item",a)}}function Ye(t,n){if(1&t&&e._UZ(0,"app-crud-edit-button",52),2&t){const a=e.oxw(2);e.Q6J("disabled",a.isProcessing)}}function Qe(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.editVehicle())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Code"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Plate Number"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Make"),e.qZA(),e.TgZ(16,"mat-select",11),e.NdJ("selectionChange",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.onMakeChange(o))}),e.YNc(17,Ae,2,2,"mat-option",12),e.qZA()(),e.TgZ(18,"mat-form-field",10)(19,"mat-label"),e._uU(20,"Model"),e.qZA(),e.TgZ(21,"mat-select",13),e.YNc(22,Le,2,2,"mat-option",12),e.qZA()()(),e.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Year"),e.qZA(),e._UZ(27,"input",14),e.qZA(),e.TgZ(28,"mat-form-field",7)(29,"mat-label"),e._uU(30,"Wheel"),e.qZA(),e.TgZ(31,"mat-select",15),e._UZ(32,"mat-option"),e.YNc(33,qe,2,2,"mat-option",12),e.qZA()(),e.TgZ(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"Fuel"),e.qZA(),e.TgZ(37,"mat-select",16),e._UZ(38,"mat-option"),e.YNc(39,Fe,2,2,"mat-option",12),e.qZA()(),e.TgZ(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"Color"),e.qZA(),e._UZ(43,"input",17),e.qZA(),e.TgZ(44,"mat-form-field",10)(45,"mat-label"),e._uU(46,"Owner"),e.qZA(),e.TgZ(47,"mat-select",18),e.YNc(48,Ve,2,2,"mat-option",12),e.qZA()()()()(),e.TgZ(49,"div",4)(50,"div",5)(51,"div",19)(52,"div",20)(53,"div",21)(54,"label"),e._uU(55,"Document"),e.qZA()(),e.TgZ(56,"div",22)(57,"app-add-action-icon",23),e.NdJ("addEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.addDocumentItemForm())}),e.qZA()()(),e.TgZ(58,"div",24),e.YNc(59,Oe,33,8,"div",25),e.qZA()(),e.TgZ(60,"div",4)(61,"mat-slide-toggle",26),e._uU(62,"Active"),e.qZA(),e.YNc(63,Ye,1,1,"app-crud-edit-button",27),e.qZA()()()()()}if(2&t){const a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.manageForm),e.xp6(7),e.Q6J("disabled",!0),e.xp6(9),e.Q6J("ngForOf",a.manageData.makeList),e.xp6(5),e.Q6J("ngForOf",a.modelListFiltered),e.xp6(11),e.Q6J("ngForOf",a.manageData.wheelTypeList),e.xp6(6),e.Q6J("ngForOf",a.manageData.fuelTypeList),e.xp6(9),e.Q6J("ngForOf",a.manageData.ownerList),e.xp6(11),e.Q6J("ngForOf",a.documentListControls),e.xp6(4),e.Q6J("ngIf",null!=a.data)}}let ke=(()=>{const n=class{constructor(i,o,l,r,s,p,u){this.dialogRef=i,this.vehicleService=o,this.vehicleDocService=l,this.employeeService=r,this.ds=s,this.renderer=p,this.data=u,this.isLoaded=!1,this.modelListFiltered=[],this.employeeList=[],this.deletedDocumentList=[],this.isProcessing=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new c.cw({code:new c.NI({value:null,disabled:!0},[c.kI.required]),plateNumber:new c.NI(null,[c.kI.required]),makeId:new c.NI(null,[c.kI.required]),modelId:new c.NI(null,[c.kI.required]),year:new c.NI(null),ownerId:new c.NI(null,[c.kI.required]),wheelType:new c.NI(null),fuelType:new c.NI(null),color:new c.NI(null),documentList:new c.Oe([]),active:new c.NI(!0,[c.kI.required])}),this.isLoaded=!1,this.sub=this.vehicleService.getVehicleManageData().pipe((0,L.w)(i=>(this.manageData=i.item,this.vehicleService.getVehicle(this.data?.id)))).subscribe(i=>{this.isLoaded=!0;let o=i.item;this.modelListFiltered=this.manageData.modelList.filter(l=>l.make.id==o.make?.id)??[],this.manageForm.patchValue({code:o.code,plateNumber:o.plateNumber,makeId:o.make.id,modelId:o.model?.id,year:o.year,ownerId:o.owner?.id,wheelType:o.wheelType,fuelType:o.fuelType,color:o.color,active:o.active}),(null!=o.ownerCompany||null!=o.ownerPerson)&&(this.sub=this.employeeService.getEmployeeListByCompany(this.manageForm.value.ownerCompanyId).subscribe(l=>{l?.response.status==x.s.success?(this.employeeList=l.list,this.manageForm.patchValue({ownerPersonId:o.ownerPerson?.id})):alert(l?.response.message)})),o.documentList.forEach(l=>{let r=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new c.cw({id:new c.NI(l.id),documentTypeId:new c.NI({value:l.documentType.id,disabled:!0}),identifier:new c.NI({value:l.identifier,disabled:!0}),expiryDate:new c.NI({value:r,disabled:!0}),file:new c.NI(null),fileName:new c.NI(l.fileName)}))})})}addDocumentItemForm(){this.manageForm.get("documentList").push(new c.cw({id:new c.NI(null),documentTypeId:new c.NI(null,c.kI.required),identifier:new c.NI({value:null,disabled:!0}),expiryDate:new c.NI({value:null,disabled:!0}),file:new c.NI(null),fileName:new c.NI(null)}))}deleteDocumentItem(i){let o=this.manageForm.get("documentList").at(i);null!=o.value.id&&this.deletedDocumentList.push(o.value.id),this.manageForm.get("documentList").removeAt(i)}onDocumentTypeChange(i,o){let l=this.manageData.documentTypeList.find(s=>s.id==i.value);var r=this.manageForm.get("documentList").at(o);r.get("identifier").disabled&&r.get("identifier").enable(),r.get("expiryDate").disabled&&r.get("expiryDate").enable(),r.patchValue({identifier:null,expiryDate:null,file:null,fileName:null}),this.onDocRemove(o),l.isIdentifier?r.get("identifier")?.setValidators(c.kI.required):r.get("identifier")?.removeValidators(c.kI.required),l.isExpiry?r.get("expiryDate")?.setValidators(c.kI.required):r.get("expiryDate")?.removeValidators(c.kI.required),r.get("identifier").markAsUntouched(),r.get("expiryDate").markAsUntouched(),r.get("identifier").updateValueAndValidity(),r.get("expiryDate").updateValueAndValidity()}onDocSelect(i){let o=this.manageForm.get("documentList").at(i),l=this.manageData.documentTypeList.find(s=>s.id==o.getRawValue().documentTypeId),r=this.docUpload.get(i).nativeElement;r.onchange=()=>{if(r.files&&r.files[0]){const s=r.files[0];if(l.contentLimitKb>0&&s.size>1e3*l.contentLimitKb)return r.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let p=this.docName.get(i).nativeElement;this.renderer.setProperty(p,"textContent",s.name),o.patchValue({file:s})}},r.click()}onDocRemove(i){let o=this.manageForm.get("documentList").at(i);this.docUpload.get(i).nativeElement.value="";let r=this.docName.get(i).nativeElement;this.renderer.setProperty(r,"textContent",""),o.patchValue({file:null})}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}onMakeChange(i){this.modelListFiltered=this.manageData.modelList.filter(o=>o.make.id==this.manageForm.value.makeId)??[],this.manageForm.patchValue({modelId:""})}editVehicle(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(q.J.areYouSureTo))return;let i=new ye;i.id=this.data?.id,i.code=this.data.code,i.plateNumber=this.manageForm.value.plateNumber,i.makeId=this.manageForm.value.makeId,i.modelId=this.manageForm.value.modelId,i.year=this.manageForm.value.year,i.ownerId=this.manageForm.value.ownerId,i.wheelType=this.manageForm.value.wheelType,i.fuelType=this.manageForm.value.fuelType,i.color=this.manageForm.value.color,i.active=this.manageForm.value.active;let o=[],l=[];this.manageForm.get("documentList").controls.forEach((s,p)=>{if(null!=s.value.id)return void l.push({docId:s.getRawValue().documentTypeId,identifier:s.getRawValue().identifier});let u=new De;u.documentTypeId=s.value.documentTypeId,u.identifier=s.value.identifier,null!=s.value.expiryDate&&(u.expiryDate=this.ds.formatToRequest(s.value.expiryDate)),o.push(u)});let r=this.validateDoc(o,l);""==r?(this.isProcessing=!0,this.sub=this.vehicleService.editVehicle(i).pipe((0,L.w)(s=>{if(s.status!=x.s.success)return this.isProcessing=!1,alert(s.message),(0,U.of)(null);let p=i.id;const u=[];return this.deletedDocumentList.forEach(_=>{u.push(this.vehicleDocService.removeVehicleDoc(_))}),this.manageForm.get("documentList").controls.forEach(_=>{if(null!=_.getRawValue().id){if(null==_.value.file)return;{const g=new FormData;g.append("id",_.getRawValue().id),g.append("doc",_.value.file),u.push(this.vehicleDocService.addVehicleDocFile(g))}}else{const g=new FormData;g.append("vehicleId",p),g.append("documentTypeId",_.value.documentTypeId),g.append("identifier",_.value.identifier),null!=_.value.expiryDate&&g.append("expiryDate",this.ds.formatToRequest(_.value.expiryDate)),g.append("doc",_.value.file),u.push(this.vehicleDocService.addVehicleDoc(g))}}),0==u.length?(this.reset(),this.closeDialog(),(0,U.of)(null)):(0,H.D)(u)})).subscribe(s=>{this.isProcessing=!1,this.reset(),this.closeDialog()})):alert(`Error : ${r}`)}validateDoc(i,o){let l=[],r="";if(i.forEach(p=>{l.findIndex(_=>_.key.docId==p.documentTypeId)>=0||o.findIndex(g=>g.docId==p.documentTypeId)>=0?r=p.documentTypeId:l.push({key:{docId:p.documentTypeId},value:1})}),""!=r){var s=this.manageData.documentTypeList.find(p=>p.id==r)?.name;return`Duplicate doc ${s} found`}return""}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.so),e.Y36(y.f),e.Y36(S.l),e.Y36(k.G),e.Y36(J.R),e.Y36(e.Qsj),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-vehicle"]],viewQuery:function(o,l){if(1&o&&(e.Gf(Ie,5),e.Gf(be,5)),2&o){let r;e.iGM(r=e.CRH())&&(l.docUpload=r),e.iGM(r=e.CRH())&&(l.docName=r)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-12"],[1,"row","form-group"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code",3,"disabled"],["type","text","matInput","","formControlName","plateNumber"],[1,"form-field","col-4"],["formControlName","makeId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","modelId"],["type","number","matInput","","formControlName","year"],["formControlName","wheelType"],["formControlName","fuelType"],["type","text","matInput","","formControlName","color"],["formControlName","ownerId"],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],["class","col-2",3,"disabled",4,"ngIf"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary","class","col-3",3,"disabled","click",4,"ngIf"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"],[1,"col-2",3,"disabled"]],template:function(o,l){1&o&&(e.YNc(0,Ne,2,0,"app-form-heading",0),e.YNc(1,Qe,64,9,"div",1)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.sg,v.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,f.KE,f.hX,f.R9,I.Nt,b.lW,h.xY,F.gD,V.ey,P.Rr,C.Mq,C.hl,C.nW,j.W,O.b,z.E,E.H]}),t})();var Y=d(5861),X=d(8064),R=d(7268),W=d(8922);function Re(t,n){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," View Vehicle\n"),e.qZA())}function Me(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ge(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function $e(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function He(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function Ke(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Be(t,n){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function ze(t,n){1&t&&(e.TgZ(0,"label",42),e._uU(1,"Doc Uploaded"),e.qZA())}function Pe(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-view-action-icon",43),e.NdJ("viewEvent",function(o){e.CHM(a);const l=e.oxw(3);return e.KtG(l.viewDoc(o))}),e.qZA()}if(2&t){const a=e.oxw().index;e.Q6J("item",a)}}function je(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-download-action-icon",44),e.NdJ("downloadEvent",function(o){e.CHM(a);const l=e.oxw(3);return e.KtG(l.downloadDoc(o))}),e.qZA()}if(2&t){const a=e.oxw().index;e.Q6J("item",a)}}function Xe(t,n){if(1&t&&(e.TgZ(0,"div",26)(1,"div",6)(2,"mat-form-field",7)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",27,28),e.YNc(7,Be,2,2,"mat-option",12),e.qZA()(),e.TgZ(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",29),e.qZA(),e.TgZ(12,"mat-form-field",30)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",31)(16,"mat-datepicker-toggle",32)(17,"mat-datepicker",null,33),e.qZA(),e._UZ(19,"input",34,35)(21,"input",36,37),e.TgZ(23,"div",38),e.YNc(24,ze,2,0,"label",39),e.YNc(25,Pe,1,1,"app-view-action-icon",40),e.YNc(26,je,1,1,"app-download-action-icon",41),e.qZA()()()),2&t){const a=n.index,i=e.MAs(18),o=e.MAs(20),l=e.MAs(22),r=e.oxw(2);e.Q6J("formGroupName",a),e.xp6(7),e.Q6J("ngForOf",r.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(8),e.Q6J("ngIf",o.value.length>0&&l.value.length>0),e.xp6(1),e.Q6J("ngIf",o.value.length>0&&l.value.length>0&&r.allowExport),e.xp6(1),e.Q6J("ngIf",o.value.length>0&&l.value.length>0&&r.allowExport)}}function We(t,n){if(1&t&&(e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Code"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Plate Number"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Make"),e.qZA(),e.TgZ(16,"mat-select",11),e.YNc(17,Me,2,2,"mat-option",12),e.qZA()(),e.TgZ(18,"mat-form-field",10)(19,"mat-label"),e._uU(20,"Model"),e.qZA(),e.TgZ(21,"mat-select",13),e.YNc(22,Ge,2,2,"mat-option",12),e.qZA()()(),e.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Year"),e.qZA(),e._UZ(27,"input",14),e.qZA(),e.TgZ(28,"mat-form-field",7)(29,"mat-label"),e._uU(30,"Wheel"),e.qZA(),e.TgZ(31,"mat-select",15),e._UZ(32,"mat-option"),e.YNc(33,$e,2,2,"mat-option",12),e.qZA()(),e.TgZ(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"Fuel"),e.qZA(),e.TgZ(37,"mat-select",16),e._UZ(38,"mat-option"),e.YNc(39,He,2,2,"mat-option",12),e.qZA()(),e.TgZ(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"Color"),e.qZA(),e._UZ(43,"input",17),e.qZA(),e.TgZ(44,"mat-form-field",10)(45,"mat-label"),e._uU(46,"Owner"),e.qZA(),e.TgZ(47,"mat-select",18),e._UZ(48,"mat-option"),e.YNc(49,Ke,2,2,"mat-option",12),e.qZA()()()()(),e.TgZ(50,"div",4)(51,"div",5)(52,"div",19)(53,"div",20)(54,"div",21)(55,"label"),e._uU(56,"Document"),e.qZA()()(),e.TgZ(57,"div",22),e.YNc(58,Xe,27,7,"div",23),e.qZA()(),e.TgZ(59,"div",4)(60,"mat-slide-toggle",24),e._uU(61,"Active"),e.qZA()()()()()()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.manageForm),e.xp6(7),e.Q6J("disabled",!0),e.xp6(9),e.Q6J("ngForOf",a.manageData.makeList),e.xp6(5),e.Q6J("ngForOf",a.modelListFiltered),e.xp6(11),e.Q6J("ngForOf",a.manageData.wheelTypeList),e.xp6(6),e.Q6J("ngForOf",a.manageData.fuelTypeList),e.xp6(10),e.Q6J("ngForOf",a.manageData.ownerList),e.xp6(9),e.Q6J("ngForOf",a.documentListControls)}}let et=(()=>{const n=class{constructor(i,o,l,r,s,p,u,_,g){this.dialogRef=i,this.menuRoleService=o,this.vehicleService=l,this.vehicleDocService=r,this.employeeService=s,this.ds=p,this.renderer=u,this.fileService=_,this.data=g,this.isLoaded=!1,this.modelListFiltered=[],this.employeeList=[],this.allowExport=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.export),this.manageForm=new c.cw({code:new c.NI({value:null,disabled:!0},[c.kI.required]),plateNumber:new c.NI({value:null,disabled:!0},[c.kI.required]),makeId:new c.NI({value:null,disabled:!0},[c.kI.required]),modelId:new c.NI({value:null,disabled:!0},[c.kI.required]),year:new c.NI({value:null,disabled:!0}),ownerId:new c.NI({value:null,disabled:!0}),wheelType:new c.NI({value:null,disabled:!0}),fuelType:new c.NI({value:null,disabled:!0}),color:new c.NI({value:null,disabled:!0}),documentList:new c.Oe([]),active:new c.NI({value:null,disabled:!0},[c.kI.required])}),this.isLoaded=!1,this.sub=this.vehicleService.getVehicleManageData().pipe((0,L.w)(i=>(this.manageData=i.item,this.vehicleService.getVehicle(this.data?.id)))).subscribe(i=>{this.isLoaded=!0;let o=i.item;this.modelListFiltered=this.manageData.modelList.filter(l=>l.make.id==o.make?.id)??[],this.manageForm.patchValue({code:o.code,plateNumber:o.plateNumber,makeId:o.make.id,modelId:o.model?.id,year:o.year,ownerId:o.owner?.id,wheelType:o.wheelType,fuelType:o.fuelType,color:o.color,active:o.active}),(null!=o.ownerCompany||null!=o.ownerPerson)&&(this.sub=this.employeeService.getEmployeeListByCompany(this.manageForm.value.ownerCompanyId).subscribe(l=>{l?.response.status==x.s.success?(this.employeeList=l.list,this.manageForm.patchValue({ownerPersonId:o.ownerPerson?.id})):alert(l?.response.message)})),o.documentList.forEach(l=>{let r=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new c.cw({id:new c.NI(l.id),documentTypeId:new c.NI({value:l.documentType.id,disabled:!0}),identifier:new c.NI({value:l.identifier,disabled:!0}),expiryDate:new c.NI({value:r,disabled:!0}),file:new c.NI(null),fileName:new c.NI(l.fileName)}))})})}viewDoc(i){var o=this;let r=this.manageForm.get("documentList").at(i).getRawValue().id;this.sub=this.vehicleDocService.exportVehicleDoc(r).subscribe(function(){var s=(0,Y.Z)(function*(p){o.fileService.viewFile(p)});return function(p){return s.apply(this,arguments)}}())}downloadDoc(i){var o=this,l=this.manageForm.get("documentList").at(i);let r=l.getRawValue().id,s=l.getRawValue().identifier,p=this.manageData.documentTypeList.find(_=>_.id==l.getRawValue().documentTypeId),u=`${this.data.code}_${p.code}`;null!=s&&(u=`${u}_${s}`),this.sub=this.vehicleDocService.exportVehicleDoc(r).subscribe(function(){var _=(0,Y.Z)(function*(g){o.fileService.downloadFile(g,u)});return function(g){return _.apply(this,arguments)}}())}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.so),e.Y36(N.K),e.Y36(y.f),e.Y36(S.l),e.Y36(k.G),e.Y36(J.R),e.Y36(e.Qsj),e.Y36(X.I),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-vehicle"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row"],[1,"col-12"],[1,"row","form-group"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code",3,"disabled"],["type","text","matInput","","formControlName","plateNumber"],[1,"form-field","col-4"],["formControlName","makeId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","modelId"],["type","number","matInput","","formControlName","year"],["formControlName","wheelType"],["formControlName","fuelType"],["type","text","matInput","","formControlName","color"],["formControlName","ownerId"],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-6","mt-2"],["class","col-8 text-center",4,"ngIf"],["class","mx-4",3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],[1,"col-8","text-center"],[1,"mx-4",3,"item","viewEvent"],[3,"item","downloadEvent"]],template:function(o,l){1&o&&(e.YNc(0,Re,2,0,"app-form-heading",0),e.YNc(1,We,62,8,"div",1)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.sg,v.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,f.KE,f.hX,f.R9,I.Nt,h.xY,F.gD,V.ey,P.Rr,C.Mq,C.hl,C.nW,R.R,W.e,E.H]}),t})();class tt{}let it=(()=>{const n=class{constructor(i,o,l,r){this.dialogRef=i,this.vehicleService=o,this.menuRoleService=l,this.data=r,this.isProcessing=!1,this.allowEdit=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.edit),this.manageForm=new c.cw({code:new c.NI(this.data.code)})}editCode(){if(!this.allowEdit||!confirm(q.J.areYouSureTo))return;let i=new tt;i.id=this.data.id,i.code=this.manageForm.value.code,this.isProcessing=!0,this.sub=this.vehicleService.editVehicleCode(i).subscribe(o=>{if(o.status!=x.s.success)return this.isProcessing=!1,void alert(o.message);this.closeDialog()})}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.so),e.Y36(y.f),e.Y36(N.K),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-vehicle-code"]],decls:14,vars:4,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,""],[1,"row","form-group"],[1,"form-field","col-12"],["type","text","matInput","","formControlName","code"],[1,"row"],[1,"col-4","offset-8",3,"disabled"]],template:function(o,l){1&o&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Vehicle Code\n"),e.qZA(),e.TgZ(2,"div",0)(3,"form",1),e.NdJ("submit",function(){return l.editCode()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Code New"),e.qZA(),e._UZ(11,"input",6),e.qZA()(),e.TgZ(12,"div",7),e._UZ(13,"app-crud-edit-button",8),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("formGroup",l.manageForm),e.xp6(3),e.AsE("",l.data.plateNumber," (",l.data.code,")"),e.xp6(7),e.Q6J("disabled",l.isProcessing))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.KE,f.hX,I.Nt,h.xY,j.W,E.H]}),t})();class ot{}var nt=d(5);let ee=(()=>{const n=class{constructor(i){this.http=i}getOdometerReadingList(i){return this.http.post(A.b.getOdometerReadingList,i)}getOdometerReadingManageData(){return this.http.get(A.b.getOdometerReadingManageData)}addOdometerReading(i){return this.http.post(A.b.addOdometerReading,i)}editOdometerReading(i){return this.http.post(A.b.editOdometerReading,i)}deleteOdometerReading(i){let o=A.b.deleteOdometerReading;return o=o.replace(/{id}/gi,i),this.http.post(o,null)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.LFG(nt.o))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),t})(),at=(()=>{const n=class{constructor(i,o,l,r){this.dialogRef=i,this.odometerReadingService=o,this.ds=l,this.data=r,this.isProcessing=!1}ngOnInit(){this.manageForm=new c.cw({reading:new c.NI(null,[c.kI.required])})}addOdometerReading(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(q.J.areYouSureTo))return;let i=new ot;i.reading=this.manageForm.value.reading,i.timestamp=this.ds.formatToRequestDatetime(new Date),i.vehicleId=this.data.id,this.isProcessing=!0,this.sub=this.odometerReadingService.addOdometerReading(i).subscribe(o=>{if(this.isProcessing=!1,o?.status!=x.s.success)return this.isProcessing=!1,void alert(o?.message);this.reset(),this.closeDialog()})}reset(){this.manageForm.reset()}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.so),e.Y36(ee),e.Y36(J.R),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-odometer-reading"]],decls:25,vars:7,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,"col-12","py-0"],[1,"row"],[1,"col-6"],[1,"col-6","text-end"],[1,"row","mt-2"],[1,"col-4","text-start"],[1,"col-8","text-end"],[1,"row","form-group"],[1,"form-field","col-12"],["type","number","matInput","","formControlName","reading"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"]],template:function(o,l){1&o&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Odometer Reading\n"),e.qZA(),e.TgZ(2,"div",0)(3,"form",1),e.NdJ("submit",function(){return l.addOdometerReading()}),e.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5)(8,"strong"),e._uU(9),e.qZA()(),e.TgZ(10,"label",6),e._uU(11),e.qZA()(),e.TgZ(12,"div",7)(13,"label",8),e._uU(14),e.qZA(),e.TgZ(15,"label",9),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),e._uU(20,"Reading"),e.qZA(),e._UZ(21,"input",12),e.qZA()(),e.TgZ(22,"div",4)(23,"app-crud-reset-button",13),e.NdJ("resetEvent",function(){return l.reset()}),e.qZA(),e._UZ(24,"app-crud-add-button",14),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("formGroup",l.manageForm),e.xp6(6),e.Oqu(l.data.code),e.xp6(2),e.hij(" ",l.data.plateNumber," "),e.xp6(3),e.AsE("",l.data.make," ",l.data.model,""),e.xp6(2),e.Oqu(l.data.owner),e.xp6(8),e.Q6J("disabled",l.isProcessing))},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,f.KE,f.hX,I.Nt,h.xY,K.L,B.X,E.H]}),t})();var M=d(7974),G=d(4521),lt=d(1763),te=d(5894);const ct=["page"];function rt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Code "),e.qZA())}function st(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",29),e.NdJ("click",function(){const l=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.editCode(l))}),e._uU(1),e.qZA()}if(2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.code," ")}}function dt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," PlateNumber "),e.qZA())}function mt(t,n){if(1&t&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.plateNumber," ")}}function pt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Make "),e.qZA())}function ut(t,n){if(1&t&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.make," ")}}function ht(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Model "),e.qZA())}function _t(t,n){if(1&t&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.model," ")}}function ft(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Year "),e.qZA())}function gt(t,n){if(1&t&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.year," ")}}function vt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Owner "),e.qZA())}function Zt(t,n){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.owner," ")}}function Tt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Wheel "),e.qZA())}function wt(t,n){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.wheelType," ")}}function xt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Fuel "),e.qZA())}function Ct(t,n){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.fuelType," ")}}function Dt(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Color "),e.qZA())}function yt(t,n){if(1&t&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.color," ")}}function It(t,n){1&t&&(e.TgZ(0,"th",28)(1,"i",33),e._uU(2,"attachment"),e.qZA(),e._uU(3," / "),e.TgZ(4,"i",33),e._uU(5,"description"),e.qZA()())}function bt(t,n){if(1&t&&(e.TgZ(0,"span",38),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function Nt(t,n){if(1&t&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function At(t,n){if(1&t&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function Lt(t,n){if(1&t&&(e.TgZ(0,"td",34),e.YNc(1,bt,2,2,"span",35),e.YNc(2,Nt,2,2,"span",36),e.YNc(3,At,2,2,"span",37),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf",0==a.docCount),e.xp6(1),e.Q6J("ngIf",a.fileCount==a.docCount&&a.docCount>0),e.xp6(1),e.Q6J("ngIf",a.fileCount<a.docCount&&a.docCount>0)}}function qt(t,n){1&t&&e._UZ(0,"th",41)}function Ft(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-edit-action-icon",47),e.NdJ("editEvent",function(){e.CHM(a);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.edit(o))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Vt(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-action-icon",48),e.NdJ("actionEvent",function(){e.CHM(a);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.addOdometerReading(o))}),e._uU(1,"123"),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Et(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-delete-action-icon",49),e.NdJ("deleteEvent",function(){e.CHM(a);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.delete(o))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Ut(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",42)(1,"app-view-action-icon",43),e.NdJ("viewEvent",function(){const l=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.view(l))}),e.qZA(),e.YNc(2,Ft,1,1,"app-edit-action-icon",44),e.YNc(3,Vt,2,1,"app-action-icon",45),e.YNc(4,Et,1,1,"app-delete-action-icon",46),e.qZA()}if(2&t){const a=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("item",a),e.xp6(1),e.Q6J("ngIf",i.allowEdit),e.xp6(1),e.Q6J("ngIf",i.allowAddOmr),e.xp6(1),e.Q6J("ngIf",i.allowDelete)}}function St(t,n){1&t&&e._UZ(0,"tr",50)}function Jt(t,n){1&t&&e._UZ(0,"tr",51)}const Ot=function(){return[10,20,50]};let Yt=(()=>{const n=class{constructor(i,o){this.menuRoleService=i,this.dialog=o,this.moreEvent=new Z.x,this.editEvent=new Z.x,this.deleteEvent=new Z.x,this.displayedColumns=["code","plateNumber","make","model","year","owner","wheel","fuel","color","d/f","manage"],this.baseUrl=(0,A.S)(),this.allowEdit=!1,this.allowDelete=!1,this.allowAddOmr=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.delete),this.allowAddOmr=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.OdometerReading_Fleet,w.k.add)}ngOnChanges(i){this.vehicleList.paginator=this.paginator}ngAfterViewInit(){this.vehicleList.paginator=this.paginator}more(){this.moreEvent.next(!0)}edit(i){this.dialog.open(ke,{data:i,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editEvent.next()})}editCode(i){this.dialog.open(it,{data:i,width:"20%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editEvent.next()})}view(i){this.dialog.open(et,{data:i,width:"85%",maxHeight:"auto"})}delete(i){this.deleteEvent.next(i)}addOdometerReading(i){this.dialog.open(at,{data:i,width:"30%",maxHeight:"auto"})}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.K),e.Y36(h.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle-list"]],viewQuery:function(o,l){if(1&o&&e.Gf(ct,5),2&o){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{vehicleList:"vehicleList",count:"count"},outputs:{moreEvent:"moreEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[e.TTD],decls:42,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col-1",3,"click",4,"matCellDef"],["matColumnDef","plateNumber"],["mat-cell","","class","col-1",4,"matCellDef"],["matColumnDef","make"],["matColumnDef","model"],["matColumnDef","year"],["matColumnDef","owner"],["mat-cell","","class","col-3",4,"matCellDef"],["matColumnDef","wheel"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","fuel"],["matColumnDef","color"],["matColumnDef","d/f"],["mat-cell","","class","","style","width: 6rem;",4,"matCellDef"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end","style","width: 15rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col-1",3,"click"],["mat-cell","",1,"col-1"],["mat-cell","",1,"col-3"],["mat-cell","",1,"col"],[1,"material-icons"],["mat-cell","",1,"",2,"width","6rem"],["class","bg-warn p-1 rounded-pill text-white",4,"ngIf"],["class","bg-success p-1 rounded-pill text-white",4,"ngIf"],["class","bg-accent p-1 rounded-pill",4,"ngIf"],[1,"bg-warn","p-1","rounded-pill","text-white"],[1,"bg-success","p-1","rounded-pill","text-white"],[1,"bg-accent","p-1","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end",2,"width","15rem"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","actionEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","actionEvent"],[3,"item","deleteEvent"],["mat-header-row",""],["mat-row",""]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,rt,2,0,"th",3),e.YNc(4,st,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,dt,2,0,"th",3),e.YNc(7,mt,2,1,"td",6),e.BQk(),e.ynx(8,7),e.YNc(9,pt,2,0,"th",3),e.YNc(10,ut,2,1,"td",6),e.BQk(),e.ynx(11,8),e.YNc(12,ht,2,0,"th",3),e.YNc(13,_t,2,1,"td",6),e.BQk(),e.ynx(14,9),e.YNc(15,ft,2,0,"th",3),e.YNc(16,gt,2,1,"td",6),e.BQk(),e.ynx(17,10),e.YNc(18,vt,2,0,"th",3),e.YNc(19,Zt,2,1,"td",11),e.BQk(),e.ynx(20,12),e.YNc(21,Tt,2,0,"th",3),e.YNc(22,wt,2,1,"td",13),e.BQk(),e.ynx(23,14),e.YNc(24,xt,2,0,"th",3),e.YNc(25,Ct,2,1,"td",13),e.BQk(),e.ynx(26,15),e.YNc(27,Dt,2,0,"th",3),e.YNc(28,yt,2,1,"td",13),e.BQk(),e.ynx(29,16),e.YNc(30,It,6,0,"th",3),e.YNc(31,Lt,4,3,"td",17),e.BQk(),e.ynx(32,18),e.YNc(33,qt,1,0,"th",19),e.YNc(34,Ut,5,4,"td",20),e.BQk(),e.YNc(35,St,1,0,"tr",21),e.YNc(36,Jt,1,0,"tr",22),e.qZA(),e._UZ(37,"mat-paginator",23,24),e.qZA(),e.TgZ(39,"div",25)(40,"div",26)(41,"app-server-pagination",27),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("dataSource",l.vehicleList),e.xp6(34),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Ot)),e.xp6(4),e.Q6J("loaded",l.vehicleList.data.length)("count",l.count))},dependencies:[v.O5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,M.NW,G.H,O.b,lt.p,R.R,te.m]}),t})();const Qt=["vehicleImport"];function kt(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-vehicle-search-filter",3),e.NdJ("onSearchChange",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.changeSearchData(o))})("onSearch",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("searchData",a.searchData)}}function Rt(t,n){1&t&&(e.TgZ(0,"a",13)(1,"span"),e._uU(2,"Document"),e.qZA()())}function Mt(t,n){1&t&&(e.TgZ(0,"a",14)(1,"span"),e._uU(2,"Odometer"),e.qZA()())}function Gt(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-import-button",15),e.NdJ("importEvent",function(){e.CHM(a);const o=e.oxw(2);return e.KtG(o.importVehicle())}),e.qZA()}}function $t(t,n){1&t&&e._UZ(0,"input",16,17)}function Ht(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-add-button",18),e.NdJ("addEvent",function(){e.CHM(a);const o=e.oxw(2);return e.KtG(o.addVehicle())}),e.qZA()}}function Kt(t,n){if(1&t&&(e.TgZ(0,"div",4)(1,"div",5),e.YNc(2,Rt,3,0,"a",6),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,Mt,3,0,"a",8),e.qZA(),e.TgZ(5,"div",9),e.YNc(6,Gt,1,0,"app-import-button",10),e.YNc(7,$t,2,0,"input",11),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,Ht,1,0,"app-add-button",12),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",a.viewVehicleDoc),e.xp6(2),e.Q6J("ngIf",a.viewOdometerReading),e.xp6(2),e.Q6J("ngIf",a.allowImport),e.xp6(1),e.Q6J("ngIf",a.allowImport),e.xp6(2),e.Q6J("ngIf",a.allowAdd)}}function Bt(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-vehicle-list",19),e.NdJ("moreEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())})("editEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.editVehicle())})("deleteEvent",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.deleteVehicle(o))}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("vehicleList",a.dataSource)("count",a.count)}}let zt=(()=>{const n=class{constructor(i,o,l){this.menuRoleService=i,this.vehicleService=o,this.dialog=l,this.isLoaded=!1,this.req=new ie,this.eList=[],this.count=0,this.allowAdd=!1,this.allowImport=!1,this.viewVehicleDoc=!1,this.viewOdometerReading=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.vehicleService.getVehicleSearchData().pipe((0,L.w)(i=>(this.searchData=i.item,this.isLoaded=!0,this.dataSource=new m.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.add),this.allowImport=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.import),this.viewVehicleDoc=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.VehicleDoc,w.k.view),this.viewOdometerReading=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.OdometerReading_Fleet,w.k.view),this.vehicleService.getVehicleList(this.req)))).subscribe(i=>{this.update(i)})}ngAfterViewInit(){}changeSearchData(i){console.log(i),this.eList=[],this.dataSource=new m.by(this.eList),this.req.searchKey=i.searchKey,this.req.makeId=""!=i.makeId?i.makeId:null,this.req.modelId=""!=i.modelId?i.modelId:null,this.req.ownerId=""!=i.ownerId?i.ownerId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new m.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(i){i?.response?.status==x.s.success&&(this.eList.push.apply(this.eList,i.list),this.dataSource=new m.by(this.eList),this.count=i.totalRecords,i.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.vehicleService.getVehicleList(this.req).subscribe(i=>{this.update(i)})}addVehicle(){this.dialog.open(fe,{data:null,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(o=>{1==o&&this.refreshList()})}editVehicle(){this.refreshList()}deleteVehicle(i){confirm(q.J.confirmDelete(i.code))&&(this.sub=this.vehicleService.deleteVehicle(i.id).subscribe(o=>{o?.status==x.s.success?this.refreshList():alert(o?.message)}))}importVehicle(){}ngOnDestroy(){this.sub?.unsubscribe(),this.importSub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.K),e.Y36(y.f),e.Y36(h.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle"]],viewQuery:function(o,l){if(1&o&&e.Gf(Qt,5),2&o){let r;e.iGM(r=e.CRH())&&(l.vehicleImport=r.first)}},decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row ps-3",4,"ngIf"],[3,"vehicleList","count","moreEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row","ps-3"],[1,"col-1","p-0"],["mat-button","","class","nav-link col-12","routerLink","/vehicle/doc","routerLinkActive","active",4,"ngIf"],[1,"col-1"],["mat-button","","class","nav-link col-12","routerLink","/vehicle/odometer/reading","routerLinkActive","active",4,"ngIf"],[1,"col-1","offset-8"],["class","col-12",3,"importEvent",4,"ngIf"],["type","file","id","vehicleImport","name","vehicleImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","style","display: none;",4,"ngIf"],["class","col-12",3,"addEvent",4,"ngIf"],["mat-button","","routerLink","/vehicle/doc","routerLinkActive","active",1,"nav-link","col-12"],["mat-button","","routerLink","/vehicle/odometer/reading","routerLinkActive","active",1,"nav-link","col-12"],[1,"col-12",3,"importEvent"],["type","file","id","vehicleImport","name","vehicleImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",2,"display","none"],["vehicleImport",""],[1,"col-12",3,"addEvent"],[3,"vehicleList","count","moreEvent","editEvent","deleteEvent"]],template:function(o,l){1&o&&(e.YNc(0,kt,1,1,"app-vehicle-search-filter",0),e.YNc(1,Kt,10,5,"div",1),e.YNc(2,Bt,1,2,"app-vehicle-list",2)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",(l.allowAdd||l.allowImport||l.viewVehicleDoc)&&l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.O5,b.zs,ge.L,ve.x,D.rH,D.Od,xe,Yt]}),t})();class Pt extends Q.G{}function jt(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Xt(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Wt(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}let ei=(()=>{const n=class{constructor(){this.onSearchChange=new Z.x,this.onSearch=new Z.x}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),docTypeId:new c.NI(""),mode:new c.NI(4,[c.kI.required]),expiryDays:new c.NI(null),ownerId:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(i=>{this.onSearchChange.next(i)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",docTypeId:"",mode:4,expiryDays:null,ownerId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle-doc-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:36,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","mt-2",3,"click"],["appearance","outline","floatLabel","always",1,"form-field","col-1"],["type","number","placeholder","","matInput","","formControlName","expiryDays"],[1,"form-field","col-3"],["formControlName","ownerId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","docTypeId"],["formControlName","mode"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(o,l){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Expire In"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Owner"),e.qZA(),e.TgZ(11,"mat-select",6)(12,"mat-option",7),e._uU(13,"All"),e.qZA(),e.YNc(14,jt,2,2,"mat-option",8),e.qZA()(),e.TgZ(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Doc Type"),e.qZA(),e.TgZ(18,"mat-select",10)(19,"mat-option",7),e._uU(20,"All"),e.qZA(),e.YNc(21,Xt,2,2,"mat-option",8),e.qZA()(),e.TgZ(22,"mat-form-field",9)(23,"mat-label"),e._uU(24,"Mode"),e.qZA(),e.TgZ(25,"mat-select",11),e.YNc(26,Wt,2,2,"mat-option",8),e.qZA()(),e.TgZ(27,"mat-form-field",12)(28,"mat-label"),e._uU(29,"Search"),e.qZA(),e._UZ(30,"input",13),e.qZA(),e.TgZ(31,"div",14)(32,"button",15)(33,"i",16),e._uU(34,"search"),e.qZA(),e._uU(35," Search"),e.qZA()()()()),2&o&&(e.Q6J("formGroup",l.filterForm),e.xp6(14),e.Q6J("ngForOf",l.searchData.ownerList),e.xp6(7),e.Q6J("ngForOf",l.searchData.docTypeList),e.xp6(5),e.Q6J("ngForOf",l.searchData.searchModeList))},dependencies:[v.sg,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,f.KE,f.hX,I.Nt,b.lW,F.gD,V.ey]}),t})();const ti=["page"];function ii(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," DocType "),e.qZA())}function oi(t,n){1&t&&(e.TgZ(0,"span",25)(1,"i",26),e._uU(2,"attachment"),e.qZA()())}function ni(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.YNc(2,oi,3,0,"span",24),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.documentType.name," "),e.xp6(1),e.Q6J("ngIf",null!=a.fileName)}}function ai(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Identifier "),e.qZA())}function li(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.identifier," ")}}function ci(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Expiry (Days) "),e.qZA())}function ri(t,n){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.AsE(" ",a.expiryDate," (",a.expiryDays,") ")}}function si(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Code "),e.qZA())}function di(t,n){if(1&t&&(e.TgZ(0,"td",23)(1,"span",27),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.code)}}function mi(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," PlateNumber "),e.qZA())}function pi(t,n){if(1&t&&(e.TgZ(0,"td",23)(1,"span",27),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.plateNumber)}}function ui(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Model "),e.qZA())}function hi(t,n){if(1&t&&(e.TgZ(0,"td",23)(1,"span",27),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.AsE("",a.vehicle.make," ",a.vehicle.model,"")}}function _i(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Owner "),e.qZA())}function fi(t,n){if(1&t&&(e.TgZ(0,"td",23)(1,"span",27),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.owner)}}function gi(t,n){1&t&&(e.TgZ(0,"th",22),e._uU(1," Status "),e.qZA())}function vi(t,n){1&t&&(e.TgZ(0,"span",31),e._uU(1,"Valid"),e.qZA())}function Zi(t,n){1&t&&(e.TgZ(0,"span",32),e._uU(1,"Expired"),e.qZA())}function Ti(t,n){1&t&&(e.TgZ(0,"span",33),e._uU(1,"Near Expiry"),e.qZA())}function wi(t,n){if(1&t&&(e.TgZ(0,"td",23),e.YNc(1,vi,2,0,"span",28),e.YNc(2,Zi,2,0,"span",29),e.YNc(3,Ti,2,0,"span",30),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf",1==a.valid),e.xp6(1),e.Q6J("ngIf",1==a.expired),e.xp6(1),e.Q6J("ngIf",1==a.nearExpiry)}}function xi(t,n){1&t&&e._UZ(0,"th",34)}function Ci(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-view-action-icon",39),e.NdJ("viewEvent",function(o){e.CHM(a);const l=e.oxw(2);return e.KtG(l.viewDoc(o))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Di(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-download-action-icon",40),e.NdJ("downloadEvent",function(o){e.CHM(a);const l=e.oxw(2);return e.KtG(l.downloadDoc(o))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function yi(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-action-icon",41),e.NdJ("actionEvent",function(o){e.CHM(a);const l=e.oxw(2);return e.KtG(l.removeDocFile(o))}),e._uU(1,"attach_file_off"),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Ii(t,n){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,Ci,1,1,"app-view-action-icon",36),e.YNc(2,Di,1,1,"app-download-action-icon",37),e.YNc(3,yi,2,1,"app-action-icon",38),e.qZA()),2&t){const a=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=a.fileName&&i.allowExport),e.xp6(1),e.Q6J("ngIf",null!=a.fileName&&i.allowExport),e.xp6(1),e.Q6J("ngIf",null!=a.fileName&&i.allowDelete)}}function bi(t,n){1&t&&e._UZ(0,"tr",42)}function Ni(t,n){1&t&&e._UZ(0,"tr",43)}const Ai=function(){return[10,20,50]};let Li=(()=>{const n=class{constructor(i,o){this.menuRoleService=i,this.dialog=o,this.moreEvent=new Z.x,this.displayedColumns=["docType","identifier","expiryDate","code","plateNumber","makeModel","owner","status","manage"],this.baseUrl=(0,A.S)(),this.allowDelete=!1,this.allowExport=!1,this.viewDocEvent=new Z.x,this.downloadDocEvent=new Z.x,this.removeDocFileEvent=new Z.x}ngOnInit(){this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.VehicleDoc,w.k.delete),this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.VehicleDoc,w.k.export)}ngOnChanges(i){this.vehicleDocList.paginator=this.paginator}ngAfterViewInit(){this.vehicleDocList.paginator=this.paginator}more(){this.moreEvent.next(!0)}viewDoc(i){this.viewDocEvent.next(i)}downloadDoc(i){this.downloadDocEvent.next(i)}removeDocFile(i){this.removeDocFileEvent.next(i)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.K),e.Y36(h.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle-doc-list"]],viewQuery:function(o,l){if(1&o&&e.Gf(ti,5),2&o){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{vehicleDocList:"vehicleDocList",count:"count"},outputs:{moreEvent:"moreEvent",viewDocEvent:"viewDocEvent",downloadDocEvent:"downloadDocEvent",removeDocFileEvent:"removeDocFileEvent"},features:[e.TTD],decls:36,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","docType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","identifier"],["matColumnDef","expiryDate"],["matColumnDef","code"],["matColumnDef","plateNumber"],["matColumnDef","makeModel"],["matColumnDef","owner"],["matColumnDef","status"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["class","ms-3",4,"ngIf"],[1,"ms-3"],[1,"material-icons","text-success"],[1,"ms-2"],["class","bg-success p-2 text-light rounded-pill",4,"ngIf"],["class","bg-warn p-2 text-light rounded-pill",4,"ngIf"],["class","bg-accent p-2 text-dark rounded-pill",4,"ngIf"],[1,"bg-success","p-2","text-light","rounded-pill"],[1,"bg-warn","p-2","text-light","rounded-pill"],[1,"bg-accent","p-2","text-dark","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],["color","accent",3,"item","actionEvent",4,"ngIf"],[3,"item","viewEvent"],[3,"item","downloadEvent"],["color","accent",3,"item","actionEvent"],["mat-header-row",""],["mat-row",""]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,ii,2,0,"th",3),e.YNc(4,ni,3,2,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,ai,2,0,"th",3),e.YNc(7,li,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,ci,2,0,"th",3),e.YNc(10,ri,2,2,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,si,2,0,"th",3),e.YNc(13,di,3,1,"td",4),e.BQk(),e.ynx(14,8),e.YNc(15,mi,2,0,"th",3),e.YNc(16,pi,3,1,"td",4),e.BQk(),e.ynx(17,9),e.YNc(18,ui,2,0,"th",3),e.YNc(19,hi,3,2,"td",4),e.BQk(),e.ynx(20,10),e.YNc(21,_i,2,0,"th",3),e.YNc(22,fi,3,1,"td",4),e.BQk(),e.ynx(23,11),e.YNc(24,gi,2,0,"th",3),e.YNc(25,wi,4,3,"td",4),e.BQk(),e.ynx(26,12),e.YNc(27,xi,1,0,"th",13),e.YNc(28,Ii,4,3,"td",14),e.BQk(),e.YNc(29,bi,1,0,"tr",15),e.YNc(30,Ni,1,0,"tr",16),e.qZA(),e._UZ(31,"mat-paginator",17,18),e.qZA(),e.TgZ(33,"div",19)(34,"div",20)(35,"app-server-pagination",21),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("dataSource",l.vehicleDocList),e.xp6(28),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Ai)),e.xp6(4),e.Q6J("loaded",l.vehicleDocList.data.length)("count",l.count))},dependencies:[v.O5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,M.NW,G.H,R.R,W.e,te.m]}),t})();function qi(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-vehicle-doc-search-filter",3),e.NdJ("onSearchChange",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.changeSearchData(o))})("onSearch",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("searchData",a.searchData)}}function Fi(t,n){1&t&&(e.TgZ(0,"div",4)(1,"a",5),e._uU(2," Back to Vehicle "),e.qZA()())}function Vi(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-vehicle-doc-list",6),e.NdJ("moreEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())})("viewDocEvent",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.viewDoc(o))})("downloadDocEvent",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.downloadDoc(o))})("removeDocFileEvent",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.removeDocFile(o))}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("vehicleDocList",a.dataSource)("count",a.count)}}let Ei=(()=>{const n=class{constructor(i,o,l,r){this.vehicleDocService=i,this.vehicleService=o,this.fileService=l,this.menuRoleService=r,this.isLoaded=!1,this.req=new Pt,this.eList=[],this.count=0,this.viewFleet=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.vehicleDocService.getVehicleDocSearchData().pipe((0,L.w)(i=>(this.searchData=i.item,this.isLoaded=!0,this.dataSource=new m.by(this.eList),this.req.pagination.pageSize=10,this.vehicleDocService.getVehicleDocList(this.req)))).subscribe(i=>{this.viewFleet=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.Fleet,w.k.view),this.update(i)})}ngAfterViewInit(){}changeSearchData(i){console.log(i),this.eList=[],this.dataSource=new m.by(this.eList),this.req.searchKey=i.searchKey,this.req.docTypeId=""!=i.docTypeId?i.docTypeId:null,this.req.mode=i.mode,this.req.expiryDays=i.expiryDays,this.req.ownerId=""!=i.ownerId?i.ownerId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new m.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(i){i?.response?.status==x.s.success&&(this.eList.push.apply(this.eList,i.list),this.dataSource=new m.by(this.eList),this.count=i.totalRecords,i.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.vehicleDocService.getVehicleDocList(this.req).subscribe(i=>{this.update(i)})}viewDoc(i){var o=this;this.sub=this.vehicleDocService.exportVehicleDoc(i.id).subscribe(function(){var l=(0,Y.Z)(function*(r){o.fileService.viewFile(r)});return function(r){return l.apply(this,arguments)}}())}downloadDoc(i){var o=this;let l=this.searchData.docTypeList.find(s=>s.id==i.documentType.id),r=`${i.vehicle.code}_${l.code}`;null!=i.identifier&&(r=`${r}_${i.identifier}`),this.sub=this.vehicleDocService.exportVehicleDoc(i.id).subscribe(function(){var s=(0,Y.Z)(function*(p){o.fileService.downloadFile(p,r)});return function(p){return s.apply(this,arguments)}}())}removeDocFile(i){confirm(q.J.areYouSureTo)&&(this.sub=this.vehicleDocService.removeVehicleDocFile(i.id).subscribe(o=>{this.refreshList()}))}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(S.l),e.Y36(y.f),e.Y36(X.I),e.Y36(N.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-vehicle-doc"]],decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row my-2 ps-3",4,"ngIf"],[3,"vehicleDocList","count","moreEvent","viewDocEvent","downloadDocEvent","removeDocFileEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row","my-2","ps-3"],["mat-button","","routerLink","/vehicle","routerLinkActive","active",1,"nav-link","col-1"],[3,"vehicleDocList","count","moreEvent","viewDocEvent","downloadDocEvent","removeDocFileEvent"]],template:function(o,l){1&o&&(e.YNc(0,qi,1,1,"app-vehicle-doc-search-filter",0),e.YNc(1,Fi,3,0,"div",1),e.YNc(2,Vi,1,2,"app-vehicle-doc-list",2)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.viewFleet),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.O5,b.zs,D.rH,D.Od,ei,Li]}),t})();class Ui extends Q.G{}const Si=["page"];function Ji(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Code "),e.qZA())}function Oi(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.code)}}function Yi(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," PlateNumber "),e.qZA())}function Qi(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.plateNumber)}}function ki(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Model "),e.qZA())}function Ri(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.AsE("",a.vehicle.make," ",a.vehicle.model,"")}}function Mi(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Owner "),e.qZA())}function Gi(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.vehicle.owner)}}function $i(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Reading "),e.qZA())}function Hi(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.reading)}}function Ki(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Timestamp "),e.qZA())}function Bi(t,n){if(1&t&&(e.TgZ(0,"td",21)(1,"span",22),e._uU(2),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Oqu(a.timestamp)}}function zi(t,n){1&t&&e._UZ(0,"th",23)}function Pi(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-delete-action-icon",26),e.NdJ("deleteEvent",function(){e.CHM(a);const o=e.oxw().$implicit,l=e.oxw();return e.KtG(l.delete(o))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function ji(t,n){if(1&t&&(e.TgZ(0,"td",24),e.YNc(1,Pi,1,1,"app-delete-action-icon",25),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.allowDelete)}}function Xi(t,n){1&t&&e._UZ(0,"tr",27)}function Wi(t,n){1&t&&e._UZ(0,"tr",28)}const eo=function(){return[10,20,50]};let to=(()=>{const n=class{constructor(i,o){this.menuRoleService=i,this.dialog=o,this.moreEvent=new Z.x,this.displayedColumns=["code","plateNumber","makeModel","owner","reading","timestamp","manage"],this.baseUrl=(0,A.S)(),this.allowEdit=!1,this.allowDelete=!1,this.editEvent=new Z.x,this.deleteEvent=new Z.x}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.OdometerReading_Fleet,w.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(T.w.OdometerReading_Fleet,w.k.delete)}ngOnChanges(i){this.omrList.paginator=this.paginator}ngAfterViewInit(){this.omrList.paginator=this.paginator}more(){this.moreEvent.next(!0)}edit(i){this.editEvent.next()}delete(i){this.deleteEvent.next(i)}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.K),e.Y36(h.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-odometer-reading-list"]],viewQuery:function(o,l){if(1&o&&e.Gf(Si,5),2&o){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{omrList:"omrList",count:"count"},outputs:{moreEvent:"moreEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[e.TTD],decls:30,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","plateNumber"],["matColumnDef","makeModel"],["matColumnDef","owner"],["matColumnDef","reading"],["matColumnDef","timestamp"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],[1,"ms-2"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","deleteEvent"],["mat-header-row",""],["mat-row",""]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,Ji,2,0,"th",3),e.YNc(4,Oi,3,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,Yi,2,0,"th",3),e.YNc(7,Qi,3,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,ki,2,0,"th",3),e.YNc(10,Ri,3,2,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,Mi,2,0,"th",3),e.YNc(13,Gi,3,1,"td",4),e.BQk(),e.ynx(14,8),e.YNc(15,$i,2,0,"th",3),e.YNc(16,Hi,3,1,"td",4),e.BQk(),e.ynx(17,9),e.YNc(18,Ki,2,0,"th",3),e.YNc(19,Bi,3,1,"td",4),e.BQk(),e.ynx(20,10),e.YNc(21,zi,1,0,"th",11),e.YNc(22,ji,2,1,"td",12),e.BQk(),e.YNc(23,Xi,1,0,"tr",13),e.YNc(24,Wi,1,0,"tr",14),e.qZA(),e._UZ(25,"mat-paginator",15,16),e.qZA(),e.TgZ(27,"div",17)(28,"div",18)(29,"app-server-pagination",19),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("dataSource",l.omrList),e.xp6(22),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,eo)),e.xp6(4),e.Q6J("loaded",l.omrList.data.length)("count",l.count))},dependencies:[v.O5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,M.NW,G.H,O.b]}),t})();function io(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function oo(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function no(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function ao(t,n){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a.id),e.xp6(1),e.AsE("",a.code," - (",a.plateNumber,")")}}let lo=(()=>{const n=class{constructor(i){this.vehicleService=i,this.vehicleList=[],this.onSearchChange=new Z.x,this.onSearch=new Z.x,this.modelListFiltered=[],this.vehicleListFiltered=[]}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),makeId:new c.NI(""),modelId:new c.NI(""),ownerId:new c.NI(""),vehicleId:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(i=>{this.onSearchChange.next(i)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",makeId:"",modelId:"",ownerId:"",vehicleId:""})}onMakeChange(i){this.modelListFiltered=this.searchData.modelList.filter(l=>l.make.id==this.filterForm.value.makeId)??[];let o=this.searchData.makeList.find(l=>l.id==this.filterForm.value.makeId)?.name??"";this.vehicleListFiltered=this.vehicleList.filter(l=>l.make==o||""==o)??[],this.filterForm.patchValue({modelId:"",vehicleId:""})}onModelChange(i){let o=this.searchData.makeList.find(r=>r.id==this.filterForm.value.makeId)?.name??"",l=this.searchData.modelList.find(r=>r.id==this.filterForm.value.modelId)?.name??"";this.vehicleListFiltered=this.vehicleList.filter(r=>!(r.make!=o&&""!=o||r.model!=l&&""!=l))??[],this.filterForm.patchValue({vehicleId:""})}onOwnerChange(i){this.vehicleList=[],this.vehicleListFiltered=[],""!=this.filterForm.value.ownerId?(this.sub=this.vehicleService.getVehicleListByOwner(this.filterForm.value.ownerId).subscribe(o=>{this.vehicleList=o.list;let l=this.searchData.makeList.find(s=>s.id==this.filterForm.value.makeId)?.name??"",r=this.searchData.modelList.find(s=>s.id==this.filterForm.value.modelId)?.name??"";this.vehicleListFiltered=this.vehicleList.filter(s=>!(s.make!=l&&""!=l||s.model!=r&&""!=r))??[]}),this.filterForm.patchValue({vehicleId:""})):this.filterForm.patchValue({vehicleId:""})}ngOnDestroy(){this.sub?.unsubscribe(),this.valueChangeSub.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(y.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-odometer-reading-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:41,vars:5,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-0","mt-2",3,"click"],[1,"form-field","col-1"],["formControlName","makeId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","modelId",3,"selectionChange"],[1,"form-field","col-3"],["formControlName","ownerId",3,"selectionChange"],["formControlName","vehicleId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(o,l){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Make"),e.qZA(),e.TgZ(7,"mat-select",4),e.NdJ("selectionChange",function(s){return l.onMakeChange(s)}),e.TgZ(8,"mat-option",5),e._uU(9,"All"),e.qZA(),e.YNc(10,io,2,2,"mat-option",6),e.qZA()(),e.TgZ(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Model"),e.qZA(),e.TgZ(14,"mat-select",8),e.NdJ("selectionChange",function(s){return l.onModelChange(s)}),e.TgZ(15,"mat-option",5),e._uU(16,"All"),e.qZA(),e.YNc(17,oo,2,2,"mat-option",6),e.qZA()(),e.TgZ(18,"mat-form-field",9)(19,"mat-label"),e._uU(20,"Owner"),e.qZA(),e.TgZ(21,"mat-select",10),e.NdJ("selectionChange",function(s){return l.onOwnerChange(s)}),e.TgZ(22,"mat-option",5),e._uU(23,"All"),e.qZA(),e.YNc(24,no,2,2,"mat-option",6),e.qZA()(),e.TgZ(25,"mat-form-field",7)(26,"mat-label"),e._uU(27,"Vehicle"),e.qZA(),e.TgZ(28,"mat-select",11)(29,"mat-option",5),e._uU(30,"All"),e.qZA(),e.YNc(31,ao,2,3,"mat-option",6),e.qZA()(),e.TgZ(32,"mat-form-field",12)(33,"mat-label"),e._uU(34,"Search"),e.qZA(),e._UZ(35,"input",13),e.qZA(),e.TgZ(36,"div",14)(37,"button",15)(38,"i",16),e._uU(39,"search"),e.qZA(),e._uU(40," Search"),e.qZA()()()()),2&o&&(e.Q6J("formGroup",l.filterForm),e.xp6(10),e.Q6J("ngForOf",l.searchData.makeList),e.xp6(7),e.Q6J("ngForOf",l.modelListFiltered),e.xp6(7),e.Q6J("ngForOf",l.searchData.ownerList),e.xp6(7),e.Q6J("ngForOf",l.vehicleListFiltered))},dependencies:[v.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.KE,f.hX,I.Nt,b.lW,F.gD,V.ey]}),t})();function co(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-odometer-reading-search-filter",5),e.NdJ("onSearchChange",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.changeSearchData(o))})("onSearch",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("searchData",a.searchData)}}function ro(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"app-odometer-reading-list",6),e.NdJ("moreEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.getList())})("editEvent",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.refreshList())})("deleteEvent",function(o){e.CHM(a);const l=e.oxw();return e.KtG(l.delete(o))}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("omrList",a.dataSource)("count",a.count)}}const so=[{path:"",component:zt},{path:"doc",component:Ei,pathMatch:"full"},{path:"odometer/reading",component:(()=>{const n=class{constructor(i,o,l,r){this.menuRoleService=i,this.vehicleService=o,this.odometerReadingService=l,this.dialog=r,this.isLoaded=!1,this.req=new Ui,this.eList=[],this.count=0}ngOnInit(){this.isLoaded=!1,this.sub=this.vehicleService.getVehicleSearchData().pipe((0,L.w)(i=>(this.searchData=i.item,this.isLoaded=!0,this.dataSource=new m.by(this.eList),this.req.pagination.pageSize=10,this.odometerReadingService.getOdometerReadingList(this.req)))).subscribe(i=>{this.update(i)})}ngAfterViewInit(){}changeSearchData(i){console.log(i),this.eList=[],this.dataSource=new m.by(this.eList),this.req.searchKey=i.searchKey,this.req.makeId=""!=i.makeId?i.makeId:null,this.req.modelId=""!=i.modelId?i.modelId:null,this.req.ownerId=""!=i.ownerId?i.ownerId:null,this.req.vehicleId=""!=i.vehicleId?i.vehicleId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new m.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(i){i?.response?.status==x.s.success&&(this.eList.push.apply(this.eList,i.list),this.dataSource=new m.by(this.eList),this.count=i.totalRecords,i.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.odometerReadingService.getOdometerReadingList(this.req).subscribe(i=>{this.update(i)})}delete(i){confirm(q.J.areYouSureTo)&&(this.sub=this.odometerReadingService.deleteOdometerReading(i.id).subscribe(o=>{o?.status==x.s.success?this.refreshList():alert(o?.message)}))}ngOnDestroy(){this.sub?.unsubscribe()}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.K),e.Y36(y.f),e.Y36(ee),e.Y36(h.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-odometer-reading"]],decls:6,vars:2,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],[1,"row","my-2"],[1,"col-2"],["mat-button","","routerLink","/vehicle","routerLinkActive","active",1,"nav-link"],[3,"omrList","count","moreEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[3,"omrList","count","moreEvent","editEvent","deleteEvent"]],template:function(o,l){1&o&&(e.YNc(0,co,1,1,"app-odometer-reading-search-filter",0),e.TgZ(1,"div",1)(2,"div",2)(3,"a",3),e._uU(4," Back to Vehicle "),e.qZA()()(),e.YNc(5,ro,1,2,"app-odometer-reading-list",4)),2&o&&(e.Q6J("ngIf",l.isLoaded),e.xp6(5),e.Q6J("ngIf",l.isLoaded))},dependencies:[v.O5,b.zs,D.rH,D.Od,to,lo]}),t})(),pathMatch:"full"}];let mo=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[D.Bz.forChild(so)]}),t})();var po=d(529),uo=d(3214),ho=d(1260);let _o=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.ez,mo,c.u5,c.UX,po.JF,uo._,ho.m,D.Bz]}),t})()}}]);