"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[418],{5311:(L,x,o)=>{o.d(x,{J:()=>f});let f=(()=>{const g=class{static confirmAdd(u){return this.areYouSure+" to add "+u+" ?"}static confirmEdit(u){return this.areYouSure+" to edit "+u+" ?"}static confirmDelete(u){return this.areYouSure+" to delete "+u+" ?"}static confirmActivate(u){return this.areYouSure+" to activate "+u+" ?"}static confirmInactivate(u){return this.areYouSure+" to inactivate "+u+" ?"}static confirmClear(u){return this.areYouSure+" to clear "+u+" ?"}static confirmAddUserRole(u,p){return this.areYouSure+" to add role "+p+" to user "+u+" ?"}static confirmRemoveUserRole(u,p){return this.areYouSure+" to remove role "+p+" to user "+u+" ?"}static confirmChangeUsername(u,p){return this.areYouSure+" to change username from "+u+" to "+p+" ?"}static confirmChangeEmail(u,p){return this.areYouSure+" to change email from "+u+" to "+p+" ?"}static revokeUser(u){return this.areYouSure+" to revoke user "+u+" ?"}};let r=g;return g.areYouSure="Are you sure",g.areYouSureTo="Are you sure ?",g.downloading="Downloading ...",g.downloaded="",r})()},6212:(L,x,o)=>{o.d(x,{G:()=>r});class f{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}class r{constructor(){this.searchKey="",this.pagination=new f}}},3390:(L,x,o)=>{o.r(x),o.d(x,{PayrollModule:()=>de});var f=o(6895),r=o(1635),g=o(7155),E=o(3900),u=o(9167),p=o(9172),m=o(5311),_=o(1654),d=o(673),t=o(4650),y=o(1219),v=o(9057),Z=o(5);let I=(()=>{const i=class{constructor(e){this.http=e}getSalaryList(e){return this.http.post(v.b.getSalaryList,e)}getSalary(e){let n=v.b.getSalary;return n=n.replace(/{id}/gi,e),this.http.get(n)}getSalaryManageData(){return this.http.get(v.b.getSalaryManageData)}addSalary(e){return this.http.post(v.b.addSalary,e)}editSalary(e){return this.http.post(v.b.editSalary,e)}deleteSalary(e){let n=v.b.deleteSalary;return n=n.replace(/{id}/gi,e),this.http.post(n,null)}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.LFG(Z.o))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),a})();var S=o(5332),C=o(5412),c=o(4006),w=o(7579),D=o(9549),O=o(4144),q=o(4859),b=o(4385),U=o(3238);function K(a,i){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}function Q(a,i){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}function B(a,i){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}let H=(()=>{const i=class{constructor(){this.onSearchChange=new w.x,this.onSearch=new w.x}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),companyId:new c.NI(""),groupId:new c.NI(""),countryId:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(e=>{this.onSearchChange.next(e)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",groupId:"",countryId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let a=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-salary-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","countryId"],["formControlName","groupId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(n,s){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.search()}),t.TgZ(1,"div",1)(2,"button",2),t.NdJ("click",function(){return s.resetFilter()}),t._uU(3,"Reset"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Company"),t.qZA(),t.TgZ(7,"mat-select",4)(8,"mat-option",5),t._uU(9,"All"),t.qZA(),t.YNc(10,K,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Nationality"),t.qZA(),t.TgZ(14,"mat-select",8)(15,"mat-option",5),t._uU(16,"All"),t.qZA(),t.YNc(17,Q,2,2,"mat-option",6),t.qZA()(),t.TgZ(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Profession"),t.qZA(),t.TgZ(21,"mat-select",9)(22,"mat-option",5),t._uU(23,"All"),t.qZA(),t.YNc(24,B,2,2,"mat-option",6),t.qZA()(),t.TgZ(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Search"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.TgZ(29,"div",12)(30,"button",13)(31,"i",14),t._uU(32,"search"),t.qZA(),t._uU(33," Search"),t.qZA()()()()),2&n&&(t.Q6J("formGroup",s.filterForm),t.xp6(10),t.Q6J("ngForOf",s.searchData.companyList),t.xp6(7),t.Q6J("ngForOf",s.searchData.countryList),t.xp6(7),t.Q6J("ngForOf",s.searchData.groupList))},dependencies:[f.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,D.KE,D.hX,O.Nt,q.lW,b.gD,U.ey]}),a})();class W{}class R{}var M=o(5659),A=o(9602),G=o(2833),Y=o(4682),P=o(1837),F=o(1234),N=o(2043);function k(a,i){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," Add Salary\n"),t.qZA())}function j(a,i){1&a&&t._UZ(0,"img",33)}function $(a,i){if(1&a&&t._UZ(0,"img",34),2&a){const l=t.oxw(2);t.hYB("src","",l.baseUrl,"/profile/",l.data.employee.profileUrl,"",t.LSH)}}function X(a,i){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l),t.xp6(1),t.Oqu(l)}}function V(a,i){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}function z(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(n){const h=t.CHM(l).index,T=t.oxw(2);return t.KtG(T.onPayHeadChange(n,h))}),t.YNc(6,V,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const s=t.CHM(l).index,h=t.oxw(2);return t.KtG(h.deleteSalaryLine(s))}),t.qZA()()()()}if(2&a){const l=i.$implicit,e=i.index,n=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(6),t.Q6J("ngForOf",n.manageData.payHeadList),t.xp6(6),t.Q6J("item",l)}}function tt(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.addSalary())}),t.TgZ(2,"div",4),t.YNc(3,j,1,0,"img",5),t.YNc(4,$,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,X,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,z,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.reset())}),t.qZA(),t._UZ(50,"app-crud-add-button",32),t.qZA()()()}if(2&a){const l=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls),t.xp6(3),t.Q6J("disabled",e.isProcessing)}}let et=(()=>{const i=class{constructor(e,n,s,h){this.dialogRef=e,this.salaryService=n,this.ds=s,this.data=h,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,v.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new c.cw({effectiveFrom:new c.NI(new Date,[c.kI.required]),salaryPeriod:new c.NI("Months",[c.kI.required]),weeklyOffDays:new c.NI(0,[c.kI.required]),salaryLineList:new c.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(e=>{this.manageData=e.item,this.isLoaded=!0,this.addDefaultSalaryLine("Basic Salary"),this.addDefaultSalaryLine("Allowance")})}addDefaultSalaryLine(e){let n=this.manageData.payHeadList.find(s=>s.name==e)?.id;this.manageForm.get("salaryLineList").push(new c.cw({payHeadId:new c.NI(n,c.kI.required),rate:new c.NI(null,c.kI.required)}))}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new c.cw({payHeadId:new c.NI(null,c.kI.required),rate:new c.NI(null,c.kI.required)}))}deleteSalaryLine(e){this.manageForm.get("salaryLineList").removeAt(e),this.onRateChange()}onPayHeadChange(e,n){this.manageForm.get("salaryLineList").at(n).patchValue({rate:null})}onRateChange(){let e=0;this.manageForm.value.salaryLineList.forEach(n=>{e+=n.rate??0}),this.total=e}addSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(m.J.areYouSureTo))return;let e=new W;e.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),e.salaryPeriod=this.manageForm.value.salaryPeriod,e.weeklyOffDays=this.manageForm.value.weeklyOffDays,e.employeeId=this.data.employee.id,e.salaryLineList=[],this.manageForm.value.salaryLineList.forEach(s=>{let h=new R;h.payHeadId=s.payHeadId,h.rate=s.rate,e.salaryLineList.push(h)});let n=this.validateSalaryLine();""==n?(this.isProcessing=!0,this.sub=this.salaryService.addSalary(e).subscribe(s=>{if(this.isProcessing=!1,s?.status!=d.s.success)return this.isProcessing=!1,void alert(s?.message);this.reset(),this.closeDialog()})):alert(`Error : ${n}`)}validateSalaryLine(){let e=[],n="",s=0;if(this.manageForm.value.salaryLineList.forEach(T=>{s++,e.findIndex(J=>J.key.payHeadId==T.payHeadId)>=0?n=T.payHeadId:e.push({key:{payHeadId:T.payHeadId},value:1})}),""!=n){var h=this.manageData.payHeadList.find(T=>T.id==n)?.name;return`Duplicate line ${h} found`}return 0==s?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(C.so),t.Y36(I),t.Y36(M.R),t.Y36(C.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(n,s){1&n&&(t.YNc(0,k,2,0,"app-form-heading",0),t.YNc(1,tt,51,13,"div",1)),2&n&&(t.Q6J("ngIf",s.isLoaded),t.xp6(1),t.Q6J("ngIf",s.isLoaded))},dependencies:[f.sg,f.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,D.KE,D.hX,D.R9,O.Nt,C.xY,b.gD,U.ey,A.Mq,A.hl,A.nW,G.L,Y.X,P.b,F.E,N.H]}),a})();function at(a,i){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," View Salary\n"),t.qZA())}function nt(a,i){1&a&&t._UZ(0,"img",30)}function it(a,i){if(1&a&&t._UZ(0,"img",31),2&a){const l=t.oxw(2);t.hYB("src","",l.baseUrl,"/profile/",l.data.employee.profileUrl,"",t.LSH)}}function ot(a,i){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l),t.xp6(1),t.Oqu(l)}}function rt(a,i){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}function lt(a,i){if(1&a&&(t.TgZ(0,"div",33)(1,"div",14)(2,"mat-form-field",34)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",35),t.YNc(6,rt,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t._UZ(10,"input",36),t.qZA()()()),2&a){const l=i.index,e=t.oxw(2);t.Q6J("formGroupName",l),t.xp6(6),t.Q6J("ngForOf",e.manageData.payHeadList)}}function st(a,i){if(1&a&&(t.TgZ(0,"div",2)(1,"form",3)(2,"div",4),t.YNc(3,nt,1,0,"img",5),t.YNc(4,it,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,ot,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",27)(42,"h4"),t._uU(43),t.qZA()()(),t.TgZ(44,"div",28),t.YNc(45,lt,11,2,"div",29),t.qZA()()()()()()),2&a){const l=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(14),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls)}}let ct=(()=>{const i=class{constructor(e,n,s,h){this.dialogRef=e,this.salaryService=n,this.ds=s,this.data=h,this.isLoaded=!1,this.total=0,this.baseUrl=(0,v.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new c.cw({effectiveFrom:new c.NI({value:null,disabled:!0},[c.kI.required]),salaryPeriod:new c.NI({value:null,disabled:!0},[c.kI.required]),weeklyOffDays:new c.NI({value:null,disabled:!0},[c.kI.required]),salaryLineList:new c.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,E.w)(e=>(this.manageData=e.item,this.salaryService.getSalary(this.data.id)))).subscribe(e=>{let n=e.item;this.isLoaded=!0;let s=null!=n.effectiveFrom?this.ds.responseFormatToDate(n.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:s,salaryPeriod:n.salaryPeriod,weeklyOffDays:n.weeklyOffDays});let h=0;n.salaryLineList.forEach(T=>{h+=T.rate??0,this.manageForm.get("salaryLineList").push(new c.cw({payHeadId:new c.NI({value:T.payHead.id,disabled:!0}),rate:new c.NI({value:T.rate,disabled:!0})}))}),this.total=h})}ngOnDestroy(){this.sub?.unsubscribe()}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(C.so),t.Y36(I),t.Y36(M.R),t.Y36(C.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[1,"col-10","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId"],["type","number","matInput","","formControlName","rate"]],template:function(n,s){1&n&&(t.YNc(0,at,2,0,"app-form-heading",0),t.YNc(1,st,46,12,"div",1)),2&n&&(t.Q6J("ngIf",s.isLoaded),t.xp6(1),t.Q6J("ngIf",s.isLoaded))},dependencies:[f.sg,f.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,D.KE,D.hX,D.R9,O.Nt,C.xY,b.gD,U.ey,A.Mq,A.hl,A.nW,N.H]}),a})();class dt{}var mt=o(7786);function ut(a,i){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," Edit Salary\n"),t.qZA())}function pt(a,i){1&a&&t._UZ(0,"img",33)}function _t(a,i){if(1&a&&t._UZ(0,"img",34),2&a){const l=t.oxw(2);t.hYB("src","",l.baseUrl,"/profile/",l.data.employee.profileUrl,"",t.LSH)}}function ft(a,i){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l),t.xp6(1),t.Oqu(l)}}function gt(a,i){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.Q6J("value",l.id),t.xp6(1),t.Oqu(l.name)}}function ht(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(n){const h=t.CHM(l).index,T=t.oxw(2);return t.KtG(T.onPayHeadChange(n,h))}),t.YNc(6,gt,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const s=t.CHM(l).index,h=t.oxw(2);return t.KtG(h.deleteSalaryLine(s))}),t.qZA()()()()}if(2&a){const l=i.$implicit,e=i.index,n=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(6),t.Q6J("ngForOf",n.manageData.payHeadList),t.xp6(6),t.Q6J("item",l)}}function yt(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.editSalary())}),t.TgZ(2,"div",4),t.YNc(3,pt,1,0,"img",5),t.YNc(4,_t,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,ft,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,ht,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.reset())}),t.qZA(),t._UZ(50,"app-crud-edit-button",32),t.qZA()()()}if(2&a){const l=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls),t.xp6(3),t.Q6J("disabled",e.isProcessing)}}let vt=(()=>{const i=class{constructor(e,n,s,h){this.dialogRef=e,this.salaryService=n,this.ds=s,this.data=h,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,v.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new c.cw({effectiveFrom:new c.NI(null,[c.kI.required]),salaryPeriod:new c.NI(null,[c.kI.required]),weeklyOffDays:new c.NI(null,[c.kI.required]),salaryLineList:new c.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,E.w)(e=>(this.manageData=e.item,this.salaryService.getSalary(this.data.id)))).subscribe(e=>{let n=e.item;this.isLoaded=!0;let s=null!=n.effectiveFrom?this.ds.responseFormatToDate(n.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:s,salaryPeriod:n.salaryPeriod,weeklyOffDays:n.weeklyOffDays});let h=0;n.salaryLineList.forEach(T=>{h+=T.rate??0,this.manageForm.get("salaryLineList").push(new c.cw({payHeadId:new c.NI({value:T.payHead.id,disabled:!0}),rate:new c.NI({value:T.rate,disabled:!1})}))}),this.total=h})}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new c.cw({payHeadId:new c.NI(null,c.kI.required),rate:new c.NI(null,c.kI.required)}))}deleteSalaryLine(e){this.manageForm.get("salaryLineList").removeAt(e),this.onRateChange()}onPayHeadChange(e,n){this.manageForm.get("salaryLineList").at(n).patchValue({rate:null})}onRateChange(){let e=0;this.manageForm.value.salaryLineList.forEach(n=>{e+=n.rate??0}),this.total=e}editSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(m.J.areYouSureTo))return;let e=new dt;e.id=this.data.id,e.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),e.salaryPeriod=this.manageForm.value.salaryPeriod,e.weeklyOffDays=this.manageForm.value.weeklyOffDays,e.employeeId=this.data.employee.id,e.salaryLineList=[],this.manageForm.get("salaryLineList").controls.forEach(s=>{console.log(s);let h=new R;h.payHeadId=s.getRawValue().payHeadId,h.rate=s.getRawValue().rate,e.salaryLineList.push(h)});let n=this.validateSalaryLine();""==n?(this.isProcessing=!0,this.sub=this.salaryService.editSalary(e).subscribe(s=>{if(this.isProcessing=!1,s?.status!=d.s.success)return this.isProcessing=!1,void alert(s?.message);this.reset(),this.closeDialog()})):alert(`Error : ${n}`)}validateSalaryLine(){let e=[],n="",s=0;if(this.manageForm.get("salaryLineList").controls.forEach(T=>{s++,e.findIndex(J=>J.key.payHeadId==T.getRawValue().payHeadId)>=0?n=T.getRawValue().payHeadId:e.push({key:{payHeadId:T.getRawValue().payHeadId},value:1})}),""!=n){var h=this.manageData.payHeadList.find(T=>T.id==n)?.name;return`Duplicate line ${h} found`}return 0==s?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(C.so),t.Y36(I),t.Y36(M.R),t.Y36(C.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(n,s){1&n&&(t.YNc(0,ut,2,0,"app-form-heading",0),t.YNc(1,yt,51,13,"div",1)),2&n&&(t.Q6J("ngIf",s.isLoaded),t.xp6(1),t.Q6J("ngIf",s.isLoaded))},dependencies:[f.sg,f.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,D.KE,D.hX,D.R9,O.Nt,C.xY,b.gD,U.ey,A.Mq,A.hl,A.nW,mt.W,Y.X,P.b,F.E,N.H]}),a})();var Et=o(7974),xt=o(4521),Tt=o(1763),Ct=o(7268);const Lt=["page"];function Zt(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," Name "),t.qZA())}function Dt(a,i){1&a&&t._UZ(0,"img",27)}function It(a,i){if(1&a&&t._UZ(0,"img",28),2&a){const l=t.oxw().$implicit,e=t.oxw();t.hYB("src","",e.baseUrl,"/profile/",l.employee.profileUrl,"",t.LSH)}}function At(a,i){if(1&a&&(t.TgZ(0,"td",24),t.YNc(1,Dt,1,0,"img",25),t.YNc(2,It,1,2,"img",26),t._uU(3),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.Q6J("ngIf",null==l.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=l.employee.profileUrl),t.xp6(1),t.hij(" ",l.employee.name," ")}}function St(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," Code "),t.qZA())}function wt(a,i){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.hij(" ",l.employee.code," ")}}function Ot(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," Working Company "),t.qZA())}function bt(a,i){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.hij(" ",l.employee.workingCompany," ")}}function Ut(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," Profession "),t.qZA())}function Mt(a,i){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.hij(" ",l.employee.group," ")}}function Pt(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," From "),t.qZA())}function Ft(a,i){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.hij(" ",l.effectiveFrom," ")}}function Nt(a,i){1&a&&(t.TgZ(0,"th",23),t._uU(1," Period "),t.qZA())}function Jt(a,i){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.hij(" ",l.salaryPeriod," ")}}function Rt(a,i){1&a&&(t.TgZ(0,"th",29),t._uU(1," Off Days "),t.qZA())}function Yt(a,i){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const l=t.oxw().$implicit;t.xp6(1),t.Oqu(l.weeklyOffDays)}}function qt(a,i){1&a&&(t.TgZ(0,"span"),t._uU(1,"-"),t.qZA())}function Kt(a,i){if(1&a&&(t.TgZ(0,"td",30),t.YNc(1,Yt,2,1,"span",31),t.YNc(2,qt,2,0,"span",31),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.Q6J("ngIf",null!=l.id),t.xp6(1),t.Q6J("ngIf",null==l.id)}}function Qt(a,i){1&a&&(t.TgZ(0,"th",29),t._uU(1," Salary "),t.qZA())}function Bt(a,i){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const l=t.oxw().$implicit;t.xp6(1),t.Oqu(l.total)}}function Ht(a,i){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Not Set"),t.qZA())}function Wt(a,i){if(1&a&&(t.TgZ(0,"td",30),t.YNc(1,Bt,2,1,"span",31),t.YNc(2,Ht,2,0,"span",32),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.Q6J("ngIf",null!=l.id),t.xp6(1),t.Q6J("ngIf",null==l.id)}}function Gt(a,i){1&a&&t._UZ(0,"th",29)}function kt(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"app-edit-action-icon",39),t.NdJ("editEvent",function(){t.CHM(l);const n=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.edit(n))}),t.qZA()}if(2&a){const l=t.oxw(2).$implicit;t.Q6J("item",l)}}function jt(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"app-delete-action-icon",40),t.NdJ("deleteEvent",function(){t.CHM(l);const n=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.delete(n))}),t.qZA()}if(2&a){const l=t.oxw(2).$implicit;t.Q6J("item",l)}}function $t(a,i){if(1&a){const l=t.EpF();t.ynx(0),t.TgZ(1,"app-view-action-icon",36),t.NdJ("viewEvent",function(){t.CHM(l);const n=t.oxw().$implicit,s=t.oxw();return t.KtG(s.view(n))}),t.qZA(),t.YNc(2,kt,1,1,"app-edit-action-icon",37),t.YNc(3,jt,1,1,"app-delete-action-icon",38),t.BQk()}if(2&a){const l=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("item",l),t.xp6(1),t.Q6J("ngIf",e.allowEdit),t.xp6(1),t.Q6J("ngIf",e.allowDelete)}}function Xt(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"app-add-action-icon",41),t.NdJ("addEvent",function(){t.CHM(l);const n=t.oxw().$implicit,s=t.oxw();return t.KtG(s.add(n))}),t._uU(1,"add"),t.qZA()}if(2&a){const l=t.oxw().$implicit;t.Q6J("item",l)}}function Vt(a,i){if(1&a&&(t.TgZ(0,"td",34),t.YNc(1,$t,4,3,"ng-container",31),t.YNc(2,Xt,2,1,"app-add-action-icon",35),t.qZA()),2&a){const l=i.$implicit;t.xp6(1),t.Q6J("ngIf",null!=l.id),t.xp6(1),t.Q6J("ngIf",null==l.id)}}function zt(a,i){1&a&&t._UZ(0,"tr",42)}function te(a,i){1&a&&t._UZ(0,"tr",43)}const ee=function(){return[10,20,50]};let ae=(()=>{const i=class{constructor(e,n){this.menuRoleService=e,this.dialog=n,this.moreEvent=new w.x,this.addEvent=new w.x,this.editEvent=new w.x,this.deleteEvent=new w.x,this.displayedColumns=["name","code","company","group","effectiveFrom","salaryPeriod","weeklyOffDays","total","manage"],this.baseUrl=(0,v.S)(),this.allowEdit=!1,this.allowDelete=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(p.w.Payroll,_.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(p.w.Payroll,_.k.delete)}ngOnChanges(e){this.salaryList.paginator=this.paginator}ngAfterViewInit(){this.salaryList.paginator=this.paginator}more(){this.moreEvent.next(!0)}add(e){this.dialog.open(et,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(s=>{1==s&&this.addEvent.next()})}edit(e){this.dialog.open(vt,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(s=>{1==s&&this.editEvent.next()})}view(e){this.dialog.open(ct,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(s=>{})}delete(e){this.deleteEvent.next(e)}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(y.K),t.Y36(C.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-salary-list"]],viewQuery:function(n,s){if(1&n&&t.Gf(Lt,5),2&n){let h;t.iGM(h=t.CRH())&&(s.paginator=h.first)}},inputs:{salaryList:"salaryList",count:"count"},outputs:{moreEvent:"moreEvent",addEvent:"addEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[t.TTD],decls:36,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","company"],["matColumnDef","group"],["matColumnDef","effectiveFrom"],["matColumnDef","salaryPeriod"],["matColumnDef","weeklyOffDays"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","manage"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"item","addEvent",4,"ngIf"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","deleteEvent"],[3,"item","addEvent"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,Zt,2,0,"th",3),t.YNc(4,At,4,3,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,St,2,0,"th",3),t.YNc(7,wt,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,Ot,2,0,"th",3),t.YNc(10,bt,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,Ut,2,0,"th",3),t.YNc(13,Mt,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,Pt,2,0,"th",3),t.YNc(16,Ft,2,1,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,Nt,2,0,"th",3),t.YNc(19,Jt,2,1,"td",4),t.BQk(),t.ynx(20,10),t.YNc(21,Rt,2,0,"th",11),t.YNc(22,Kt,3,2,"td",12),t.BQk(),t.ynx(23,13),t.YNc(24,Qt,2,0,"th",11),t.YNc(25,Wt,3,2,"td",12),t.BQk(),t.ynx(26,14),t.YNc(27,Gt,1,0,"th",11),t.YNc(28,Vt,3,2,"td",15),t.BQk(),t.YNc(29,zt,1,0,"tr",16),t.YNc(30,te,1,0,"tr",17),t.qZA(),t._UZ(31,"mat-paginator",18,19),t.qZA(),t.TgZ(33,"div",20)(34,"div",21)(35,"app-server-pagination",22),t.NdJ("loadMore",function(){return s.more()}),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("dataSource",s.salaryList),t.xp6(28),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,ee)),t.xp6(4),t.Q6J("loaded",s.salaryList.data.length)("count",s.count))},dependencies:[f.O5,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,Et.NW,xt.H,P.b,Tt.p,Ct.R,F.E]}),a})();function ne(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"app-salary-search-filter",2),t.NdJ("onSearchChange",function(n){t.CHM(l);const s=t.oxw();return t.KtG(s.changeSearchData(n))})("onSearch",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.getList())}),t.qZA()}if(2&a){const l=t.oxw();t.Q6J("searchData",l.searchData)}}function ie(a,i){if(1&a){const l=t.EpF();t.TgZ(0,"app-salary-list",3),t.NdJ("moreEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.getList())})("addEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.addSalary())})("editEvent",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.editSalary())})("deleteEvent",function(n){t.CHM(l);const s=t.oxw();return t.KtG(s.deleteSalary(n))}),t.qZA()}if(2&a){const l=t.oxw();t.Q6J("salaryList",l.dataSource)("count",l.count)}}const oe=[{path:"salary",component:(()=>{const i=class{constructor(e,n,s,h){this.menuRoleService=e,this.salaryService=n,this.employeeService=s,this.dialog=h,this.isLoaded=!1,this.req=new u.p,this.eList=[],this.count=0,this.allowAdd=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeService.getEmployeeSearchData().pipe((0,E.w)(e=>(this.searchData=e.item,this.isLoaded=!0,this.dataSource=new g.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(p.w.People,_.k.add),this.salaryService.getSalaryList(this.req)))).subscribe(e=>{this.update(e)})}ngAfterViewInit(){}changeSearchData(e){console.log(e),this.eList=[],this.dataSource=new g.by(this.eList),this.req.searchKey=e.searchKey,this.req.companyId=""!=e.companyId?e.companyId:null,this.req.groupId=""!=e.groupId?e.groupId:null,this.req.countryId=""!=e.countryId?e.countryId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new g.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(e){e?.response?.status==d.s.success&&(this.eList.push.apply(this.eList,e.list),this.dataSource=new g.by(this.eList),this.count=e.totalRecords,e.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.salaryService.getSalaryList(this.req).subscribe(e=>{this.update(e)})}addSalary(){this.refreshList()}editSalary(){this.refreshList()}deleteSalary(e){confirm(m.J.confirmDelete(e.employee.name+" salary"))&&(this.sub=this.salaryService.deleteSalary(e.id).subscribe(n=>{n?.status==d.s.success?this.refreshList():alert(n?.message)}))}ngOnDestroy(){this.sub?.unsubscribe()}};let a=i;return i.\u0275fac=function(n){return new(n||i)(t.Y36(y.K),t.Y36(I),t.Y36(S.G),t.Y36(C.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-salary"]],decls:2,vars:2,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent"]],template:function(n,s){1&n&&(t.YNc(0,ne,1,1,"app-salary-search-filter",0),t.YNc(1,ie,1,2,"app-salary-list",1)),2&n&&(t.Q6J("ngIf",s.isLoaded),t.xp6(1),t.Q6J("ngIf",s.isLoaded))},dependencies:[f.O5,H,ae]}),a})()}];let re=(()=>{const i=class{};let a=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[r.Bz.forChild(oe)]}),a})();var le=o(529),se=o(3214),ce=o(1260);let de=(()=>{const i=class{};let a=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez,re,c.u5,c.UX,le.JF,se._,ce.m,r.Bz]}),a})()},1234:(L,x,o)=>{o.d(x,{E:()=>u});var f=o(7579),r=o(4650),g=o(4859),E=o(7392);let u=(()=>{const m=class{constructor(){this.addEvent=new f.x}addItem(){this.addEvent.next(this.item)}};let p=m;return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-add-action-icon"]],inputs:{item:"item"},outputs:{addEvent:"addEvent"},decls:3,vars:0,consts:[["type","button","mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(t,y){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return y.addItem()}),r.TgZ(1,"mat-icon"),r._uU(2,"add"),r.qZA()())},dependencies:[g.nh,E.Hw]}),p})()},2833:(L,x,o)=>{o.d(x,{L:()=>E});var f=o(7579),r=o(4650),g=o(4859);let E=(()=>{const p=class{constructor(){this.disabled=!1,this.addEvent=new f.x}addItem(){this.addEvent.next()}};let u=p;return p.\u0275fac=function(d){return new(d||p)},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-crud-add-button"]],inputs:{disabled:"disabled"},outputs:{addEvent:"addEvent"},decls:2,vars:1,consts:[["type","submit","mat-raised-button","","color","primary",1,"col-12","my-2",3,"disabled","click"]],template:function(d,t){1&d&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return t.addItem()}),r._uU(1,"Add"),r.qZA()),2&d&&r.Q6J("disabled",t.disabled)},dependencies:[g.lW]}),u})()},7786:(L,x,o)=>{o.d(x,{W:()=>E});var f=o(7579),r=o(4650),g=o(4859);let E=(()=>{const p=class{constructor(){this.disabled=!1,this.editEvent=new f.x}editItem(){this.editEvent.next()}};let u=p;return p.\u0275fac=function(d){return new(d||p)},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-crud-edit-button"]],inputs:{disabled:"disabled"},outputs:{editEvent:"editEvent"},decls:2,vars:1,consts:[["type","submit","mat-raised-button","","color","primary",1,"col-12","my-2",3,"disabled","click"]],template:function(d,t){1&d&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return t.editItem()}),r._uU(1,"Edit"),r.qZA()),2&d&&r.Q6J("disabled",t.disabled)},dependencies:[g.lW]}),u})()},4682:(L,x,o)=>{o.d(x,{X:()=>m});var f=o(7579),r=o(4650),g=o(6895),E=o(4859);function u(_,d){if(1&_){const t=r.EpF();r.TgZ(0,"button",2),r.NdJ("click",function(){r.CHM(t);const v=r.oxw();return r.KtG(v.resetItem())}),r._uU(1,"Reset"),r.qZA()}}function p(_,d){if(1&_){const t=r.EpF();r.TgZ(0,"button",3),r.NdJ("click",function(){r.CHM(t);const v=r.oxw();return r.KtG(v.resetItem())}),r._uU(1,"Reset"),r.qZA()}}let m=(()=>{const d=class{constructor(){this.resetEvent=new f.x,this.isReset=!0}resetItem(){this.resetEvent.next()}};let _=d;return d.\u0275fac=function(v){return new(v||d)},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-crud-reset-button"]],inputs:{isReset:"isReset"},outputs:{resetEvent:"resetEvent"},decls:2,vars:2,consts:[["type","reset","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","button","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","reset","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"],["type","button","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"]],template:function(v,Z){1&v&&(r.YNc(0,u,2,0,"button",0),r.YNc(1,p,2,0,"button",1)),2&v&&(r.Q6J("ngIf",Z.isReset),r.xp6(1),r.Q6J("ngIf",!Z.isReset))},dependencies:[g.O5,E.lW]}),_})()},1837:(L,x,o)=>{o.d(x,{b:()=>u});var f=o(7579),r=o(4650),g=o(4859),E=o(7392);let u=(()=>{const m=class{constructor(){this.deleteEvent=new f.x}deleteItem(){this.deleteEvent.next(this.item)}};let p=m;return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-delete-action-icon"]],inputs:{item:"item"},outputs:{deleteEvent:"deleteEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","warn",1,"ms-1",3,"click"]],template:function(t,y){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return y.deleteItem()}),r.TgZ(1,"mat-icon"),r._uU(2,"delete"),r.qZA()())},dependencies:[g.nh,E.Hw]}),p})()},1763:(L,x,o)=>{o.d(x,{p:()=>u});var f=o(7579),r=o(4650),g=o(4859),E=o(7392);let u=(()=>{const m=class{constructor(){this.editEvent=new f.x}editItem(){this.editEvent.next(this.item)}};let p=m;return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-edit-action-icon"]],inputs:{item:"item"},outputs:{editEvent:"editEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(t,y){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return y.editItem()}),r.TgZ(1,"mat-icon"),r._uU(2,"edit"),r.qZA()())},dependencies:[g.nh,E.Hw]}),p})()},2043:(L,x,o)=>{o.d(x,{H:()=>g});var f=o(4650);const r=["*"];let g=(()=>{const u=class{};let E=u;return u.\u0275fac=function(_){return new(_||u)},u.\u0275cmp=f.Xpm({type:u,selectors:[["app-form-heading"]],ngContentSelectors:r,decls:3,vars:0,consts:[[1,"text-center","bg-primary","text-light","py-3"],[1,"fw-normal"]],template:function(_,d){1&_&&(f.F$t(),f.TgZ(0,"div",0)(1,"h5",1),f.Hsn(2),f.qZA()())}}),E})()},7268:(L,x,o)=>{o.d(x,{R:()=>u});var f=o(7579),r=o(4650),g=o(4859),E=o(7392);let u=(()=>{const m=class{constructor(){this.viewEvent=new f.x}viewItem(){this.viewEvent.next(this.item)}};let p=m;return m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-view-action-icon"]],inputs:{item:"item"},outputs:{viewEvent:"viewEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(t,y){1&t&&(r.TgZ(0,"button",0),r.NdJ("click",function(){return y.viewItem()}),r.TgZ(1,"mat-icon"),r._uU(2,"visibility"),r.qZA()())},dependencies:[g.nh,E.Hw]}),p})()},3214:(L,x,o)=>{o.d(x,{_:()=>I});var f=o(4859),r=o(5412),g=o(9549),E=o(7392),u=o(4144),p=o(7974),m=o(4385),_=o(455),d=o(7155),t=o(9602),y=o(3238),v=o(2673),Z=o(4650);let I=(()=>{const C=class{};let S=C;return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=Z.oAB({type:C}),C.\u0275inj=Z.cJS({imports:[d.p0,p.TU,g.lN,u.c,f.ot,E.Ps,r.Is,m.LD,_.rP,t.FA,y.XK,v.g]}),S})()},4521:(L,x,o)=>{o.d(x,{H:()=>_});var f=o(7579),r=o(4650),g=o(6895),E=o(4859);function u(d,t){if(1&d&&(r.TgZ(0,"label",5)(1,"span",6),r._uU(2),r.qZA(),r.TgZ(3,"span",7),r._uU(4," of "),r.qZA(),r.TgZ(5,"span",6),r._uU(6),r.qZA()()),2&d){const y=r.oxw(2);r.xp6(1),r.Q6J("ngClass",y.loaded!=y.count?"page-data":"page-data-full"),r.xp6(1),r.Oqu(y.loaded),r.xp6(3),r.Q6J("ngClass",y.loaded!=y.count?"page-data":"page-data-full"),r.xp6(1),r.Oqu(y.count)}}function p(d,t){if(1&d){const y=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){r.CHM(y);const Z=r.oxw(2);return r.KtG(Z.more())}),r._uU(1,"More ..."),r.qZA()}}function m(d,t){if(1&d&&(r.TgZ(0,"div",1),r.YNc(1,u,7,4,"label",2),r.TgZ(2,"div",3),r.YNc(3,p,2,0,"button",4),r.qZA()()),2&d){const y=r.oxw();r.xp6(1),r.Q6J("ngIf",y.loaded!=y.count),r.xp6(2),r.Q6J("ngIf",y.loaded!=y.count)}}let _=(()=>{const t=class{constructor(){this.loadMore=new f.x}more(){this.loadMore.next(!0)}};let d=t;return t.\u0275fac=function(Z){return new(Z||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-server-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["class","col-4 mx-2",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],[1,"col-4","mx-2"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(Z,I){1&Z&&r.YNc(0,m,4,2,"div",0),2&Z&&r.Q6J("ngIf",I.loaded>0)},dependencies:[g.mk,g.O5,E.lW],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]}),d})()},1260:(L,x,o)=>{o.d(x,{m:()=>t});var f=o(6895),r=o(4006),g=o(4859),E=o(9549),u=o(4144),p=o(7392),m=o(9602),_=o(3238),d=o(4650);let t=(()=>{const v=class{};let y=v;return v.\u0275fac=function(S){return new(S||v)},v.\u0275mod=d.oAB({type:v}),v.\u0275inj=d.cJS({imports:[f.ez,r.u5,r.UX,E.lN,g.ot,p.Ps,u.c,m.FA,_.XK]}),y})()},5332:(L,x,o)=>{o.d(x,{G:()=>E});var f=o(9057),r=o(4650),g=o(5);let E=(()=>{const p=class{constructor(_){this.http=_}getEmployeeList(_){return this.http.post(f.b.getEmployeeList,_)}getEmployeeListByCompany(_){let d=f.b.getEmployeeListByCompany;return d=d.replace(/{companyId}/gi,_),this.http.get(d)}getEmployeeSearchData(){return this.http.get(f.b.getEmployeeSearchData)}getEmployeeById(_){let d=f.b.getEmployeeById;return d=d.replace(/{id}/gi,_),this.http.get(d)}getEmployeeManageData(){return this.http.get(f.b.getEmployeeManageData)}addEmployee(_){return this.http.post(f.b.addEmployee,_)}addEmployeeDoc(_){return this.http.post(f.b.addEmployeeDoc,_)}editEmployee(_){return this.http.post(f.b.editEmployee,_)}exportEmployeeDoc(_){let d=f.b.exportEmployeeDoc;return d=d.replace(/{id}/gi,_),this.http.postAttachment(d,null)}deleteEmployee(_){let d=f.b.deleteEmployee;return d=d.replace(/{id}/gi,_),this.http.post(d,null)}importEmployee(_){return this.http.post(f.b.importEmployee,_)}verifyEmployee(_){return this.http.post(f.b.verifyEmployee,_)}};let u=p;return p.\u0275fac=function(d){return new(d||p)(r.LFG(g.o))},p.\u0275prov=r.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),u})()},5659:(L,x,o)=>{o.d(x,{R:()=>g});var f=o(4650),r=o(6895);let g=(()=>{const u=class{constructor(m){this.pipe=m}formatToRequest(m){return this.pipe.transform(m,"yyyy-MM-dd")}formatToRequestDatetime(m){return this.pipe.transform(m,"yyyy-MM-ddTHH:mm:ss")}formatToMonth(m){return this.pipe.transform(m,"yyyy-MMM")}responseFormatToDate(m){return new Date(m)}responseFormatToRequest(m){return this.formatToRequest(this.responseFormatToDate(m))}totalMonth(m,_){return _.getMonth()-m.getMonth()+12*(_.getFullYear()-m.getFullYear())}nextDay(m){return new Date(m.setDate(m.getDate()+1))}prevDay(m){return new Date(m.setDate(m.getDate()-1))}get Today(){var m=new Date;return new Date(m.getFullYear(),m.getMonth(),m.getDate())}get Tomorrow(){var m=new Date;return new Date(m.setDate(m.getDate()+1))}get Yesterday(){var m=new Date;return new Date(m.setDate(m.getDate()-1))}get NextYear(){return new Date((new Date).getFullYear()+1,0,1)}};let E=u;return u.\u0275fac=function(_){return new(_||u)(f.LFG(r.uU))},u.\u0275prov=f.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),E})()}}]);