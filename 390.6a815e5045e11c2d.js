"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[390],{3390:(he,q,m)=>{m.r(q),m.d(q,{PayrollModule:()=>_e});var _=m(6895),E=m(1635),p=m(7155),C=m(3900),Y=m(9167),y=m(9172),v=m(5311),x=m(1654),Z=m(673),t=m(4650),U=m(1219),d=m(9057),Q=m(5);let S=(()=>{const n=class{constructor(e){this.http=e}getSalaryList(e){let i=d.lp.searchList(d.hh.Salary);return this.http.post(i,e)}getSalary(e){let i=d.lp.getByIdUrl(d.hh.Salary);return i=i.replace(/{id}/gi,e),this.http.get(i)}getSalaryManageData(){let e=d.lp.getManageData(d.hh.Salary);return this.http.get(e)}addSalary(e){let i=d.lp.add(d.hh.Salary);return this.http.post(i,e)}editSalary(e){let i=d.lp.edit(d.hh.Salary);return this.http.post(i,e)}deleteSalary(e){let i=d.lp.deleteById(d.hh.Salary);return i=i.replace(/{id}/gi,e),this.http.post(i,null)}importSalary(e){let i=d.lp.import(d.hh.Salary);return this.http.post(i,e)}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.LFG(Q.o))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var O=m(5332),u=m(5412),H=m(3667),R=m(7770),l=m(4006),h=m(7579),f=m(9549),w=m(4144),G=m(4859),L=m(4385),T=m(3238);function P(a,n){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function M(a,n){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function k(a,n){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}let $=(()=>{const n=class{constructor(){this.onSearchChange=new h.x,this.onSearch=new h.x}ngOnInit(){this.filterForm=new l.cw({searchKey:new l.NI(""),companyId:new l.NI(""),groupId:new l.NI(""),countryId:new l.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(e=>{this.onSearchChange.next(e)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",groupId:"",countryId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let a=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","countryId"],["formControlName","groupId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(i,r){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.search()}),t.TgZ(1,"div",1)(2,"button",2),t.NdJ("click",function(){return r.resetFilter()}),t._uU(3,"Reset"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Company"),t.qZA(),t.TgZ(7,"mat-select",4)(8,"mat-option",5),t._uU(9,"All"),t.qZA(),t.YNc(10,P,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Nationality"),t.qZA(),t.TgZ(14,"mat-select",8)(15,"mat-option",5),t._uU(16,"All"),t.qZA(),t.YNc(17,M,2,2,"mat-option",6),t.qZA()(),t.TgZ(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Profession"),t.qZA(),t.TgZ(21,"mat-select",9)(22,"mat-option",5),t._uU(23,"All"),t.qZA(),t.YNc(24,k,2,2,"mat-option",6),t.qZA()(),t.TgZ(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Search"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.TgZ(29,"div",12)(30,"button",13)(31,"i",14),t._uU(32,"search"),t.qZA(),t._uU(33," Search"),t.qZA()()()()),2&i&&(t.Q6J("formGroup",r.filterForm),t.xp6(10),t.Q6J("ngForOf",r.searchData.companyList),t.xp6(7),t.Q6J("ngForOf",r.searchData.countryList),t.xp6(7),t.Q6J("ngForOf",r.searchData.groupList))},dependencies:[_.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.KE,f.hX,w.Nt,G.lW,L.gD,T.ey]}),a})();class K{}class J{}var I=m(5659),g=m(9602),j=m(2833),D=m(4682),A=m(1837),N=m(1234),b=m(2043);function V(a,n){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," Add Salary\n"),t.qZA())}function B(a,n){1&a&&t._UZ(0,"img",33)}function X(a,n){if(1&a&&t._UZ(0,"img",34),2&a){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function z(a,n){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function W(a,n){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function tt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(i){const s=t.CHM(o).index,c=t.oxw(2);return t.KtG(c.onPayHeadChange(i,s))}),t.YNc(6,W,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const r=t.CHM(o).index,s=t.oxw(2);return t.KtG(s.deleteSalaryLine(r))}),t.qZA()()()()}if(2&a){const o=n.$implicit,e=n.index,i=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(6),t.Q6J("ngForOf",i.manageData.payHeadList),t.xp6(6),t.Q6J("item",o)}}function et(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalary())}),t.TgZ(2,"div",4),t.YNc(3,B,1,0,"img",5),t.YNc(4,X,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,z,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,tt,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.reset())}),t.qZA(),t._UZ(50,"app-crud-add-button",32),t.qZA()()()}if(2&a){const o=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls),t.xp6(3),t.Q6J("disabled",e.isProcessing)}}let at=(()=>{const n=class{constructor(e,i,r,s){this.dialogRef=e,this.salaryService=i,this.ds=r,this.data=s,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,d.SV)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI(new Date,[l.kI.required]),salaryPeriod:new l.NI("Months",[l.kI.required]),weeklyOffDays:new l.NI(0,[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(e=>{this.manageData=e.item,this.isLoaded=!0,this.addDefaultSalaryLine("Basic Salary"),this.addDefaultSalaryLine("Allowance")})}addDefaultSalaryLine(e){let i=this.manageData.payHeadList.find(r=>r.name==e)?.id;this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(i,l.kI.required),rate:new l.NI(null,l.kI.required)}))}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(null,l.kI.required),rate:new l.NI(null,l.kI.required)}))}deleteSalaryLine(e){this.manageForm.get("salaryLineList").removeAt(e),this.onRateChange()}onPayHeadChange(e,i){this.manageForm.get("salaryLineList").at(i).patchValue({rate:null})}onRateChange(){let e=0;this.manageForm.value.salaryLineList.forEach(i=>{e+=i.rate??0}),this.total=e}addSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(v.J.areYouSureTo))return;let e=new K;e.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),e.salaryPeriod=this.manageForm.value.salaryPeriod,e.weeklyOffDays=this.manageForm.value.weeklyOffDays,e.employeeId=this.data.employee.id,e.salaryLineList=[],this.manageForm.value.salaryLineList.forEach(r=>{let s=new J;s.payHeadId=r.payHeadId,s.rate=r.rate,e.salaryLineList.push(s)});let i=this.validateSalaryLine();""==i?(this.isProcessing=!0,this.sub=this.salaryService.addSalary(e).subscribe(r=>{if(this.isProcessing=!1,r?.status!=Z.s.success)return this.isProcessing=!1,void alert(r?.message);this.reset(),this.closeDialog()})):alert(`Error : ${i}`)}validateSalaryLine(){let e=[],i="",r=0;if(this.manageForm.value.salaryLineList.forEach(c=>{r++,e.findIndex(F=>F.key.payHeadId==c.payHeadId)>=0?i=c.payHeadId:e.push({key:{payHeadId:c.payHeadId},value:1})}),""!=i){var s=this.manageData.payHeadList.find(c=>c.id==i)?.name;return`Duplicate line ${s} found`}return 0==r?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.so),t.Y36(S),t.Y36(I.R),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,V,2,0,"app-form-heading",0),t.YNc(1,et,51,13,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[_.sg,_.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,f.KE,f.hX,f.R9,w.Nt,u.xY,L.gD,T.ey,g.Mq,g.hl,g.nW,j.L,D.X,A.b,N.E,b.H]}),a})();function it(a,n){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," View Salary\n"),t.qZA())}function nt(a,n){1&a&&t._UZ(0,"img",30)}function ot(a,n){if(1&a&&t._UZ(0,"img",31),2&a){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function rt(a,n){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function lt(a,n){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function st(a,n){if(1&a&&(t.TgZ(0,"div",33)(1,"div",14)(2,"mat-form-field",34)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",35),t.YNc(6,lt,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t._UZ(10,"input",36),t.qZA()()()),2&a){const o=n.index,e=t.oxw(2);t.Q6J("formGroupName",o),t.xp6(6),t.Q6J("ngForOf",e.manageData.payHeadList)}}function mt(a,n){if(1&a&&(t.TgZ(0,"div",2)(1,"form",3)(2,"div",4),t.YNc(3,nt,1,0,"img",5),t.YNc(4,ot,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,rt,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",27)(42,"h4"),t._uU(43),t.qZA()()(),t.TgZ(44,"div",28),t.YNc(45,st,11,2,"div",29),t.qZA()()()()()()),2&a){const o=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(14),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls)}}let ct=(()=>{const n=class{constructor(e,i,r,s){this.dialogRef=e,this.salaryService=i,this.ds=r,this.data=s,this.isLoaded=!1,this.total=0,this.baseUrl=(0,d.SV)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI({value:null,disabled:!0},[l.kI.required]),salaryPeriod:new l.NI({value:null,disabled:!0},[l.kI.required]),weeklyOffDays:new l.NI({value:null,disabled:!0},[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,C.w)(e=>(this.manageData=e.item,this.salaryService.getSalary(this.data.id)))).subscribe(e=>{let i=e.item;this.isLoaded=!0;let r=null!=i.effectiveFrom?this.ds.responseFormatToDate(i.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:r,salaryPeriod:i.salaryPeriod,weeklyOffDays:i.weeklyOffDays});let s=0;i.salaryLineList.forEach(c=>{s+=c.rate??0,this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI({value:c.payHead.id,disabled:!0}),rate:new l.NI({value:c.rate,disabled:!0})}))}),this.total=s})}ngOnDestroy(){this.sub?.unsubscribe()}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.so),t.Y36(S),t.Y36(I.R),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[1,"col-10","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId"],["type","number","matInput","","formControlName","rate"]],template:function(i,r){1&i&&(t.YNc(0,it,2,0,"app-form-heading",0),t.YNc(1,mt,46,12,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[_.sg,_.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,f.KE,f.hX,f.R9,w.Nt,u.xY,L.gD,T.ey,g.Mq,g.hl,g.nW,b.H]}),a})();class dt{}var pt=m(7786);function ut(a,n){1&a&&(t.TgZ(0,"app-form-heading"),t._uU(1," Edit Salary\n"),t.qZA())}function ft(a,n){1&a&&t._UZ(0,"img",33)}function _t(a,n){if(1&a&&t._UZ(0,"img",34),2&a){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function gt(a,n){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function ht(a,n){if(1&a&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function yt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(i){const s=t.CHM(o).index,c=t.oxw(2);return t.KtG(c.onPayHeadChange(i,s))}),t.YNc(6,ht,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const r=t.CHM(o).index,s=t.oxw(2);return t.KtG(s.deleteSalaryLine(r))}),t.qZA()()()()}if(2&a){const o=n.$implicit,e=n.index,i=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(6),t.Q6J("ngForOf",i.manageData.payHeadList),t.xp6(6),t.Q6J("item",o)}}function vt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editSalary())}),t.TgZ(2,"div",4),t.YNc(3,ft,1,0,"img",5),t.YNc(4,_t,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,gt,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,yt,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.reset())}),t.qZA(),t._UZ(50,"app-crud-edit-button",32),t.qZA()()()}if(2&a){const o=t.MAs(24),e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.manageForm),t.xp6(2),t.Q6J("ngIf",null==e.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=e.data.employee.profileUrl),t.xp6(5),t.Oqu(e.data.employee.name),t.xp6(2),t.hij(" ",e.data.employee.code," "),t.xp6(3),t.Oqu(e.data.employee.workingCompany),t.xp6(2),t.Oqu(e.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",e.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",e.total,""),t.xp6(2),t.Q6J("ngForOf",e.salaryLineListControls),t.xp6(3),t.Q6J("disabled",e.isProcessing)}}let xt=(()=>{const n=class{constructor(e,i,r,s){this.dialogRef=e,this.salaryService=i,this.ds=r,this.data=s,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,d.SV)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI(null,[l.kI.required]),salaryPeriod:new l.NI(null,[l.kI.required]),weeklyOffDays:new l.NI(null,[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,C.w)(e=>(this.manageData=e.item,this.salaryService.getSalary(this.data.id)))).subscribe(e=>{let i=e.item;this.isLoaded=!0;let r=null!=i.effectiveFrom?this.ds.responseFormatToDate(i.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:r,salaryPeriod:i.salaryPeriod,weeklyOffDays:i.weeklyOffDays});let s=0;i.salaryLineList.forEach(c=>{s+=c.rate??0,this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI({value:c.payHead.id,disabled:!0}),rate:new l.NI({value:c.rate,disabled:!1})}))}),this.total=s})}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(null,l.kI.required),rate:new l.NI(null,l.kI.required)}))}deleteSalaryLine(e){this.manageForm.get("salaryLineList").removeAt(e),this.onRateChange()}onPayHeadChange(e,i){this.manageForm.get("salaryLineList").at(i).patchValue({rate:null})}onRateChange(){let e=0;this.manageForm.value.salaryLineList.forEach(i=>{e+=i.rate??0}),this.total=e}editSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(v.J.areYouSureTo))return;let e=new dt;e.id=this.data.id,e.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),e.salaryPeriod=this.manageForm.value.salaryPeriod,e.weeklyOffDays=this.manageForm.value.weeklyOffDays,e.employeeId=this.data.employee.id,e.salaryLineList=[],this.manageForm.get("salaryLineList").controls.forEach(r=>{console.log(r);let s=new J;s.payHeadId=r.getRawValue().payHeadId,s.rate=r.getRawValue().rate,e.salaryLineList.push(s)});let i=this.validateSalaryLine();""==i?(this.isProcessing=!0,this.sub=this.salaryService.editSalary(e).subscribe(r=>{if(this.isProcessing=!1,r?.status!=Z.s.success)return this.isProcessing=!1,void alert(r?.message);this.reset(),this.closeDialog()})):alert(`Error : ${i}`)}validateSalaryLine(){let e=[],i="",r=0;if(this.manageForm.get("salaryLineList").controls.forEach(c=>{r++,e.findIndex(F=>F.key.payHeadId==c.getRawValue().payHeadId)>=0?i=c.getRawValue().payHeadId:e.push({key:{payHeadId:c.getRawValue().payHeadId},value:1})}),""!=i){var s=this.manageData.payHeadList.find(c=>c.id==i)?.name;return`Duplicate line ${s} found`}return 0==r?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.so),t.Y36(S),t.Y36(I.R),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,ut,2,0,"app-form-heading",0),t.YNc(1,vt,51,13,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[_.sg,_.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,f.KE,f.hX,f.R9,w.Nt,u.xY,L.gD,T.ey,g.Mq,g.hl,g.nW,pt.W,D.X,A.b,N.E,b.H]}),a})();var Zt=m(7974),St=m(4521),wt=m(1763),Lt=m(7268);const Tt=["page"];function Ct(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," Name "),t.qZA())}function It(a,n){1&a&&t._UZ(0,"img",27)}function At(a,n){if(1&a&&t._UZ(0,"img",28),2&a){const o=t.oxw().$implicit,e=t.oxw();t.hYB("src","",e.baseUrl,"/profile/",o.employee.profileUrl,"",t.LSH)}}function Nt(a,n){if(1&a&&(t.TgZ(0,"td",24),t.YNc(1,It,1,0,"img",25),t.YNc(2,At,1,2,"img",26),t._uU(3),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null==o.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=o.employee.profileUrl),t.xp6(1),t.hij(" ",o.employee.name," ")}}function bt(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," Code "),t.qZA())}function Ft(a,n){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.code," ")}}function qt(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," Working Company "),t.qZA())}function Et(a,n){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.workingCompany," ")}}function Ut(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," Profession "),t.qZA())}function Jt(a,n){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.group," ")}}function Dt(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," From "),t.qZA())}function Yt(a,n){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.hij(" ",o.effectiveFrom," ")}}function Qt(a,n){1&a&&(t.TgZ(0,"th",23),t._uU(1," Period "),t.qZA())}function Ot(a,n){if(1&a&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.hij(" ",o.salaryPeriod," ")}}function Ht(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1," Off Days "),t.qZA())}function Rt(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.weeklyOffDays)}}function Gt(a,n){1&a&&(t.TgZ(0,"span"),t._uU(1,"-"),t.qZA())}function Pt(a,n){if(1&a&&(t.TgZ(0,"td",30),t.YNc(1,Rt,2,1,"span",31),t.YNc(2,Gt,2,0,"span",31),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function Mt(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1," Salary "),t.qZA())}function kt(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.total)}}function $t(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Not Set"),t.qZA())}function Kt(a,n){if(1&a&&(t.TgZ(0,"td",30),t.YNc(1,kt,2,1,"span",31),t.YNc(2,$t,2,0,"span",32),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function jt(a,n){1&a&&t._UZ(0,"th",29)}function Vt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-edit-action-icon",39),t.NdJ("editEvent",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.edit(i))}),t.qZA()}if(2&a){const o=t.oxw(2).$implicit;t.Q6J("item",o)}}function Bt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-delete-action-icon",40),t.NdJ("deleteEvent",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.delete(i))}),t.qZA()}if(2&a){const o=t.oxw(2).$implicit;t.Q6J("item",o)}}function Xt(a,n){if(1&a){const o=t.EpF();t.ynx(0),t.TgZ(1,"app-view-action-icon",36),t.NdJ("viewEvent",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.view(i))}),t.qZA(),t.YNc(2,Vt,1,1,"app-edit-action-icon",37),t.YNc(3,Bt,1,1,"app-delete-action-icon",38),t.BQk()}if(2&a){const o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("item",o),t.xp6(1),t.Q6J("ngIf",e.allowEdit),t.xp6(1),t.Q6J("ngIf",e.allowDelete)}}function zt(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-add-action-icon",41),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.add(i))}),t._uU(1,"add"),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.Q6J("item",o)}}function Wt(a,n){if(1&a&&(t.TgZ(0,"td",34),t.YNc(1,Xt,4,3,"ng-container",31),t.YNc(2,zt,2,1,"app-add-action-icon",35),t.qZA()),2&a){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function te(a,n){1&a&&t._UZ(0,"tr",42)}function ee(a,n){1&a&&t._UZ(0,"tr",43)}const ae=function(){return[10,20,50]};let ie=(()=>{const n=class{constructor(e,i){this.menuRoleService=e,this.dialog=i,this.moreEvent=new h.x,this.addEvent=new h.x,this.editEvent=new h.x,this.deleteEvent=new h.x,this.displayedColumns=["name","code","company","group","effectiveFrom","salaryPeriod","weeklyOffDays","total","manage"],this.baseUrl=(0,d.SV)(),this.allowEdit=!1,this.allowDelete=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(y.w.Payroll,x.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(y.w.Payroll,x.k.delete)}ngOnChanges(e){this.salaryList.paginator=this.paginator}ngAfterViewInit(){this.salaryList.paginator=this.paginator}more(){this.moreEvent.next(!0)}add(e){this.dialog.open(at,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{1==r&&this.addEvent.next()})}edit(e){this.dialog.open(xt,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{1==r&&this.editEvent.next()})}view(e){this.dialog.open(ct,{data:e,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{})}delete(e){this.deleteEvent.next(e)}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(U.K),t.Y36(u.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary-list"]],viewQuery:function(i,r){if(1&i&&t.Gf(Tt,5),2&i){let s;t.iGM(s=t.CRH())&&(r.paginator=s.first)}},inputs:{salaryList:"salaryList",count:"count"},outputs:{moreEvent:"moreEvent",addEvent:"addEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[t.TTD],decls:36,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","company"],["matColumnDef","group"],["matColumnDef","effectiveFrom"],["matColumnDef","salaryPeriod"],["matColumnDef","weeklyOffDays"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","manage"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"item","addEvent",4,"ngIf"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","deleteEvent"],[3,"item","addEvent"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,Ct,2,0,"th",3),t.YNc(4,Nt,4,3,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,bt,2,0,"th",3),t.YNc(7,Ft,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,qt,2,0,"th",3),t.YNc(10,Et,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,Ut,2,0,"th",3),t.YNc(13,Jt,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,Dt,2,0,"th",3),t.YNc(16,Yt,2,1,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,Qt,2,0,"th",3),t.YNc(19,Ot,2,1,"td",4),t.BQk(),t.ynx(20,10),t.YNc(21,Ht,2,0,"th",11),t.YNc(22,Pt,3,2,"td",12),t.BQk(),t.ynx(23,13),t.YNc(24,Mt,2,0,"th",11),t.YNc(25,Kt,3,2,"td",12),t.BQk(),t.ynx(26,14),t.YNc(27,jt,1,0,"th",11),t.YNc(28,Wt,3,2,"td",15),t.BQk(),t.YNc(29,te,1,0,"tr",16),t.YNc(30,ee,1,0,"tr",17),t.qZA(),t._UZ(31,"mat-paginator",18,19),t.qZA(),t.TgZ(33,"div",20)(34,"div",21)(35,"app-server-pagination",22),t.NdJ("loadMore",function(){return r.more()}),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("dataSource",r.salaryList),t.xp6(28),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,ae)),t.xp6(4),t.Q6J("loaded",r.salaryList.data.length)("count",r.count))},dependencies:[_.O5,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,Zt.NW,St.H,A.b,wt.p,Lt.R,N.E]}),a})();const ne=["salaryImport"];function oe(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-salary-search-filter",3),t.NdJ("onSearchChange",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.changeSearchData(i))})("onSearch",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.getList())}),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("searchData",o.searchData)}}function re(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-import-button",8),t.NdJ("importEvent",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.importSalary())}),t.qZA()}}function le(a,n){1&a&&t._UZ(0,"input",9,10)}function se(a,n){if(1&a&&(t.TgZ(0,"div",4)(1,"app-table-heading",5),t._uU(2," Payroll "),t.qZA(),t.YNc(3,re,1,0,"app-import-button",6),t.YNc(4,le,2,0,"input",7),t.qZA()),2&a){const o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.allowImport),t.xp6(1),t.Q6J("ngIf",o.allowImport)}}function me(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"app-salary-list",11),t.NdJ("moreEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.getList())})("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalary())})("editEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editSalary())})("deleteEvent",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.deleteSalary(i))}),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("salaryList",o.dataSource)("count",o.count)}}const ce=[{path:"salary",component:(()=>{const n=class{constructor(e,i,r,s){this.menuRoleService=e,this.salaryService=i,this.employeeService=r,this.dialog=s,this.isLoaded=!1,this.req=new Y.p,this.eList=[],this.count=0,this.allowAdd=!1,this.allowImport=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeService.getEmployeeSearchData().pipe((0,C.w)(e=>(this.searchData=e.item,this.isLoaded=!0,this.dataSource=new p.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(y.w.Salary_Payroll,x.k.add),this.allowImport=this.menuRoleService.isMenuRoleAuthorizedSingle(y.w.Salary_Payroll,x.k.import),this.salaryService.getSalaryList(this.req)))).subscribe(e=>{this.update(e)})}ngAfterViewInit(){}changeSearchData(e){console.log(e),this.eList=[],this.dataSource=new p.by(this.eList),this.req.searchKey=e.searchKey,this.req.companyId=""!=e.companyId?e.companyId:null,this.req.groupId=""!=e.groupId?e.groupId:null,this.req.countryId=""!=e.countryId?e.countryId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new p.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(e){e?.response?.status==Z.s.success&&(this.eList.push.apply(this.eList,e.list),this.dataSource=new p.by(this.eList),this.count=e.totalRecords,e.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.salaryService.getSalaryList(this.req).subscribe(e=>{this.update(e)})}addSalary(){this.refreshList()}editSalary(){this.refreshList()}deleteSalary(e){confirm(v.J.confirmDelete(e.employee.name+" salary"))&&(this.sub=this.salaryService.deleteSalary(e.id).subscribe(i=>{i?.status==Z.s.success?this.refreshList():alert(i?.message)}))}importSalary(){const e=this.salaryImport.nativeElement;e.onchange=()=>{if(e.files&&e.files[0]){const i=e.files[0];if(!confirm(v.J.areYouSureTo))return void(e.value="");const r=new FormData;r.append("file",i),this.importSub=this.salaryService.importSalary(r).subscribe(s=>{alert(JSON.stringify(s)),this.refreshList(),e.value=""})}},e.click()}ngOnDestroy(){this.sub?.unsubscribe(),this.importSub?.unsubscribe()}};let a=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(U.K),t.Y36(S),t.Y36(O.G),t.Y36(u.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary"]],viewQuery:function(i,r){if(1&i&&t.Gf(ne,5),2&i){let s;t.iGM(s=t.CRH())&&(r.salaryImport=s.first)}},decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],[1,"col-6"],["class","col-1 offset-5",3,"importEvent",4,"ngIf"],["type","file","id","salaryImport","name","salaryImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","style","display: none;",4,"ngIf"],[1,"col-1","offset-5",3,"importEvent"],["type","file","id","salaryImport","name","salaryImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",2,"display","none"],["salaryImport",""],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,oe,1,1,"app-salary-search-filter",0),t.YNc(1,se,5,2,"div",1),t.YNc(2,me,1,2,"app-salary-list",2)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[_.O5,H.x,R.u,$,ie]}),a})()}];let de=(()=>{const n=class{};let a=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[E.Bz.forChild(ce)]}),a})();var pe=m(529),ue=m(3214),fe=m(1260);let _e=(()=>{const n=class{};let a=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,de,l.u5,l.UX,pe.JF,ue._,fe.m,E.Bz]}),a})()}}]);