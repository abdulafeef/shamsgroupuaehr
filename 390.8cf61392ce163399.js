"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[390],{3390:(N,S,s)=>{s.r(S),s.d(S,{PayrollModule:()=>pe});var p=s(6895),_=s(1635),f=s(7155),Z=s(3900),L=s(9167),g=s(9172),h=s(5311),m=s(1654),c=s(673),t=s(4650),C=s(1219),y=s(9057),Q=s(5);let E=(()=>{const n=class{constructor(a){this.http=a}getSalaryList(a){return this.http.post(y.b.getSalaryList,a)}getSalary(a){let i=y.b.getSalary;return i=i.replace(/{id}/gi,a),this.http.get(i)}getSalaryManageData(){return this.http.get(y.b.getSalaryManageData)}addSalary(a){return this.http.post(y.b.addSalary,a)}editSalary(a){return this.http.post(y.b.editSalary,a)}deleteSalary(a){let i=y.b.deleteSalary;return i=i.replace(/{id}/gi,a),this.http.post(i,null)}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.LFG(Q.o))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var H=s(5332),v=s(5412),P=s(7770),l=s(4006),w=s(7579),x=s(9549),I=s(4144),M=s(4859),A=s(4385),b=s(3238);function R(e,n){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function G(e,n){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function K(e,n){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}let k=(()=>{const n=class{constructor(){this.onSearchChange=new w.x,this.onSearch=new w.x}ngOnInit(){this.filterForm=new l.cw({searchKey:new l.NI(""),companyId:new l.NI(""),groupId:new l.NI(""),countryId:new l.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(a=>{this.onSearchChange.next(a)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",groupId:"",countryId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let e=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","countryId"],["formControlName","groupId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(i,r){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.search()}),t.TgZ(1,"div",1)(2,"button",2),t.NdJ("click",function(){return r.resetFilter()}),t._uU(3,"Reset"),t.qZA(),t.TgZ(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Company"),t.qZA(),t.TgZ(7,"mat-select",4)(8,"mat-option",5),t._uU(9,"All"),t.qZA(),t.YNc(10,R,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Nationality"),t.qZA(),t.TgZ(14,"mat-select",8)(15,"mat-option",5),t._uU(16,"All"),t.qZA(),t.YNc(17,G,2,2,"mat-option",6),t.qZA()(),t.TgZ(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Profession"),t.qZA(),t.TgZ(21,"mat-select",9)(22,"mat-option",5),t._uU(23,"All"),t.qZA(),t.YNc(24,K,2,2,"mat-option",6),t.qZA()(),t.TgZ(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Search"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.TgZ(29,"div",12)(30,"button",13)(31,"i",14),t._uU(32,"search"),t.qZA(),t._uU(33," Search"),t.qZA()()()()),2&i&&(t.Q6J("formGroup",r.filterForm),t.xp6(10),t.Q6J("ngForOf",r.searchData.companyList),t.xp6(7),t.Q6J("ngForOf",r.searchData.countryList),t.xp6(7),t.Q6J("ngForOf",r.searchData.groupList))},dependencies:[p.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,x.KE,x.hX,I.Nt,M.lW,A.gD,b.ey]}),e})();class B{}class O{}var F=s(5659),T=s(9602),$=s(2833),Y=s(4682),D=s(1837),U=s(1234),q=s(2043);function j(e,n){1&e&&(t.TgZ(0,"app-form-heading"),t._uU(1," Add Salary\n"),t.qZA())}function V(e,n){1&e&&t._UZ(0,"img",33)}function W(e,n){if(1&e&&t._UZ(0,"img",34),2&e){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function X(e,n){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function z(e,n){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function tt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(i){const d=t.CHM(o).index,u=t.oxw(2);return t.KtG(u.onPayHeadChange(i,d))}),t.YNc(6,z,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const r=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.deleteSalaryLine(r))}),t.qZA()()()()}if(2&e){const o=n.$implicit,a=n.index,i=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(6),t.Q6J("ngForOf",i.manageData.payHeadList),t.xp6(6),t.Q6J("item",o)}}function et(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalary())}),t.TgZ(2,"div",4),t.YNc(3,V,1,0,"img",5),t.YNc(4,W,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,X,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,tt,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.reset())}),t.qZA(),t._UZ(50,"app-crud-add-button",32),t.qZA()()()}if(2&e){const o=t.MAs(24),a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.manageForm),t.xp6(2),t.Q6J("ngIf",null==a.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=a.data.employee.profileUrl),t.xp6(5),t.Oqu(a.data.employee.name),t.xp6(2),t.hij(" ",a.data.employee.code," "),t.xp6(3),t.Oqu(a.data.employee.workingCompany),t.xp6(2),t.Oqu(a.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",a.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",a.total,""),t.xp6(2),t.Q6J("ngForOf",a.salaryLineListControls),t.xp6(3),t.Q6J("disabled",a.isProcessing)}}let at=(()=>{const n=class{constructor(a,i,r,d){this.dialogRef=a,this.salaryService=i,this.ds=r,this.data=d,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,y.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI(new Date,[l.kI.required]),salaryPeriod:new l.NI("Months",[l.kI.required]),weeklyOffDays:new l.NI(0,[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().subscribe(a=>{this.manageData=a.item,this.isLoaded=!0,this.addDefaultSalaryLine("Basic Salary"),this.addDefaultSalaryLine("Allowance")})}addDefaultSalaryLine(a){let i=this.manageData.payHeadList.find(r=>r.name==a)?.id;this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(i,l.kI.required),rate:new l.NI(null,l.kI.required)}))}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(null,l.kI.required),rate:new l.NI(null,l.kI.required)}))}deleteSalaryLine(a){this.manageForm.get("salaryLineList").removeAt(a),this.onRateChange()}onPayHeadChange(a,i){this.manageForm.get("salaryLineList").at(i).patchValue({rate:null})}onRateChange(){let a=0;this.manageForm.value.salaryLineList.forEach(i=>{a+=i.rate??0}),this.total=a}addSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(h.J.areYouSureTo))return;let a=new B;a.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),a.salaryPeriod=this.manageForm.value.salaryPeriod,a.weeklyOffDays=this.manageForm.value.weeklyOffDays,a.employeeId=this.data.employee.id,a.salaryLineList=[],this.manageForm.value.salaryLineList.forEach(r=>{let d=new O;d.payHeadId=r.payHeadId,d.rate=r.rate,a.salaryLineList.push(d)});let i=this.validateSalaryLine();""==i?(this.isProcessing=!0,this.sub=this.salaryService.addSalary(a).subscribe(r=>{if(this.isProcessing=!1,r?.status!=c.s.success)return this.isProcessing=!1,void alert(r?.message);this.reset(),this.closeDialog()})):alert(`Error : ${i}`)}validateSalaryLine(){let a=[],i="",r=0;if(this.manageForm.value.salaryLineList.forEach(u=>{r++,a.findIndex(J=>J.key.payHeadId==u.payHeadId)>=0?i=u.payHeadId:a.push({key:{payHeadId:u.payHeadId},value:1})}),""!=i){var d=this.manageData.payHeadList.find(u=>u.id==i)?.name;return`Duplicate line ${d} found`}return 0==r?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(v.so),t.Y36(E),t.Y36(F.R),t.Y36(v.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,j,2,0,"app-form-heading",0),t.YNc(1,et,51,13,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[p.sg,p.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,x.KE,x.hX,x.R9,I.Nt,v.xY,A.gD,b.ey,T.Mq,T.hl,T.nW,$.L,Y.X,D.b,U.E,q.H]}),e})();function it(e,n){1&e&&(t.TgZ(0,"app-form-heading"),t._uU(1," View Salary\n"),t.qZA())}function nt(e,n){1&e&&t._UZ(0,"img",30)}function ot(e,n){if(1&e&&t._UZ(0,"img",31),2&e){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function rt(e,n){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function lt(e,n){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function st(e,n){if(1&e&&(t.TgZ(0,"div",33)(1,"div",14)(2,"mat-form-field",34)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",35),t.YNc(6,lt,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t._UZ(10,"input",36),t.qZA()()()),2&e){const o=n.index,a=t.oxw(2);t.Q6J("formGroupName",o),t.xp6(6),t.Q6J("ngForOf",a.manageData.payHeadList)}}function dt(e,n){if(1&e&&(t.TgZ(0,"div",2)(1,"form",3)(2,"div",4),t.YNc(3,nt,1,0,"img",5),t.YNc(4,ot,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,rt,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",27)(42,"h4"),t._uU(43),t.qZA()()(),t.TgZ(44,"div",28),t.YNc(45,st,11,2,"div",29),t.qZA()()()()()()),2&e){const o=t.MAs(24),a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.manageForm),t.xp6(2),t.Q6J("ngIf",null==a.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=a.data.employee.profileUrl),t.xp6(5),t.Oqu(a.data.employee.name),t.xp6(2),t.hij(" ",a.data.employee.code," "),t.xp6(3),t.Oqu(a.data.employee.workingCompany),t.xp6(2),t.Oqu(a.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",a.manageData.salaryPeriodList),t.xp6(14),t.hij("AED ",a.total,""),t.xp6(2),t.Q6J("ngForOf",a.salaryLineListControls)}}let ct=(()=>{const n=class{constructor(a,i,r,d){this.dialogRef=a,this.salaryService=i,this.ds=r,this.data=d,this.isLoaded=!1,this.total=0,this.baseUrl=(0,y.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI({value:null,disabled:!0},[l.kI.required]),salaryPeriod:new l.NI({value:null,disabled:!0},[l.kI.required]),weeklyOffDays:new l.NI({value:null,disabled:!0},[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,Z.w)(a=>(this.manageData=a.item,this.salaryService.getSalary(this.data.id)))).subscribe(a=>{let i=a.item;this.isLoaded=!0;let r=null!=i.effectiveFrom?this.ds.responseFormatToDate(i.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:r,salaryPeriod:i.salaryPeriod,weeklyOffDays:i.weeklyOffDays});let d=0;i.salaryLineList.forEach(u=>{d+=u.rate??0,this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI({value:u.payHead.id,disabled:!0}),rate:new l.NI({value:u.rate,disabled:!0})}))}),this.total=d})}ngOnDestroy(){this.sub?.unsubscribe()}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(v.so),t.Y36(E),t.Y36(F.R),t.Y36(v.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[1,"col-10","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId"],["type","number","matInput","","formControlName","rate"]],template:function(i,r){1&i&&(t.YNc(0,it,2,0,"app-form-heading",0),t.YNc(1,dt,46,12,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[p.sg,p.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,x.KE,x.hX,x.R9,I.Nt,v.xY,A.gD,b.ey,T.Mq,T.hl,T.nW,q.H]}),e})();class mt{}var pt=s(7786);function ut(e,n){1&e&&(t.TgZ(0,"app-form-heading"),t._uU(1," Edit Salary\n"),t.qZA())}function ft(e,n){1&e&&t._UZ(0,"img",33)}function _t(e,n){if(1&e&&t._UZ(0,"img",34),2&e){const o=t.oxw(2);t.hYB("src","",o.baseUrl,"/profile/",o.data.employee.profileUrl,"",t.LSH)}}function gt(e,n){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function ht(e,n){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.name)}}function yt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",36)(1,"div",14)(2,"mat-form-field",37)(3,"mat-label"),t._uU(4,"PayHead"),t.qZA(),t.TgZ(5,"mat-select",38),t.NdJ("selectionChange",function(i){const d=t.CHM(o).index,u=t.oxw(2);return t.KtG(u.onPayHeadChange(i,d))}),t.YNc(6,ht,2,2,"mat-option",21),t.qZA()(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Rate"),t.qZA(),t.TgZ(10,"input",39),t.NdJ("input",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.onRateChange())}),t.qZA()(),t.TgZ(11,"div",40)(12,"app-delete-action-icon",41),t.NdJ("deleteEvent",function(){const r=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.deleteSalaryLine(r))}),t.qZA()()()()}if(2&e){const o=n.$implicit,a=n.index,i=t.oxw(2);t.Q6J("formGroupName",a),t.xp6(6),t.Q6J("ngForOf",i.manageData.payHeadList),t.xp6(6),t.Q6J("item",o)}}function vt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",2)(1,"form",3),t.NdJ("submit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editSalary())}),t.TgZ(2,"div",4),t.YNc(3,ft,1,0,"img",5),t.YNc(4,_t,1,2,"img",6),t.TgZ(5,"div",7)(6,"div",8)(7,"label",9)(8,"strong"),t._uU(9),t.qZA()(),t.TgZ(10,"label",10),t._uU(11),t.qZA()(),t.TgZ(12,"div",11)(13,"label",12),t._uU(14),t.qZA(),t.TgZ(15,"label",13),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t._uU(20,"Effective From"),t.qZA(),t._UZ(21,"input",16)(22,"mat-datepicker-toggle",17)(23,"mat-datepicker",null,18),t.qZA(),t.TgZ(25,"mat-form-field",19)(26,"mat-label"),t._uU(27,"Period"),t.qZA(),t.TgZ(28,"mat-select",20),t.YNc(29,gt,2,2,"mat-option",21),t.qZA()(),t.TgZ(30,"mat-form-field",19)(31,"mat-label"),t._uU(32,"Off Days"),t.qZA(),t._UZ(33,"input",22),t.qZA()(),t.TgZ(34,"div",8)(35,"div",23)(36,"div",24)(37,"div",25)(38,"div",26)(39,"label"),t._uU(40,"Salary Line"),t.qZA()(),t.TgZ(41,"div",10)(42,"app-add-action-icon",27),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalaryLineForm())}),t.qZA()(),t.TgZ(43,"div",28)(44,"h4"),t._uU(45),t.qZA()()(),t.TgZ(46,"div",29),t.YNc(47,yt,13,3,"div",30),t.qZA()()()(),t.TgZ(48,"div",8)(49,"app-crud-reset-button",31),t.NdJ("resetEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.reset())}),t.qZA(),t._UZ(50,"app-crud-edit-button",32),t.qZA()()()}if(2&e){const o=t.MAs(24),a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.manageForm),t.xp6(2),t.Q6J("ngIf",null==a.data.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=a.data.employee.profileUrl),t.xp6(5),t.Oqu(a.data.employee.name),t.xp6(2),t.hij(" ",a.data.employee.code," "),t.xp6(3),t.Oqu(a.data.employee.workingCompany),t.xp6(2),t.Oqu(a.data.employee.group),t.xp6(5),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",a.manageData.salaryPeriodList),t.xp6(16),t.hij("AED ",a.total,""),t.xp6(2),t.Q6J("ngForOf",a.salaryLineListControls),t.xp6(3),t.Q6J("disabled",a.isProcessing)}}let xt=(()=>{const n=class{constructor(a,i,r,d){this.dialogRef=a,this.salaryService=i,this.ds=r,this.data=d,this.isLoaded=!1,this.isProcessing=!1,this.total=0,this.baseUrl=(0,y.S)()}get salaryLineListControls(){return this.manageForm.get("salaryLineList").controls}ngOnInit(){this.manageForm=new l.cw({effectiveFrom:new l.NI(null,[l.kI.required]),salaryPeriod:new l.NI(null,[l.kI.required]),weeklyOffDays:new l.NI(null,[l.kI.required]),salaryLineList:new l.Oe([])}),this.isLoaded=!1,this.sub=this.salaryService.getSalaryManageData().pipe((0,Z.w)(a=>(this.manageData=a.item,this.salaryService.getSalary(this.data.id)))).subscribe(a=>{let i=a.item;this.isLoaded=!0;let r=null!=i.effectiveFrom?this.ds.responseFormatToDate(i.effectiveFrom):null;this.manageForm.patchValue({effectiveFrom:r,salaryPeriod:i.salaryPeriod,weeklyOffDays:i.weeklyOffDays});let d=0;i.salaryLineList.forEach(u=>{d+=u.rate??0,this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI({value:u.payHead.id,disabled:!0}),rate:new l.NI({value:u.rate,disabled:!1})}))}),this.total=d})}addSalaryLineForm(){this.manageForm.get("salaryLineList").push(new l.cw({payHeadId:new l.NI(null,l.kI.required),rate:new l.NI(null,l.kI.required)}))}deleteSalaryLine(a){this.manageForm.get("salaryLineList").removeAt(a),this.onRateChange()}onPayHeadChange(a,i){this.manageForm.get("salaryLineList").at(i).patchValue({rate:null})}onRateChange(){let a=0;this.manageForm.value.salaryLineList.forEach(i=>{a+=i.rate??0}),this.total=a}editSalary(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(h.J.areYouSureTo))return;let a=new mt;a.id=this.data.id,a.effectiveFrom=this.ds.formatToRequest(this.manageForm.value.effectiveFrom),a.salaryPeriod=this.manageForm.value.salaryPeriod,a.weeklyOffDays=this.manageForm.value.weeklyOffDays,a.employeeId=this.data.employee.id,a.salaryLineList=[],this.manageForm.get("salaryLineList").controls.forEach(r=>{console.log(r);let d=new O;d.payHeadId=r.getRawValue().payHeadId,d.rate=r.getRawValue().rate,a.salaryLineList.push(d)});let i=this.validateSalaryLine();""==i?(this.isProcessing=!0,this.sub=this.salaryService.editSalary(a).subscribe(r=>{if(this.isProcessing=!1,r?.status!=c.s.success)return this.isProcessing=!1,void alert(r?.message);this.reset(),this.closeDialog()})):alert(`Error : ${i}`)}validateSalaryLine(){let a=[],i="",r=0;if(this.manageForm.get("salaryLineList").controls.forEach(u=>{r++,a.findIndex(J=>J.key.payHeadId==u.getRawValue().payHeadId)>=0?i=u.getRawValue().payHeadId:a.push({key:{payHeadId:u.getRawValue().payHeadId},value:1})}),""!=i){var d=this.manageData.payHeadList.find(u=>u.id==i)?.name;return`Duplicate line ${d} found`}return 0==r?"No salary line":""}reset(){for(this.manageForm.reset();this.manageForm.get("salaryLineList").length>0;)this.manageForm.get("salaryLineList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(v.so),t.Y36(E),t.Y36(F.R),t.Y36(v.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-salary"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],["src","assets/profile_empty.jpeg","class","img-responsive rounded-circle img-thumbnail col-2","width","50","height","60",4,"ngIf"],["class","img-responsive rounded-circle img-thumbnail col-2","width","45","height","115",3,"src",4,"ngIf"],[1,"col-10","py-3"],[1,"row"],[1,"col-10"],[1,"col-2","text-end"],[1,"row","mt-2"],[1,"col-7","text-start"],[1,"col-5","text-end"],[1,"row","form-group"],["appearance","outline",1,"col-4","form-field"],["matInput","","formControlName","effectiveFrom",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"form-field","col-4"],["formControlName","salaryPeriod"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","weeklyOffDays"],[1,"col-12"],["formArrayName","salaryLineList"],[1,"row","my-4"],[1,"col-2"],[3,"addEvent"],[1,"col-8","text-end"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-3",3,"resetEvent"],[1,"col-3","offset-6",3,"disabled"],["src","assets/profile_empty.jpeg","width","50","height","60",1,"img-responsive","rounded-circle","img-thumbnail","col-2"],["width","45","height","115",1,"img-responsive","rounded-circle","img-thumbnail","col-2",3,"src"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],[1,"form-field","col-6"],["formControlName","payHeadId",3,"selectionChange"],["type","number","matInput","","formControlName","rate",3,"input"],[1,"col-2","text-end","mt-2"],[3,"item","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,ut,2,0,"app-form-heading",0),t.YNc(1,vt,51,13,"div",1)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[p.sg,p.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,l.x0,l.CE,x.KE,x.hX,x.R9,I.Nt,v.xY,A.gD,b.ey,T.Mq,T.hl,T.nW,pt.W,Y.X,D.b,U.E,q.H]}),e})();var Zt=s(7974),Lt=s(4521),Tt=s(1763),St=s(7268);const Ct=["page"];function wt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Name "),t.qZA())}function Et(e,n){1&e&&t._UZ(0,"img",27)}function It(e,n){if(1&e&&t._UZ(0,"img",28),2&e){const o=t.oxw().$implicit,a=t.oxw();t.hYB("src","",a.baseUrl,"/profile/",o.employee.profileUrl,"",t.LSH)}}function At(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,Et,1,0,"img",25),t.YNc(2,It,1,2,"img",26),t._uU(3),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null==o.employee.profileUrl),t.xp6(1),t.Q6J("ngIf",null!=o.employee.profileUrl),t.xp6(1),t.hij(" ",o.employee.name," ")}}function bt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Code "),t.qZA())}function Nt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.code," ")}}function Ft(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Working Company "),t.qZA())}function Dt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.workingCompany," ")}}function Ut(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Profession "),t.qZA())}function qt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.employee.group," ")}}function Jt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," From "),t.qZA())}function Ot(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.effectiveFrom," ")}}function Yt(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Period "),t.qZA())}function Qt(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.salaryPeriod," ")}}function Ht(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Off Days "),t.qZA())}function Pt(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.weeklyOffDays)}}function Mt(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,"-"),t.qZA())}function Rt(e,n){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,Pt,2,1,"span",31),t.YNc(2,Mt,2,0,"span",31),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function Gt(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Salary "),t.qZA())}function Kt(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.total)}}function kt(e,n){1&e&&(t.TgZ(0,"span",33),t._uU(1,"Not Set"),t.qZA())}function Bt(e,n){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,Kt,2,1,"span",31),t.YNc(2,kt,2,0,"span",32),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function $t(e,n){1&e&&t._UZ(0,"th",29)}function jt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-edit-action-icon",39),t.NdJ("editEvent",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.edit(i))}),t.qZA()}if(2&e){const o=t.oxw(2).$implicit;t.Q6J("item",o)}}function Vt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-delete-action-icon",40),t.NdJ("deleteEvent",function(){t.CHM(o);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.delete(i))}),t.qZA()}if(2&e){const o=t.oxw(2).$implicit;t.Q6J("item",o)}}function Wt(e,n){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"app-view-action-icon",36),t.NdJ("viewEvent",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.view(i))}),t.qZA(),t.YNc(2,jt,1,1,"app-edit-action-icon",37),t.YNc(3,Vt,1,1,"app-delete-action-icon",38),t.BQk()}if(2&e){const o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("item",o),t.xp6(1),t.Q6J("ngIf",a.allowEdit),t.xp6(1),t.Q6J("ngIf",a.allowDelete)}}function Xt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-add-action-icon",41),t.NdJ("addEvent",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.add(i))}),t._uU(1,"add"),t.qZA()}if(2&e){const o=t.oxw().$implicit;t.Q6J("item",o)}}function zt(e,n){if(1&e&&(t.TgZ(0,"td",34),t.YNc(1,Wt,4,3,"ng-container",31),t.YNc(2,Xt,2,1,"app-add-action-icon",35),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null==o.id)}}function te(e,n){1&e&&t._UZ(0,"tr",42)}function ee(e,n){1&e&&t._UZ(0,"tr",43)}const ae=function(){return[10,20,50]};let ie=(()=>{const n=class{constructor(a,i){this.menuRoleService=a,this.dialog=i,this.moreEvent=new w.x,this.addEvent=new w.x,this.editEvent=new w.x,this.deleteEvent=new w.x,this.displayedColumns=["name","code","company","group","effectiveFrom","salaryPeriod","weeklyOffDays","total","manage"],this.baseUrl=(0,y.S)(),this.allowEdit=!1,this.allowDelete=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(g.w.Payroll,m.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(g.w.Payroll,m.k.delete)}ngOnChanges(a){this.salaryList.paginator=this.paginator}ngAfterViewInit(){this.salaryList.paginator=this.paginator}more(){this.moreEvent.next(!0)}add(a){this.dialog.open(at,{data:a,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{1==r&&this.addEvent.next()})}edit(a){this.dialog.open(xt,{data:a,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{1==r&&this.editEvent.next()})}view(a){this.dialog.open(ct,{data:a,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(r=>{})}delete(a){this.deleteEvent.next(a)}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(C.K),t.Y36(v.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary-list"]],viewQuery:function(i,r){if(1&i&&t.Gf(Ct,5),2&i){let d;t.iGM(d=t.CRH())&&(r.paginator=d.first)}},inputs:{salaryList:"salaryList",count:"count"},outputs:{moreEvent:"moreEvent",addEvent:"addEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[t.TTD],decls:36,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","company"],["matColumnDef","group"],["matColumnDef","effectiveFrom"],["matColumnDef","salaryPeriod"],["matColumnDef","weeklyOffDays"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","manage"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"item","addEvent",4,"ngIf"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","deleteEvent"],[3,"item","addEvent"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,wt,2,0,"th",3),t.YNc(4,At,4,3,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,bt,2,0,"th",3),t.YNc(7,Nt,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,Ft,2,0,"th",3),t.YNc(10,Dt,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,Ut,2,0,"th",3),t.YNc(13,qt,2,1,"td",4),t.BQk(),t.ynx(14,8),t.YNc(15,Jt,2,0,"th",3),t.YNc(16,Ot,2,1,"td",4),t.BQk(),t.ynx(17,9),t.YNc(18,Yt,2,0,"th",3),t.YNc(19,Qt,2,1,"td",4),t.BQk(),t.ynx(20,10),t.YNc(21,Ht,2,0,"th",11),t.YNc(22,Rt,3,2,"td",12),t.BQk(),t.ynx(23,13),t.YNc(24,Gt,2,0,"th",11),t.YNc(25,Bt,3,2,"td",12),t.BQk(),t.ynx(26,14),t.YNc(27,$t,1,0,"th",11),t.YNc(28,zt,3,2,"td",15),t.BQk(),t.YNc(29,te,1,0,"tr",16),t.YNc(30,ee,1,0,"tr",17),t.qZA(),t._UZ(31,"mat-paginator",18,19),t.qZA(),t.TgZ(33,"div",20)(34,"div",21)(35,"app-server-pagination",22),t.NdJ("loadMore",function(){return r.more()}),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("dataSource",r.salaryList),t.xp6(28),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,ae)),t.xp6(4),t.Q6J("loaded",r.salaryList.data.length)("count",r.count))},dependencies:[p.O5,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,Zt.NW,Lt.H,D.b,Tt.p,St.R,U.E]}),e})();function ne(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-salary-search-filter",3),t.NdJ("onSearchChange",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.changeSearchData(i))})("onSearch",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.getList())}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("searchData",o.searchData)}}function oe(e,n){1&e&&(t.TgZ(0,"div",4)(1,"app-table-heading",5),t._uU(2," Payroll "),t.qZA()())}function re(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"app-salary-list",6),t.NdJ("moreEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.getList())})("addEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addSalary())})("editEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editSalary())})("deleteEvent",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.deleteSalary(i))}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("salaryList",o.dataSource)("count",o.count)}}const le=[{path:"salary",component:(()=>{const n=class{constructor(a,i,r,d){this.menuRoleService=a,this.salaryService=i,this.employeeService=r,this.dialog=d,this.isLoaded=!1,this.req=new L.p,this.eList=[],this.count=0,this.allowAdd=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeService.getEmployeeSearchData().pipe((0,Z.w)(a=>(this.searchData=a.item,this.isLoaded=!0,this.dataSource=new f.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(g.w.People,m.k.add),this.salaryService.getSalaryList(this.req)))).subscribe(a=>{this.update(a)})}ngAfterViewInit(){}changeSearchData(a){console.log(a),this.eList=[],this.dataSource=new f.by(this.eList),this.req.searchKey=a.searchKey,this.req.companyId=""!=a.companyId?a.companyId:null,this.req.groupId=""!=a.groupId?a.groupId:null,this.req.countryId=""!=a.countryId?a.countryId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new f.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(a){a?.response?.status==c.s.success&&(this.eList.push.apply(this.eList,a.list),this.dataSource=new f.by(this.eList),this.count=a.totalRecords,a.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.salaryService.getSalaryList(this.req).subscribe(a=>{this.update(a)})}addSalary(){this.refreshList()}editSalary(){this.refreshList()}deleteSalary(a){confirm(h.J.confirmDelete(a.employee.name+" salary"))&&(this.sub=this.salaryService.deleteSalary(a.id).subscribe(i=>{i?.status==c.s.success?this.refreshList():alert(i?.message)}))}ngOnDestroy(){this.sub?.unsubscribe()}};let e=n;return n.\u0275fac=function(i){return new(i||n)(t.Y36(C.K),t.Y36(E),t.Y36(H.G),t.Y36(v.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-salary"]],decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],[1,"col-6"],[3,"salaryList","count","moreEvent","addEvent","editEvent","deleteEvent"]],template:function(i,r){1&i&&(t.YNc(0,ne,1,1,"app-salary-search-filter",0),t.YNc(1,oe,3,0,"div",1),t.YNc(2,re,1,2,"app-salary-list",2)),2&i&&(t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded),t.xp6(1),t.Q6J("ngIf",r.isLoaded))},dependencies:[p.O5,P.u,k,ie]}),e})()}];let se=(()=>{const n=class{};let e=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(le)]}),e})();var de=s(529),ce=s(3214),me=s(1260);let pe=(()=>{const n=class{};let e=n;return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,se,l.u5,l.UX,de.JF,ce._,me.m,_.Bz]}),e})()},1234:(N,S,s)=>{s.d(S,{E:()=>L});var p=s(7579),_=s(4650),f=s(4859),Z=s(7392);let L=(()=>{const h=class{constructor(){this.addEvent=new p.x}addItem(){this.addEvent.next(this.item)}};let g=h;return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=_.Xpm({type:h,selectors:[["app-add-action-icon"]],inputs:{item:"item"},outputs:{addEvent:"addEvent"},decls:3,vars:0,consts:[["type","button","mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(t,C){1&t&&(_.TgZ(0,"button",0),_.NdJ("click",function(){return C.addItem()}),_.TgZ(1,"mat-icon"),_._uU(2,"add"),_.qZA()())},dependencies:[f.nh,Z.Hw]}),g})()},7268:(N,S,s)=>{s.d(S,{R:()=>L});var p=s(7579),_=s(4650),f=s(4859),Z=s(7392);let L=(()=>{const h=class{constructor(){this.viewEvent=new p.x}viewItem(){this.viewEvent.next(this.item)}};let g=h;return h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=_.Xpm({type:h,selectors:[["app-view-action-icon"]],inputs:{item:"item"},outputs:{viewEvent:"viewEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(t,C){1&t&&(_.TgZ(0,"button",0),_.NdJ("click",function(){return C.viewItem()}),_.TgZ(1,"mat-icon"),_._uU(2,"visibility"),_.qZA()())},dependencies:[f.nh,Z.Hw]}),g})()},5332:(N,S,s)=>{s.d(S,{G:()=>Z});var p=s(9057),_=s(4650),f=s(5);let Z=(()=>{const g=class{constructor(m){this.http=m}getEmployeeList(m){return this.http.post(p.b.getEmployeeList,m)}getEmployeeListByCompany(m){let c=p.b.getEmployeeListByCompany;return c=c.replace(/{companyId}/gi,m),this.http.get(c)}getEmployeeSearchData(){return this.http.get(p.b.getEmployeeSearchData)}getEmployeeById(m){let c=p.b.getEmployeeById;return c=c.replace(/{id}/gi,m),this.http.get(c)}getEmployeeManageData(){return this.http.get(p.b.getEmployeeManageData)}addEmployee(m){return this.http.post(p.b.addEmployee,m)}addEmployeeDoc(m){return this.http.post(p.b.addEmployeeDoc,m)}editEmployee(m){return this.http.post(p.b.editEmployee,m)}exportEmployeeDoc(m){let c=p.b.exportEmployeeDoc;return c=c.replace(/{id}/gi,m),this.http.postAttachment(c,null)}deleteEmployee(m){let c=p.b.deleteEmployee;return c=c.replace(/{id}/gi,m),this.http.post(c,null)}importEmployee(m){return this.http.post(p.b.importEmployee,m)}verifyEmployee(m){return this.http.post(p.b.verifyEmployee,m)}};let L=g;return g.\u0275fac=function(c){return new(c||g)(_.LFG(f.o))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),L})()}}]);