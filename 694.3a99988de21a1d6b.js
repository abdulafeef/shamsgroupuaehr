"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[694],{3694:(te,F,p)=>{p.r(F),p.d(F,{EmployeeModule:()=>an});var _=p(6895),h=p(9172),v=p(1654),c=p(4006),u=p(5412),x=p(3900),C=p(9646),O=p(4128);class J{}class b{}var D=p(5311),T=p(673),oe=p(8230);class ie{}var q=p(676);class ne{}var e=p(4650),N=p(5332),k=p(5659),g=p(9549),I=p(4144),A=p(4859),Q=p(4385),Y=p(3238),Z=p(9602),me=p(2833),de=p(4682),H=p(1837),ae=p(1234),L=p(2043);const ue=["profileUpload"],fe=["docUpload"],_e=["docName"];function he(t,a){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Employee\n"),e.qZA())}function ge(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function ye(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function ve(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function xe(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Ee(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function we(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.onProfileRemoveClick())}),e._uU(1,"Remove"),e.qZA()}}function Te(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Ze(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(i))}),e._uU(1,"Remove File"),e.qZA()}}function De(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",45)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",46,47),e.NdJ("selectionChange",function(i){const r=e.CHM(n).index,s=e.oxw(2);return e.KtG(s.onDocumentTypeChange(i,r))}),e.YNc(7,Te,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",48),e.qZA(),e.TgZ(12,"mat-form-field",49)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",50)(16,"mat-datepicker-toggle",25)(17,"mat-datepicker",null,26),e.qZA(),e.TgZ(19,"div",51)(20,"button",52),e.NdJ("click",function(){const l=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.onDocSelect(l))}),e._uU(21,"Select File"),e.qZA(),e._UZ(22,"input",53,54)(24,"label",55,56),e.YNc(26,Ze,2,0,"button",57),e.qZA(),e.TgZ(27,"div",58)(28,"app-delete-action-icon",59),e.NdJ("deleteEvent",function(){const l=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const n=a.$implicit,o=a.index,i=e.MAs(6),l=e.MAs(18),r=e.MAs(25),s=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(7),e.Q6J("ngForOf",s.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(4),e.Q6J("disabled",null==i.value),e.xp6(6),e.Q6J("ngIf",""!=r.textContent),e.xp6(2),e.Q6J("item",n)}}function Ce(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addEmployee())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,ge,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,ye,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,ve,2,2,"mat-option",11),e.qZA()(),e.TgZ(30,"button",19),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.applySameCompany())}),e._uU(31,"Mark Same"),e.qZA()(),e.TgZ(32,"div",16)(33,"mat-form-field",17)(34,"mat-label"),e._uU(35,"Work Site"),e.qZA(),e.TgZ(36,"mat-select",20),e.YNc(37,xe,2,2,"mat-option",11),e.qZA()()(),e.TgZ(38,"div",21)(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Position"),e.qZA(),e.TgZ(42,"mat-select",22),e.YNc(43,Ee,2,2,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",21)(45,"mat-form-field",23)(46,"mat-label"),e._uU(47,"Joining Date"),e.qZA(),e._UZ(48,"input",24)(49,"mat-datepicker-toggle",25)(50,"mat-datepicker",null,26),e.qZA()()()(),e.TgZ(52,"div",21)(53,"div",27)(54,"div",28),e._UZ(55,"img",29),e.qZA()(),e.TgZ(56,"div",30),e.YNc(57,we,2,0,"button",31),e.TgZ(58,"button",32),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onProfileSetClick())}),e._uU(59,"Select"),e.qZA(),e._UZ(60,"input",33,34),e.qZA()()(),e.TgZ(62,"div",4)(63,"div",28)(64,"div",35)(65,"div",36)(66,"div",21)(67,"label"),e._uU(68,"Document"),e.qZA()(),e.TgZ(69,"div",37)(70,"app-add-action-icon",38),e.NdJ("addEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addDocumentItemForm())}),e.qZA()()(),e.TgZ(71,"div",39),e.YNc(72,De,29,7,"div",40),e.qZA()()()(),e.TgZ(73,"div",4)(74,"app-crud-reset-button",41),e.NdJ("resetEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.reset())}),e.qZA(),e._UZ(75,"app-crud-add-button",42),e.qZA()()()}if(2&t){const n=e.MAs(51),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(8),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(2),e.Q6J("ngIf",o.profileSet),e.xp6(1),e.Q6J("ngClass",o.profileSet?"col-6":"col-12"),e.xp6(14),e.Q6J("ngForOf",o.documentListControls),e.xp6(3),e.Q6J("disabled",o.isProcessing)}}let Ie=(()=>{const a=class{constructor(o,i,l,r,s){this.dialogRef=o,this.employeeService=i,this.ds=l,this.renderer=r,this.data=s,this.isLoaded=!1,this.profileSrc=null,this.profileEmpty=q.O.profileEmptySrc,this.profileSet=!1,this.profile=null,this.isProcessing=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new c.cw({person:new c.cw({firstName:new c.NI(null,c.kI.required),gender:new c.NI("M",c.kI.required),dob:new c.NI(null)}),code:new c.NI(null,[c.kI.required,c.kI.maxLength(40)]),visaCompanyId:new c.NI(null,[c.kI.required]),workingCompanyId:new c.NI(null,[c.kI.required]),groupId:new c.NI(null,[c.kI.required]),joiningDate:new c.NI(null,[c.kI.required]),homeAddress:new c.cw({addressType:new c.NI("Work",c.kI.required),name:new c.NI("NA",[c.kI.maxLength(100)]),countryId:new c.NI(null,c.kI.required)}),documentList:new c.Oe([])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().subscribe(o=>{this.manageData=o.item,this.addDefaultDoc("Passport"),this.addDefaultDoc("Emirates ID"),this.addDefaultDoc("Labour Card"),this.isLoaded=!0,this.profileSrc=this.profileEmpty})}addDefaultDoc(o){let i=this.manageData.documentTypeList.find(l=>l.name==o)?.id;this.manageForm.get("documentList").push(new c.cw({documentTypeId:new c.NI(i,c.kI.required),identifier:new c.NI(null,c.kI.required),expiryDate:new c.NI(null,c.kI.required),file:new c.NI(null)}))}onProfileSetClick(){const o=this.profileUpload.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const i=o.files[0];if(i.size>1e3*q.O.profileImageLimitKb)return void alert(`Profile size max allowed ${q.O.profileImageLimitKb}kb exceeded`);this.profile=i;const l=new FileReader;l.onload=r=>this.profileSrc=l.result,l.readAsDataURL(i),this.profileSet=!0}},o.click()}onProfileRemoveClick(){this.profileSrc=this.profileEmpty,this.profileSet=!1,this.profileUpload.nativeElement.value="",this.profile=null}onDocumentTypeChange(o,i){let l=this.manageData.documentTypeList.find(s=>s.id==o.value);var r=this.manageForm.get("documentList").at(i);r.get("identifier").disabled&&r.get("identifier").enable(),r.get("expiryDate").disabled&&r.get("expiryDate").enable(),r.patchValue({identifier:null,expiryDate:null,file:null}),this.onDocRemove(i),l.isIdentifier?r.get("identifier")?.setValidators(c.kI.required):r.get("identifier")?.removeValidators(c.kI.required),l.isExpiry?r.get("expiryDate")?.setValidators(c.kI.required):r.get("expiryDate")?.removeValidators(c.kI.required),r.get("identifier").markAsUntouched(),r.get("expiryDate").markAsUntouched(),r.get("identifier").updateValueAndValidity(),r.get("expiryDate").updateValueAndValidity()}addDocumentItemForm(){this.manageForm.get("documentList").push(new c.cw({documentTypeId:new c.NI(null,c.kI.required),identifier:new c.NI({value:null,disabled:!0}),expiryDate:new c.NI({value:null,disabled:!0}),file:new c.NI(null)}))}deleteDocumentItem(o){this.manageForm.get("documentList").removeAt(o)}applySameCompany(){null!=this.manageForm.value.visaCompanyId&&this.manageForm.patchValue({workingCompanyId:this.manageForm.value.visaCompanyId})}onDocSelect(o){let i=this.manageForm.get("documentList").at(o),l=this.manageData.documentTypeList.find(s=>s.id==i.value.documentTypeId),r=this.docUpload.get(o).nativeElement;r.onchange=()=>{if(r.files&&r.files[0]){const s=r.files[0];if(l.contentLimitKb>0&&s.size>1e3*l.contentLimitKb)return r.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let m=this.docName.get(o).nativeElement;this.renderer.setProperty(m,"textContent",s.name),i.patchValue({file:s})}},r.click()}onDocRemove(o){let i=this.manageForm.get("documentList").at(o);this.docUpload.get(o).nativeElement.value="";let r=this.docName.get(o).nativeElement;this.renderer.setProperty(r,"textContent",""),i.patchValue({file:null})}addEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(D.J.areYouSureTo))return;let o=new J;o.person=new ie,o.person.firstName=this.manageForm.value.person.firstName,o.person.gender=this.manageForm.value.person.gender,o.code=this.manageForm.value.code,o.visaCompanyId=this.manageForm.value.visaCompanyId,o.workingCompanyId=this.manageForm.value.workingCompanyId,o.groupId=this.manageForm.value.groupId,o.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),o.homeAddress=new oe.h,o.homeAddress.addressType=this.manageForm.value.homeAddress.addressType,o.homeAddress.name=this.manageForm.value.homeAddress.name,o.homeAddress.countryId=this.manageForm.value.homeAddress.countryId,o.documents=[],this.manageForm.value.documentList.forEach(r=>{let s=new b;s.documentTypeId=r.documentTypeId,s.identifier=r.identifier,null!=r.expiryDate&&(s.expiryDate=this.ds.formatToRequest(r.expiryDate)),o.documents.push(s)});let i=this.validateDoc(o.documents);if(""!=i)return void alert(`Error : ${i}`);const l=new FormData;l.append("data",JSON.stringify(o)),this.profileSet&&l.append("profile",this.profile),this.isProcessing=!0,this.sub=this.employeeService.addEmployee(l).pipe((0,x.w)(r=>{if(r.response?.status!=T.s.success)return this.isProcessing=!1,alert(r.response?.message),(0,C.of)(null);let s=r.item?.id;const m=[];return this.manageForm.value.documentList.forEach(f=>{if(null==f.file)return;let y=new ne;y.employeeId=s,y.documentTypeId=f.documentTypeId,y.identifier=f.identifier;const w=new FormData;w.append("data",JSON.stringify(y)),w.append("doc",f.file),m.push(this.employeeService.addEmployeeDoc(w))}),0==m.length?(this.reset(),this.closeDialog(),(0,C.of)(null)):(0,O.D)(m)})).subscribe(r=>{this.reset(),this.closeDialog()})}validateDoc(o){let i=[],l="";if(o.forEach(s=>{i.findIndex(f=>f.key.docId==s.documentTypeId)>=0?l=s.documentTypeId:i.push({key:{docId:s.documentTypeId},value:1})}),""!=l){var r=this.manageData.documentTypeList.find(s=>s.id==l)?.name;return`Duplicate doc ${r} found`}return""}validateDocAlt(o){let i=[],l="";if(o.forEach(s=>{i.findIndex(f=>f.key.docId==s.documentTypeId&&f.key.identifier==s.identifier)>=0?l=s.documentTypeId:i.push({key:{docId:s.documentTypeId,identifier:s.identifier},value:1})}),""!=l){var r=this.manageData.documentTypeList.find(s=>s.id==l)?.name;return`Duplicate doc ${r} with same identifier found`}return""}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(N.G),e.Y36(k.R),e.Y36(e.Qsj),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-employee"]],viewQuery:function(i,l){if(1&i&&(e.Gf(ue,5),e.Gf(fe,5),e.Gf(_e,5)),2&i){let r;e.iGM(r=e.CRH())&&(l.profileUpload=r.first),e.iGM(r=e.CRH())&&(l.docUpload=r),e.iGM(r=e.CRH())&&(l.docName=r)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["type","button","mat-button","","color","primary",1,"col-4","offset-8",3,"click"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],[1,"row","my-2"],["type","button","mat-button","","color","primary","class","col-6",3,"click",4,"ngIf"],["type","button","mat-button","","color","primary",1,"",3,"ngClass","click"],["type","file","id","profileUpload","name","profileUpload","accept","image/*",2,"display","none"],["profileUpload",""],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-2",3,"resetEvent"],[1,"col-2","offset-8",3,"disabled"],[3,"value"],["type","button","mat-button","","color","primary",1,"col-6",3,"click"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"]],template:function(i,l){1&i&&(e.YNc(0,he,2,0,"app-form-heading",0),e.YNc(1,Ce,76,13,"div",1)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.sg,_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,g.KE,g.hX,g.R9,I.Nt,A.lW,u.xY,Q.gD,Y.ey,Z.Mq,Z.hl,Z.nW,me.L,de.X,H.b,ae.E,L.H]}),t})();var d=p(7155),be=p(9167),U=p(1219),Ne=p(2696),Ae=p(3667),$=p(7770),E=p(7579),S=p(9057);class qe{}var le=p(455),V=p(7786);const Le=["profileUpload"],Ue=["docUpload"],Je=["docName"];function Se(t,a){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Employee\n"),e.qZA())}function Fe(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function ke(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Qe(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Ye(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Ke(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Re(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.onProfileRemoveClick())}),e._uU(1,"Remove"),e.qZA()}}function Me(t,a){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Oe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocSelect(i))}),e._uU(1,"Select File"),e.qZA()}if(2&t){e.oxw();const n=e.MAs(6);e.Q6J("disabled",null==n.value)}}function Ge(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(i))}),e._uU(1,"Remove File"),e.qZA()}}function He(t,a){1&t&&(e.TgZ(0,"label"),e._uU(1,"Doc Uploaded"),e.qZA())}function $e(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",45)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",46,47),e.NdJ("selectionChange",function(i){const r=e.CHM(n).index,s=e.oxw(2);return e.KtG(s.onDocumentTypeChange(i,r))}),e.YNc(7,Me,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",48),e.qZA(),e.TgZ(12,"mat-form-field",49)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",50)(16,"mat-datepicker-toggle",25)(17,"mat-datepicker",null,26),e.qZA(),e._UZ(19,"input",51,52)(21,"input",53,54),e.TgZ(23,"div",55),e.YNc(24,Oe,2,1,"button",56),e._UZ(25,"input",57,58)(27,"label",59,60),e.YNc(29,Ge,2,0,"button",61),e.YNc(30,He,2,0,"label",0),e.qZA(),e.TgZ(31,"div",62)(32,"app-delete-action-icon",63),e.NdJ("deleteEvent",function(){const l=e.CHM(n).index,r=e.oxw(2);return e.KtG(r.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const n=a.$implicit,o=a.index,i=e.MAs(18),l=e.MAs(20),r=e.MAs(22),s=e.MAs(28),m=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(7),e.Q6J("ngForOf",m.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(8),e.Q6J("ngIf",0==l.value.length||0==r.value.length),e.xp6(5),e.Q6J("ngIf",""!=s.textContent),e.xp6(1),e.Q6J("ngIf",l.value.length>0&&r.value.length>0),e.xp6(2),e.Q6J("item",n)}}function Ve(t,a){if(1&t&&e._UZ(0,"app-crud-edit-button",66),2&t){const n=e.oxw(2);e.Q6J("disabled",n.isProcessing)}}function Pe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.editEmployee())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,Fe,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,ke,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,Qe,2,2,"mat-option",11),e.qZA()(),e.TgZ(30,"button",19),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.applySameCompany())}),e._uU(31,"Mark Same"),e.qZA()(),e.TgZ(32,"div",16)(33,"mat-form-field",17)(34,"mat-label"),e._uU(35,"Work Site"),e.qZA(),e.TgZ(36,"mat-select",20),e.YNc(37,Ye,2,2,"mat-option",11),e.qZA()()(),e.TgZ(38,"div",21)(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Position"),e.qZA(),e.TgZ(42,"mat-select",22),e.YNc(43,Ke,2,2,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",21)(45,"mat-form-field",23)(46,"mat-label"),e._uU(47,"Joining Date"),e.qZA(),e._UZ(48,"input",24)(49,"mat-datepicker-toggle",25)(50,"mat-datepicker",null,26),e.qZA()()()(),e.TgZ(52,"div",21)(53,"div",27)(54,"div",28),e._UZ(55,"img",29),e.qZA()(),e.TgZ(56,"div",30),e.YNc(57,Re,2,0,"button",31),e.TgZ(58,"button",32),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onProfileSetClick())}),e._uU(59,"Select"),e.qZA(),e._UZ(60,"input",33,34),e.qZA()()(),e.TgZ(62,"div",4)(63,"div",28)(64,"div",35)(65,"div",36)(66,"div",21)(67,"label"),e._uU(68,"Document"),e.qZA()(),e.TgZ(69,"div",37)(70,"app-add-action-icon",38),e.NdJ("addEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addDocumentItemForm())}),e.qZA()()(),e.TgZ(71,"div",39),e.YNc(72,$e,33,8,"div",40),e.qZA()(),e.TgZ(73,"div",4)(74,"mat-slide-toggle",41),e._uU(75,"Active"),e.qZA(),e.YNc(76,Ve,1,1,"app-crud-edit-button",42),e.qZA()()()()()}if(2&t){const n=e.MAs(51),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(8),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(2),e.Q6J("ngIf",o.profileSet),e.xp6(1),e.Q6J("ngClass",o.profileSet?"col-6":"col-12"),e.xp6(14),e.Q6J("ngForOf",o.documentListControls),e.xp6(4),e.Q6J("ngIf",null!=o.data)}}let je=(()=>{const a=class{constructor(o,i,l,r,s){this.dialogRef=o,this.employeeService=i,this.ds=l,this.renderer=r,this.data=s,this.isLoaded=!1,this.profileSrc=null,this.currentProfileUrl=null,this.profileEmpty=q.O.profileEmptySrc,this.profileSet=!1,this.profile=null,this.deletedDocuments=[],this.isProcessing=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new c.cw({person:new c.cw({firstName:new c.NI(null,c.kI.required),gender:new c.NI("M",c.kI.required),dob:new c.NI(null)}),code:new c.NI({value:null,disabled:!0}),visaCompanyId:new c.NI(null,[c.kI.required]),workingCompanyId:new c.NI(null,[c.kI.required]),groupId:new c.NI(null,[c.kI.required]),joiningDate:new c.NI(null,[c.kI.required]),homeAddress:new c.cw({addressType:new c.NI("Work",c.kI.required),name:new c.NI("NA",[c.kI.maxLength(100)]),countryId:new c.NI(null,c.kI.required)}),documentList:new c.Oe([]),active:new c.NI(!0,[c.kI.required])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,x.w)(o=>(this.manageData=o.item,this.employeeService.getEmployeeById(this.data?.id)))).subscribe(o=>{this.isLoaded=!0;let i=o.item;this.profileSrc=null==i.profileUrl?q.O.profileEmptySrc:`${(0,S.SV)()}/profile/${i.profileUrl}`,this.profileSet=null!=i.profileUrl,this.currentProfileUrl=i.profileUrl,this.manageForm.patchValue({person:{firstName:i.person.firstName,gender:i.person.gender,dob:i.person.dOB},code:i.code,visaCompanyId:i.visaCompany.id,workingCompanyId:i.workingCompany.id,groupId:i.group.id,joiningDate:this.ds.responseFormatToDate(i.joiningDate),homeAddress:{addressType:i.homeAddress.addressType,name:i.homeAddress.name,countryId:i.homeAddress.country.id},active:i.active}),i.documentList.forEach(l=>{let r=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new c.cw({id:new c.NI(l.id),documentTypeId:new c.NI({value:l.documentType.id,disabled:!0}),identifier:new c.NI({value:l.identifier,disabled:!0}),expiryDate:new c.NI({value:r,disabled:!0}),file:new c.NI(null),fileName:new c.NI(l.fileName)}))})})}applySameCompany(){null!=this.manageForm.value.visaCompanyId&&this.manageForm.patchValue({workingCompanyId:this.manageForm.value.visaCompanyId})}onProfileSetClick(){const o=this.profileUpload.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const i=o.files[0];if(i.size>1e3*q.O.profileImageLimitKb)return void alert(`Profile size max allowed ${q.O.profileImageLimitKb}kb exceeded`);this.profile=i;const l=new FileReader;l.onload=r=>this.profileSrc=l.result,l.readAsDataURL(i),this.profileSet=!0}},o.click()}onProfileRemoveClick(){this.profileSrc=this.profileEmpty,this.profileSet=!1,this.profileUpload.nativeElement.value="",this.profile=null}addDocumentItemForm(){this.manageForm.get("documentList").push(new c.cw({id:new c.NI(null),documentTypeId:new c.NI(null,c.kI.required),identifier:new c.NI({value:null,disabled:!0}),expiryDate:new c.NI({value:null,disabled:!0}),file:new c.NI(null),fileName:new c.NI(null)}))}deleteDocumentItem(o){let i=this.manageForm.get("documentList").at(o);null!=i.value.id&&this.deletedDocuments.push(i.value.id),this.manageForm.get("documentList").removeAt(o)}onDocumentTypeChange(o,i){let l=this.manageData.documentTypeList.find(s=>s.id==o.value);var r=this.manageForm.get("documentList").at(i);r.get("identifier").disabled&&r.get("identifier").enable(),r.get("expiryDate").disabled&&r.get("expiryDate").enable(),r.patchValue({identifier:null,expiryDate:null,file:null,fileName:null}),this.onDocRemove(i),l.isIdentifier?r.get("identifier")?.setValidators(c.kI.required):r.get("identifier")?.removeValidators(c.kI.required),l.isExpiry?r.get("expiryDate")?.setValidators(c.kI.required):r.get("expiryDate")?.removeValidators(c.kI.required),r.get("identifier").markAsUntouched(),r.get("expiryDate").markAsUntouched(),r.get("identifier").updateValueAndValidity(),r.get("expiryDate").updateValueAndValidity()}onDocSelect(o){let i=this.manageForm.get("documentList").at(o),l=this.manageData.documentTypeList.find(s=>s.id==i.getRawValue().documentTypeId),r=this.docUpload.get(o).nativeElement;r.onchange=()=>{if(r.files&&r.files[0]){const s=r.files[0];if(l.contentLimitKb>0&&s.size>1e3*l.contentLimitKb)return r.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let m=this.docName.get(o).nativeElement;this.renderer.setProperty(m,"textContent",s.name),i.patchValue({file:s})}},r.click()}onDocRemove(o){let i=this.manageForm.get("documentList").at(o);this.docUpload.get(o).nativeElement.value="";let r=this.docName.get(o).nativeElement;this.renderer.setProperty(r,"textContent",""),i.patchValue({file:null})}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}editEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(D.J.areYouSureTo))return;let o=new qe;o.id=this.data?.id,o.person=new ie,o.person.firstName=this.manageForm.value.person.firstName,o.person.gender=this.manageForm.value.person.gender,o.visaCompanyId=this.manageForm.value.visaCompanyId,o.workingCompanyId=this.manageForm.value.workingCompanyId,o.groupId=this.manageForm.value.groupId,o.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),o.homeAddress=new oe.h,o.homeAddress.addressType=this.manageForm.value.homeAddress.addressType,o.homeAddress.name=this.manageForm.value.homeAddress.name,o.homeAddress.countryId=this.manageForm.value.homeAddress.countryId,o.active=this.manageForm.value.active,o.documents=[];let i=[];this.manageForm.get("documentList").controls.forEach((s,m)=>{if(null!=s.value.id)return void i.push({docId:s.getRawValue().documentTypeId,identifier:s.getRawValue().identifier});let f=new b;f.documentTypeId=s.value.documentTypeId,f.identifier=s.value.identifier,null!=s.value.expiryDate&&(f.expiryDate=this.ds.formatToRequest(s.value.expiryDate)),o.documents.push(f)}),o.deletedDocuments=[],this.deletedDocuments.length>0&&(o.deletedDocuments=this.deletedDocuments);let l=this.validateDoc(o.documents,i);if(""!=l)return void alert(`Error : ${l}`);const r=new FormData;this.profileSet?null!=this.profile&&r.append("profile",this.profile):null!=this.currentProfileUrl&&(o.profileRemoved=!0),r.append("data",JSON.stringify(o)),this.isProcessing=!0,this.sub=this.employeeService.editEmployee(r).pipe((0,x.w)(s=>{if(s.status!=T.s.success)return this.isProcessing=!1,alert(s.message),(0,C.of)(null);let m=o.id;const f=[];return this.manageForm.get("documentList").controls.forEach(y=>{if(console.log(y),null==y.value.file)return;let w=new ne;w.employeeId=m,w.documentTypeId=y.getRawValue().documentTypeId,w.identifier=y.getRawValue().identifier;const M=new FormData;M.append("data",JSON.stringify(w)),M.append("doc",y.value.file),f.push(this.employeeService.addEmployeeDoc(M))}),0==f.length?(this.reset(),this.closeDialog(),(0,C.of)(null)):(0,O.D)(f)})).subscribe(s=>{this.reset(),this.closeDialog()})}validateDoc(o,i){let l=[],r="";if(o.forEach(m=>{l.findIndex(y=>y.key.docId==m.documentTypeId)>=0||i.findIndex(w=>w.docId==m.documentTypeId)>=0?r=m.documentTypeId:l.push({key:{docId:m.documentTypeId},value:1})}),""!=r){var s=this.manageData.documentTypeList.find(m=>m.id==r)?.name;return`Duplicate doc ${s} found`}return""}validateDocAlt(o,i){let l=[],r="";if(o.forEach(m=>{l.findIndex(y=>y.key.docId==m.documentTypeId&&y.key.identifier==m.identifier)>=0||i.findIndex(w=>w.docId==m.documentTypeId&&w.identifier==m.identifier)>=0?r=m.documentTypeId:l.push({key:{docId:m.documentTypeId,identifier:m.identifier},value:1})}),""!=r){var s=this.manageData.documentTypeList.find(m=>m.id==r)?.name;return`Duplicate doc ${s} with same identifier found`}return""}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(N.G),e.Y36(k.R),e.Y36(e.Qsj),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-employee"]],viewQuery:function(i,l){if(1&i&&(e.Gf(Le,5),e.Gf(Ue,5),e.Gf(Je,5)),2&i){let r;e.iGM(r=e.CRH())&&(l.profileUpload=r.first),e.iGM(r=e.CRH())&&(l.docUpload=r),e.iGM(r=e.CRH())&&(l.docName=r)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["type","button","mat-button","","color","primary",1,"col-4","offset-8",3,"click"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],[1,"row","my-2"],["type","button","mat-button","","color","primary","class","col-6",3,"click",4,"ngIf"],["type","button","mat-button","","color","primary",1,"",3,"ngClass","click"],["type","file","id","profileUpload","name","profileUpload","accept","image/*",2,"display","none"],["profileUpload",""],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],["class","col-2",3,"disabled",4,"ngIf"],[3,"value"],["type","button","mat-button","","color","primary",1,"col-6",3,"click"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary","class","col-3",3,"disabled","click",4,"ngIf"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"],[1,"col-2",3,"disabled"]],template:function(i,l){1&i&&(e.YNc(0,Se,2,0,"app-form-heading",0),e.YNc(1,Pe,77,13,"div",1)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.sg,_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,g.KE,g.hX,g.R9,I.Nt,A.lW,u.xY,Q.gD,Y.ey,le.Rr,Z.Mq,Z.hl,Z.nW,V.W,H.b,ae.E,L.H]}),t})();var K=p(5861);class Be{}class P extends Be{}var j=p(2944),ze=p(5);let We=(()=>{const a=class{constructor(o){this.http=o}getVerificationManageData(){return this.http.get(S.bU.getVerificationManageData)}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.LFG(ze.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),t})();function Xe(t,a){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Verify Employee\n"),e.qZA())}function et(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Remark"),e.qZA(),e._UZ(8,"input",8),e.qZA()()()(),e.TgZ(9,"div",4)(10,"button",9),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.notVerifyEmployee())}),e._uU(11," Not verifying now "),e.qZA(),e.TgZ(12,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.unverifyEmployee())}),e._uU(13," No, InCorrect "),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.verifyEmployee())}),e._uU(15," Yes, Correct "),e.qZA()()()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.manageForm)}}let tt=(()=>{const a=class{constructor(o,i,l,r){this.dialogRef=o,this.employeeService=i,this.verificationService=l,this.data=r,this.isLoaded=!1,this.isProcessing=!1}ngOnInit(){this.manageForm=new c.cw({remark:new c.NI(null),status:new c.NI(null)}),this.isLoaded=!1,this.sub=this.verificationService.getVerificationManageData().subscribe(o=>{this.manageData=o.item,this.manageForm.patchValue({remark:this.data.verification?.remark,status:this.data.verification?.status}),this.isLoaded=!0})}verifyEmployee(){if(!confirm("Yes, all data are correct"))return;let o=new P;o.employeeId=this.data?.id,o.remark=this.manageForm.value.remark,o.status=j.d.verified,this.sub=this.employeeService.verifyEmployee(o).subscribe(i=>{i?.status==T.s.success?(this.reset(),this.closeDialog()):alert(i?.message)})}unverifyEmployee(){if(!confirm("No, some correction required"))return;let o=new P;o.employeeId=this.data?.id,o.remark=this.manageForm.value.remark,o.status=j.d.pending,this.sub=this.employeeService.verifyEmployee(o).subscribe(i=>{i?.status==T.s.success?(this.reset(),this.closeDialog()):alert(i?.message)})}notVerifyEmployee(){if(!confirm("Not verifying now"))return;let o=new P;o.employeeId=this.data?.id,o.remark=this.manageForm.value.remark,o.status=j.d.unverified,this.sub=this.employeeService.verifyEmployee(o).subscribe(i=>{i?.status==T.s.success?(this.reset(),this.closeDialog()):alert(i?.message)})}reset(){this.manageForm.reset()}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(N.G),e.Y36(We),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-verify-employee"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row"],[1,"col-12"],[1,"row","form-group"],[1,"form-field","col-12"],["type","text","matInput","","formControlName","remark"],["type","button","mat-raised-button","","color","accent",1,"col-3","my-2",3,"click"],["type","button","mat-raised-button","","color","warn",1,"col-3","offset-1","my-2",3,"click"],["type","button","mat-raised-button","","color","primary",1,"offset-1","col-4","my-2",3,"click"]],template:function(i,l){1&i&&(e.YNc(0,Xe,2,0,"app-form-heading",0),e.YNc(1,et,16,1,"div",1)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,A.lW,u.xY,L.H]}),t})();var B=p(8064),G=p(7268),z=p(8922),ot=p(7392);let it=(()=>{const a=class{constructor(){this.verifyEvent=new E.x}verifyItem(){this.verifyEvent.next(this.item)}};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-verify-action-icon"]],inputs:{item:"item"},outputs:{verifyEvent:"verifyEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(i,l){1&i&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.verifyItem()}),e.TgZ(1,"mat-icon"),e._uU(2,"beenhere"),e.qZA()())},dependencies:[A.nh,ot.Hw]}),t})();function nt(t,a){if(1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.AsE(" ",null==n.employee||null==n.employee.person?null:n.employee.person.firstName," (",null==n.employee?null:n.employee.code,")\n")}}function at(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function lt(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function ct(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function rt(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function st(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function pt(t,a){if(1&t&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function mt(t,a){1&t&&(e.TgZ(0,"label",56),e._uU(1,"Doc Uploaded"),e.qZA())}function dt(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-view-action-icon",57),e.NdJ("viewEvent",function(i){e.CHM(n);const l=e.oxw(3);return e.KtG(l.viewDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().index;e.Q6J("item",n)}}function ut(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-download-action-icon",58),e.NdJ("downloadEvent",function(i){e.CHM(n);const l=e.oxw(3);return e.KtG(l.downloadDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().index;e.Q6J("item",n)}}function ft(t,a){if(1&t&&(e.TgZ(0,"div",42)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",43,44),e.YNc(7,pt,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",45),e.qZA(),e.TgZ(12,"mat-form-field",46)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",47)(16,"mat-datepicker-toggle",24)(17,"mat-datepicker",null,25),e.qZA(),e._UZ(19,"input",48,49)(21,"input",50,51),e.TgZ(23,"div",52),e.YNc(24,mt,2,0,"label",53),e.YNc(25,dt,1,1,"app-view-action-icon",54),e.YNc(26,ut,1,1,"app-download-action-icon",55),e.qZA()()()),2&t){const n=a.index,o=e.MAs(18),i=e.MAs(20),l=e.MAs(22),r=e.oxw(2);e.Q6J("formGroupName",n),e.xp6(7),e.Q6J("ngForOf",r.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(8),e.Q6J("ngIf",i.value.length>0&&l.value.length>0),e.xp6(1),e.Q6J("ngIf",i.value.length>0&&l.value.length>0&&r.allowExport),e.xp6(1),e.Q6J("ngIf",i.value.length>0&&l.value.length>0&&r.allowExport)}}function _t(t,a){if(1&t&&(e.TgZ(0,"label",59),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",null==n.employee||null==n.employee.verification?null:n.employee.verification.status,"")}}function ht(t,a){if(1&t&&(e.TgZ(0,"label",60),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",null==n.employee||null==n.employee.verification?null:n.employee.verification.status,"")}}function gt(t,a){1&t&&(e.TgZ(0,"label",60),e._uU(1,"Unverified"),e.qZA())}function yt(t,a){if(1&t&&(e.TgZ(0,"label",61),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",null==n.employee||null==n.employee.verification?null:n.employee.verification.status,"")}}function vt(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",null==n.employee||null==n.employee.verification?null:n.employee.verification.remark," ")}}function xt(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.AsE(" Verified by : ",null==n.employee||null==n.employee.verification?null:n.employee.verification.verifier," on ",null==n.employee||null==n.employee.verification?null:n.employee.verification.timestamp," ")}}function Et(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-verify-action-icon",62),e.NdJ("verifyEvent",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.verify(i.data))}),e.qZA()}if(2&t){const n=e.oxw(2);e.Q6J("item",n.data)}}function wt(t,a){if(1&t&&(e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,at,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,lt,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,ct,2,2,"mat-option",11),e.qZA()()(),e.TgZ(30,"div",16)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Work Site"),e.qZA(),e.TgZ(34,"mat-select",19),e.YNc(35,rt,2,2,"mat-option",11),e.qZA()()(),e.TgZ(36,"div",20)(37,"mat-form-field",17)(38,"mat-label"),e._uU(39,"Position"),e.qZA(),e.TgZ(40,"mat-select",21),e.YNc(41,st,2,2,"mat-option",11),e.qZA()()(),e.TgZ(42,"div",20)(43,"mat-form-field",22)(44,"mat-label"),e._uU(45,"Joining Date"),e.qZA(),e._UZ(46,"input",23)(47,"mat-datepicker-toggle",24)(48,"mat-datepicker",null,25),e.qZA()()()(),e.TgZ(50,"div",20)(51,"div",26)(52,"div",27),e._UZ(53,"img",28),e.qZA()()()(),e.TgZ(54,"div",4)(55,"div",27)(56,"div",29)(57,"div",30)(58,"div",20)(59,"label"),e._uU(60,"Document"),e.qZA()()(),e.TgZ(61,"div",31),e.YNc(62,ft,27,7,"div",32),e.qZA()(),e.TgZ(63,"div",4)(64,"mat-slide-toggle",33),e._uU(65,"Active"),e.qZA()()()(),e.TgZ(66,"div",34),e.YNc(67,_t,2,1,"label",35),e.YNc(68,ht,2,1,"label",36),e.YNc(69,gt,2,0,"label",36),e.YNc(70,yt,2,1,"label",37),e.TgZ(71,"label",38),e.YNc(72,vt,2,1,"span",0),e.qZA(),e.TgZ(73,"label",39),e.YNc(74,xt,2,2,"span",0),e.qZA(),e.YNc(75,Et,1,1,"app-verify-action-icon",40),e.qZA()()()),2&t){const n=e.MAs(49),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(9),e.Q6J("ngForOf",o.documentListControls),e.xp6(5),e.Q6J("ngIf","Verified"==(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(1),e.Q6J("ngIf","Unverified"==(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(1),e.Q6J("ngIf",null==(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(1),e.Q6J("ngIf","Pending"==(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(2),e.Q6J("ngIf","Unverified"!=(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(2),e.Q6J("ngIf","Unverified"!=(null==o.employee||null==o.employee.verification?null:o.employee.verification.status)),e.xp6(1),e.Q6J("ngIf",o.allowVerify)}}let Tt=(()=>{const a=class{constructor(o,i,l,r,s,m,f,y){this.dialogRef=o,this.menuRoleService=i,this.employeeService=l,this.ds=r,this.renderer=s,this.fileService=m,this.data=f,this.dialog=y,this.isLoaded=!1,this.profileSrc=null,this.allowExport=!1,this.allowVerify=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.export),this.allowVerify=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.edit),this.manageForm=new c.cw({person:new c.cw({firstName:new c.NI({value:null,disabled:!0}),gender:new c.NI({value:null,disabled:!0}),dob:new c.NI({value:null,disabled:!0})}),code:new c.NI({value:null,disabled:!0}),visaCompanyId:new c.NI({value:null,disabled:!0}),workingCompanyId:new c.NI({value:null,disabled:!0}),groupId:new c.NI({value:null,disabled:!0}),joiningDate:new c.NI({value:null,disabled:!0}),homeAddress:new c.cw({addressType:new c.NI({value:null,disabled:!0}),name:new c.NI({value:null,disabled:!0}),countryId:new c.NI({value:null,disabled:!0})}),documentList:new c.Oe([]),active:new c.NI({value:null,disabled:!0})}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,x.w)(o=>(this.manageData=o.item,this.employeeService.getEmployeeById(this.data?.id)))).subscribe(o=>{this.isLoaded=!0;let i=o.item;this.employee=o.item,this.profileSrc=null==i.profileUrl?q.O.profileEmptySrc:`${(0,S.SV)()}/profile/${i.profileUrl}`,this.manageForm.patchValue({person:{firstName:i.person.firstName,gender:i.person.gender,dob:i.person.dOB},code:i.code,visaCompanyId:i.visaCompany.id,workingCompanyId:i.workingCompany.id,groupId:i.group.id,joiningDate:this.ds.responseFormatToDate(i.joiningDate),homeAddress:{addressType:i.homeAddress.addressType,name:i.homeAddress.name,countryId:i.homeAddress.country.id},active:i.active}),i.documentList.forEach(l=>{let r=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new c.cw({id:new c.NI(l.id),documentTypeId:new c.NI({value:l.documentType.id,disabled:!0}),identifier:new c.NI({value:l.identifier,disabled:!0}),expiryDate:new c.NI({value:r,disabled:!0}),file:new c.NI(null),fileName:new c.NI(l.fileName)}))})})}viewDoc(o){var i=this;let r=this.manageForm.get("documentList").at(o).getRawValue().id;this.sub=this.employeeService.exportEmployeeDoc(r).subscribe(function(){var s=(0,K.Z)(function*(m){i.fileService.viewFile(m)});return function(m){return s.apply(this,arguments)}}())}downloadDoc(o){var i=this,l=this.manageForm.get("documentList").at(o);let r=l.getRawValue().id,s=l.getRawValue().identifier,m=this.manageData.documentTypeList.find(y=>y.id==l.getRawValue().documentTypeId),f=`${this.data.code}_${m.code}`;null!=s&&(f=`${f}_${s}`),this.sub=this.employeeService.exportEmployeeDoc(r).subscribe(function(){var y=(0,K.Z)(function*(w){i.fileService.downloadFile(w,f)});return function(w){return y.apply(this,arguments)}}())}verify(o){this.dialog.open(tt,{data:o,width:"50%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.dialogRef.close(!0)})}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(U.K),e.Y36(N.G),e.Y36(k.R),e.Y36(e.Qsj),e.Y36(B.I),e.Y36(u.WI),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-employee"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],["formArrayName","documentList"],[1,"row","my-4"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],[1,"row","mt-5"],["class","col-2 text-start text-success",4,"ngIf"],["class","col-2 text-start text-warning",4,"ngIf"],["class","col-2 text-start text-danger",4,"ngIf"],[1,"col-5","text-start"],[1,"col-4","text-start"],["class","col-1 text-end",3,"item","verifyEvent",4,"ngIf"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-6","mt-2"],["class","col-8 text-center",4,"ngIf"],["class","mx-4",3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],[1,"col-8","text-center"],[1,"mx-4",3,"item","viewEvent"],[3,"item","downloadEvent"],[1,"col-2","text-start","text-success"],[1,"col-2","text-start","text-warning"],[1,"col-2","text-start","text-danger"],[1,"col-1","text-end",3,"item","verifyEvent"]],template:function(i,l){1&i&&(e.YNc(0,nt,2,2,"app-form-heading",0),e.YNc(1,wt,76,17,"div",1)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.sg,_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,g.KE,g.hX,g.R9,I.Nt,u.xY,Q.gD,Y.ey,le.Rr,Z.Mq,Z.hl,Z.nW,G.R,z.e,L.H,it]}),t})();var Zt=p(9528);let Dt=(()=>{const a=class{constructor(o,i,l,r){this.dialogRef=o,this.employeeService=i,this.menuRoleService=l,this.data=r,this.isProcessing=!1,this.allowEdit=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.Fleet,v.k.edit),this.manageForm=new c.cw({code:new c.NI(this.data.code)})}editCode(){if(!this.allowEdit||!confirm(D.J.areYouSureTo))return;let o=new Zt.X;o.id=this.data.id,o.code=this.manageForm.value.code,this.isProcessing=!0,this.sub=this.employeeService.editEmployeeCode(o).subscribe(i=>{if(i.status!=T.s.success)return this.isProcessing=!1,void alert(i.message);this.closeDialog()})}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(N.G),e.Y36(U.K),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-employee-code"]],decls:14,vars:4,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,""],[1,"row","form-group"],[1,"form-field","col-12"],["type","text","matInput","","formControlName","code"],[1,"row"],[1,"col-4","offset-8",3,"disabled"]],template:function(i,l){1&i&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Employee Code\n"),e.qZA(),e.TgZ(2,"div",0)(3,"form",1),e.NdJ("submit",function(){return l.editCode()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Code New"),e.qZA(),e._UZ(11,"input",6),e.qZA()(),e.TgZ(12,"div",7),e._UZ(13,"app-crud-edit-button",8),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("formGroup",l.manageForm),e.xp6(3),e.AsE("",l.data.name," (",l.data.code,")"),e.xp6(7),e.Q6J("disabled",l.isProcessing))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,u.xY,V.W,L.H]}),t})();var W=p(7974),X=p(4521),Ct=p(6141),ee=p(1763);const It=["page"];function bt(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Name "),e.qZA())}function Nt(t,a){1&t&&e._UZ(0,"img",30)}function At(t,a){if(1&t&&e._UZ(0,"img",31),2&t){const n=e.oxw().$implicit,o=e.oxw();e.hYB("src","",o.baseUrl,"/profile/",n.profileUrl,"",e.LSH)}}function qt(t,a){1&t&&(e.TgZ(0,"span",32)(1,"i",33),e._uU(2,"verified_user"),e.qZA()())}function Lt(t,a){1&t&&(e.TgZ(0,"span",32)(1,"i",34),e._uU(2,"verified_user"),e.qZA()())}function Ut(t,a){1&t&&(e.TgZ(0,"span",32)(1,"i",35),e._uU(2,"verified_user"),e.qZA()())}function Jt(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,Nt,1,0,"img",26),e.YNc(2,At,1,2,"img",27),e.YNc(3,qt,3,0,"span",28),e.YNc(4,Lt,3,0,"span",28),e.YNc(5,Ut,3,0,"span",28),e.TgZ(6,"app-active-text",29),e._uU(7),e.qZA()()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",null==n.profileUrl),e.xp6(1),e.Q6J("ngIf",null!=n.profileUrl),e.xp6(1),e.Q6J("ngIf","Verified"==n.verificationStatus),e.xp6(1),e.Q6J("ngIf","Unverified"==n.verificationStatus),e.xp6(1),e.Q6J("ngIf","Pending"==n.verificationStatus),e.xp6(1),e.Q6J("active",n.active),e.xp6(1),e.Oqu(n.name)}}function St(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Code "),e.qZA())}function Ft(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"td",36),e.NdJ("click",function(){const l=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.editCode(l))}),e._uU(1),e.qZA()}if(2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.code," ")}}function kt(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Visa Company (Work Site) "),e.qZA())}function Qt(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE("",n.visaCompany," (",n.workingCompany,")")}}function Yt(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij("",n.visaCompany," (same)")}}function Kt(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,Qt,2,2,"span",37),e.YNc(2,Yt,2,1,"span",37),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.visaCompany!=n.workingCompany),e.xp6(1),e.Q6J("ngIf",n.visaCompany==n.workingCompany)}}function Rt(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Profession "),e.qZA())}function Mt(t,a){if(1&t&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.group," ")}}function Ot(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Nationality "),e.qZA())}function Gt(t,a){if(1&t&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.nationality," ")}}function Ht(t,a){1&t&&(e.TgZ(0,"th",24),e._uU(1," Joining Date "),e.qZA())}function $t(t,a){if(1&t&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.joiningDate," ")}}function Vt(t,a){1&t&&(e.TgZ(0,"th",24)(1,"i",39),e._uU(2,"attachment"),e.qZA(),e._uU(3," / "),e.TgZ(4,"i",39),e._uU(5,"description"),e.qZA()())}function Pt(t,a){if(1&t&&(e.TgZ(0,"span",44),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE("",n.fileCount,"/",n.docCount,"")}}function jt(t,a){if(1&t&&(e.TgZ(0,"span",45),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE("",n.fileCount,"/",n.docCount,"")}}function Bt(t,a){if(1&t&&(e.TgZ(0,"span",46),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE("",n.fileCount,"/",n.docCount,"")}}function zt(t,a){if(1&t&&(e.TgZ(0,"td",40),e.YNc(1,Pt,2,2,"span",41),e.YNc(2,jt,2,2,"span",42),e.YNc(3,Bt,2,2,"span",43),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",0==n.docCount),e.xp6(1),e.Q6J("ngIf",n.fileCount==n.docCount&&n.docCount>0),e.xp6(1),e.Q6J("ngIf",n.fileCount<n.docCount&&n.docCount>0)}}function Wt(t,a){1&t&&e._UZ(0,"th",47)}function Xt(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-edit-action-icon",52),e.NdJ("editEvent",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.edit(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function eo(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-delete-action-icon",53),e.NdJ("deleteEvent",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.delete(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function to(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"td",48)(1,"app-view-action-icon",49),e.NdJ("viewEvent",function(){const l=e.CHM(n).$implicit,r=e.oxw();return e.KtG(r.view(l))}),e.qZA(),e.YNc(2,Xt,1,1,"app-edit-action-icon",50),e.YNc(3,eo,1,1,"app-delete-action-icon",51),e.qZA()}if(2&t){const n=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("item",n),e.xp6(1),e.Q6J("ngIf",o.allowEdit),e.xp6(1),e.Q6J("ngIf",o.allowDelete)}}function oo(t,a){1&t&&e._UZ(0,"tr",54)}function io(t,a){1&t&&e._UZ(0,"tr",55)}const no=function(){return[10,20,50]};let ao=(()=>{const a=class{constructor(o,i){this.menuRoleService=o,this.dialog=i,this.moreEvent=new E.x,this.editEvent=new E.x,this.verifyEvent=new E.x,this.deleteEvent=new E.x,this.displayedColumns=["name","code","company","group","nationality","joiningDate","d/f","manage"],this.baseUrl=(0,S.SV)(),this.allowEdit=!1,this.allowDelete=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.delete)}ngOnChanges(o){this.employeeList.paginator=this.paginator}ngAfterViewInit(){this.employeeList.paginator=this.paginator}more(){this.moreEvent.next(!0)}edit(o){this.dialog.open(je,{data:o,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editEvent.next()})}view(o){this.dialog.open(Tt,{data:o,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.verifyEvent.next()})}delete(o){this.deleteEvent.next(o)}editCode(o){this.dialog.open(Dt,{data:o,width:"20%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editEvent.next()})}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(U.K),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-list"]],viewQuery:function(i,l){if(1&i&&e.Gf(It,5),2&i){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{employeeList:"employeeList",count:"count"},outputs:{moreEvent:"moreEvent",editEvent:"editEvent",verifyEvent:"verifyEvent",deleteEvent:"deleteEvent"},features:[e.TTD],decls:33,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","code"],["mat-cell","","class","col-1",3,"click",4,"matCellDef"],["matColumnDef","company"],["matColumnDef","group"],["matColumnDef","nationality"],["mat-cell","","class","col-1",4,"matCellDef"],["matColumnDef","joiningDate"],["matColumnDef","d/f"],["mat-cell","","class","","style","width: 6rem;",4,"matCellDef"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-end","style","width: 16rem;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],["class","ms-3",4,"ngIf"],[1,"ms-2",3,"active"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],[1,"ms-3"],[1,"material-icons","text-success"],[1,"material-icons","text-warning"],[1,"material-icons","text-danger"],["mat-cell","",1,"col-1",3,"click"],[4,"ngIf"],["mat-cell","",1,"col-1"],[1,"material-icons"],["mat-cell","",1,"",2,"width","6rem"],["class","bg-warn p-1 rounded-pill text-white",4,"ngIf"],["class","bg-success p-1 rounded-pill text-white",4,"ngIf"],["class","bg-accent p-1 rounded-pill",4,"ngIf"],[1,"bg-warn","p-1","rounded-pill","text-white"],[1,"bg-success","p-1","rounded-pill","text-white"],[1,"bg-accent","p-1","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"text-end",2,"width","16rem"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","deleteEvent"],["mat-header-row",""],["mat-row",""]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,bt,2,0,"th",3),e.YNc(4,Jt,8,7,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,St,2,0,"th",3),e.YNc(7,Ft,2,1,"td",6),e.BQk(),e.ynx(8,7),e.YNc(9,kt,2,0,"th",3),e.YNc(10,Kt,3,2,"td",4),e.BQk(),e.ynx(11,8),e.YNc(12,Rt,2,0,"th",3),e.YNc(13,Mt,2,1,"td",4),e.BQk(),e.ynx(14,9),e.YNc(15,Ot,2,0,"th",3),e.YNc(16,Gt,2,1,"td",10),e.BQk(),e.ynx(17,11),e.YNc(18,Ht,2,0,"th",3),e.YNc(19,$t,2,1,"td",10),e.BQk(),e.ynx(20,12),e.YNc(21,Vt,6,0,"th",3),e.YNc(22,zt,4,3,"td",13),e.BQk(),e.ynx(23,14),e.YNc(24,Wt,1,0,"th",15),e.YNc(25,to,4,3,"td",16),e.BQk(),e.YNc(26,oo,1,0,"tr",17),e.YNc(27,io,1,0,"tr",18),e.qZA(),e._UZ(28,"mat-paginator",19,20),e.qZA(),e.TgZ(30,"div",21)(31,"div",22)(32,"app-server-pagination",23),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("dataSource",l.employeeList),e.xp6(25),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,no)),e.xp6(4),e.Q6J("loaded",l.employeeList.data.length)("count",l.count))},dependencies:[_.O5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,W.NW,X.H,Ct.j,H.b,ee.p,G.R]}),t})();function lo(t,a){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function co(t,a){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function ro(t,a){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}let so=(()=>{const a=class{constructor(){this.onSearchChange=new E.x,this.onSearch=new E.x}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),companyId:new c.NI(""),groupId:new c.NI(""),countryId:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(o=>{this.onSearchChange.next(o)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",groupId:"",countryId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","countryId"],["formControlName","groupId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(i,l){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Company"),e.qZA(),e.TgZ(7,"mat-select",4)(8,"mat-option",5),e._uU(9,"All"),e.qZA(),e.YNc(10,lo,2,2,"mat-option",6),e.qZA()(),e.TgZ(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Nationality"),e.qZA(),e.TgZ(14,"mat-select",8)(15,"mat-option",5),e._uU(16,"All"),e.qZA(),e.YNc(17,co,2,2,"mat-option",6),e.qZA()(),e.TgZ(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"Profession"),e.qZA(),e.TgZ(21,"mat-select",9)(22,"mat-option",5),e._uU(23,"All"),e.qZA(),e.YNc(24,ro,2,2,"mat-option",6),e.qZA()(),e.TgZ(25,"mat-form-field",10)(26,"mat-label"),e._uU(27,"Search"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"div",12)(30,"button",13)(31,"i",14),e._uU(32,"search"),e.qZA(),e._uU(33," Search"),e.qZA()()()()),2&i&&(e.Q6J("formGroup",l.filterForm),e.xp6(10),e.Q6J("ngForOf",l.searchData.companyList),e.xp6(7),e.Q6J("ngForOf",l.searchData.countryList),e.xp6(7),e.Q6J("ngForOf",l.searchData.groupList))},dependencies:[_.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,A.lW,Q.gD,Y.ey]}),t})();const po=["employeeImport"];function mo(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-employee-search-filter",3),e.NdJ("onSearchChange",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.changeSearchData(i))})("onSearch",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("searchData",n.searchData)}}function uo(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-import-button",9),e.NdJ("importEvent",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.importEmployee())}),e.qZA()}}function fo(t,a){1&t&&e._UZ(0,"input",10,11)}function _o(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-add-button",12),e.NdJ("addEvent",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.addEmployee())}),e.qZA()}if(2&t){const n=e.oxw(2);e.Q6J("ngClass",0==n.allowImport?"offset-9":"offset-0")}}function ho(t,a){if(1&t&&(e.TgZ(0,"div",4)(1,"app-table-heading",5),e._uU(2," Employee "),e.qZA(),e.YNc(3,uo,1,0,"app-import-button",6),e.YNc(4,fo,2,0,"input",7),e.YNc(5,_o,1,1,"app-add-button",8),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.allowImport),e.xp6(1),e.Q6J("ngIf",n.allowImport),e.xp6(1),e.Q6J("ngIf",n.allowAdd)}}function go(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-employee-list",13),e.NdJ("moreEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())})("editEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.editEmployee())})("deleteEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.deleteEmployee(i))})("verifyEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.verifyEmployee())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("employeeList",n.dataSource)("count",n.count)}}let yo=(()=>{const a=class{constructor(o,i,l){this.menuRoleService=o,this.employeeService=i,this.dialog=l,this.isLoaded=!1,this.req=new be.p,this.eList=[],this.count=0,this.allowAdd=!1,this.allowImport=!1,this.viewEmployeeDoc=!1,this.viewEmployeeDocKeep=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeService.getEmployeeSearchData().pipe((0,x.w)(o=>(this.searchData=o.item,this.isLoaded=!0,this.dataSource=new d.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.add),this.allowImport=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.import),this.viewEmployeeDoc=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDoc,v.k.view),this.viewEmployeeDocKeep=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDocKeep,v.k.view),this.employeeService.getEmployeeList(this.req)))).subscribe(o=>{this.update(o)})}ngAfterViewInit(){}changeSearchData(o){console.log(o),this.eList=[],this.dataSource=new d.by(this.eList),this.req.searchKey=o.searchKey,this.req.companyId=""!=o.companyId?o.companyId:null,this.req.groupId=""!=o.groupId?o.groupId:null,this.req.countryId=""!=o.countryId?o.countryId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new d.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(o){o?.response?.status==T.s.success&&(this.eList.push.apply(this.eList,o.list),this.dataSource=new d.by(this.eList),this.count=o.totalRecords,o.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.employeeService.getEmployeeList(this.req).subscribe(o=>{this.update(o)})}addEmployee(){this.dialog.open(Ie,{data:null,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(i=>{1==i&&this.refreshList()})}editEmployee(){this.refreshList()}deleteEmployee(o){confirm(D.J.confirmDelete(o.name))&&(this.sub=this.employeeService.deleteEmployee(o.id).subscribe(i=>{i?.status==T.s.success?this.refreshList():alert(i?.message)}))}verifyEmployee(){this.refreshList()}importEmployee(){const o=this.employeeImport.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const i=o.files[0];if(!confirm(D.J.areYouSureTo))return void(o.value="");const l=new FormData;l.append("file",i),this.importSub=this.employeeService.importEmployee(l).subscribe(r=>{alert(JSON.stringify(r)),this.refreshList()})}},o.click()}ngOnDestroy(){this.sub?.unsubscribe(),this.importSub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(U.K),e.Y36(N.G),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee"]],viewQuery:function(i,l){if(1&i&&e.Gf(po,5),2&i){let r;e.iGM(r=e.CRH())&&(l.employeeImport=r.first)}},decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"employeeList","count","moreEvent","editEvent","deleteEvent","verifyEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],[1,"col-2"],["class","col-1 offset-8",3,"importEvent",4,"ngIf"],["type","file","id","employeeImport","name","employeeImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","style","display: none;",4,"ngIf"],["class","col-1",3,"ngClass","addEvent",4,"ngIf"],[1,"col-1","offset-8",3,"importEvent"],["type","file","id","employeeImport","name","employeeImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",2,"display","none"],["employeeImport",""],[1,"col-1",3,"ngClass","addEvent"],[3,"employeeList","count","moreEvent","editEvent","deleteEvent","verifyEvent"]],template:function(i,l){1&i&&(e.YNc(0,mo,1,1,"app-employee-search-filter",0),e.YNc(1,ho,6,3,"div",1),e.YNc(2,go,1,2,"app-employee-list",2)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.O5,Ne.L,Ae.x,$.u,ao,so]}),t})();var ce=p(1635),re=p(6212);class vo extends re.G{}var R=p(538);function xo(t,a){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Eo(t,a){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function wo(t,a){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}let To=(()=>{const a=class{constructor(){this.onSearchChange=new E.x,this.onSearch=new E.x}ngOnInit(){this.filterForm=new c.cw({searchKey:new c.NI(""),companyId:new c.NI(""),docTypeId:new c.NI(""),mode:new c.NI(4,[c.kI.required]),expiryDays:new c.NI(null)}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(o=>{this.onSearchChange.next(o)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",docTypeId:"",mode:4,expiryDays:null})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-doc-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:36,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","mt-2",3,"click"],["appearance","outline","floatLabel","always",1,"form-field","col-1"],["type","number","placeholder","","matInput","","formControlName","expiryDays"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","docTypeId"],["formControlName","mode"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(i,l){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Expire In"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Company"),e.qZA(),e.TgZ(11,"mat-select",6)(12,"mat-option",7),e._uU(13,"All"),e.qZA(),e.YNc(14,xo,2,2,"mat-option",8),e.qZA()(),e.TgZ(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Doc Type"),e.qZA(),e.TgZ(18,"mat-select",10)(19,"mat-option",7),e._uU(20,"All"),e.qZA(),e.YNc(21,Eo,2,2,"mat-option",8),e.qZA()(),e.TgZ(22,"mat-form-field",9)(23,"mat-label"),e._uU(24,"Mode"),e.qZA(),e.TgZ(25,"mat-select",11),e.YNc(26,wo,2,2,"mat-option",8),e.qZA()(),e.TgZ(27,"mat-form-field",12)(28,"mat-label"),e._uU(29,"Search"),e.qZA(),e._UZ(30,"input",13),e.qZA(),e.TgZ(31,"div",14)(32,"button",15)(33,"i",16),e._uU(34,"search"),e.qZA(),e._uU(35," Search"),e.qZA()()()()),2&i&&(e.Q6J("formGroup",l.filterForm),e.xp6(14),e.Q6J("ngForOf",l.searchData.companyList),e.xp6(7),e.Q6J("ngForOf",l.searchData.docTypeList),e.xp6(5),e.Q6J("ngForOf",l.searchData.searchModeList))},dependencies:[_.sg,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,A.lW,Q.gD,Y.ey]}),t})();var se=p(7358);function Zo(t,a){if(1&t&&e._UZ(0,"app-crud-edit-button",13),2&t){const n=e.oxw();e.Q6J("disabled",n.isProcessing)}}let Do=(()=>{const a=class{constructor(o,i,l,r){this.dialogRef=o,this.employeeDocService=i,this.ds=l,this.data=r,this.isProcessing=!1}ngOnInit(){let o=null!=this.data.expiryDate?this.ds.responseFormatToDate(this.data.expiryDate):null;this.manageForm=new c.cw({id:new c.NI(this.data.id),identifier:new c.NI(this.data.identifier),expiryDate:new c.NI(o)})}editEmployeeDoc(){if(!confirm(D.J.areYouSureTo))return;let o=new se.w;o.id=this.manageForm.value.id,o.identifier=this.manageForm.value.identifier,o.expiryDate=this.ds.formatToRequest(this.manageForm.value.expiryDate),this.isProcessing=!0,this.sub=this.employeeDocService.editEmployeeDoc(o).subscribe(i=>{if(i.status!=T.s.success)return this.isProcessing=!1,void alert(i.message);this.closeDialog()})}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(R.L),e.Y36(k.R),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-employee-doc"]],decls:21,vars:7,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,""],[1,"row","form-group"],[1,"form-field","col-6"],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-6","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row"],["class","col-2 offset-10",3,"disabled",4,"ngIf"],[1,"col-2","offset-10",3,"disabled"]],template:function(i,l){if(1&i&&(e.TgZ(0,"app-form-heading"),e._uU(1),e.qZA(),e.TgZ(2,"div",0)(3,"form",1),e.NdJ("submit",function(){return l.editEmployeeDoc()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Expiry (dd/mm/yyyy)"),e.qZA(),e._UZ(15,"input",8)(16,"mat-datepicker-toggle",9)(17,"mat-datepicker",null,10),e.qZA()(),e.TgZ(19,"div",11),e.YNc(20,Zo,1,1,"app-crud-edit-button",12),e.qZA()()()),2&i){const r=e.MAs(18);e.xp6(1),e.hij(" Edit Doc : ",l.data.documentType.name,"\n"),e.xp6(2),e.Q6J("formGroup",l.manageForm),e.xp6(3),e.AsE("",l.data.employee.name," (",l.data.employee.code,")"),e.xp6(9),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(4),e.Q6J("ngIf",null!=l.data)}},dependencies:[_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,g.R9,I.Nt,u.xY,Z.Mq,Z.hl,Z.nW,V.W,L.H]}),t})();var Co=p(6464);const Io=["docUpload"],bo=["docName"];function No(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onDocRemove())}),e._uU(1,"Remove File"),e.qZA()}}let Ao=(()=>{const a=class{constructor(o,i,l,r,s,m){this.dialogRef=o,this.employeeDocService=i,this.employeeService=l,this.ds=r,this.renderer=s,this.data=m,this.isProcessing=!1}ngOnInit(){let o=null!=this.data.expiryDate?this.ds.responseFormatToDate(this.data.expiryDate):null;this.manageForm=new c.cw({id:new c.NI(this.data.id),identifier:new c.NI({value:this.data.identifier,disabled:!0}),expiryDate:new c.NI({value:o,disabled:!0}),file:new c.NI(null)})}onDocSelect(){let o=this.docUpload.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const i=o.files[0];this.renderer.setProperty(this.docName.nativeElement,"textContent",i.name),this.manageForm.patchValue({file:i})}},o.click()}onDocRemove(){this.docUpload.nativeElement.value="",this.renderer.setProperty(this.docName.nativeElement,"textContent",""),this.manageForm.patchValue({file:null})}attachEmployeeDocFile(){if(!confirm(D.J.areYouSure+" to attach doc file ?"))return;new se.w,this.isProcessing=!0;const i=new FormData;i.append("doc",this.manageForm.value.file),this.sub=this.employeeService.addEmployeeDocById(this.data.id,i).subscribe(l=>{if(l.status!=T.s.success)return this.isProcessing=!1,void alert(l.message);this.closeDialog()})}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(R.L),e.Y36(N.G),e.Y36(k.R),e.Y36(e.Qsj),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attach-employee-doc"]],viewQuery:function(i,l){if(1&i&&(e.Gf(Io,5),e.Gf(bo,5)),2&i){let r;e.iGM(r=e.CRH())&&(l.docUpload=r.first),e.iGM(r=e.CRH())&&(l.docName=r.first)}},decls:31,vars:8,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row","mb-4"],[1,""],[1,"row","form-group"],[1,"form-field","col-6"],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-6","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-12","mt-2"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"row"],[1,"col-2","offset-10",3,"disabled"]],template:function(i,l){if(1&i&&(e.TgZ(0,"app-form-heading"),e._uU(1),e.qZA(),e.TgZ(2,"div",0)(3,"form",1),e.NdJ("submit",function(){return l.attachEmployeeDocFile()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Expiry (dd/mm/yyyy)"),e.qZA(),e._UZ(15,"input",8)(16,"mat-datepicker-toggle",9)(17,"mat-datepicker",null,10),e.qZA()(),e.TgZ(19,"div",4)(20,"div",11)(21,"button",12),e.NdJ("click",function(){return l.onDocSelect()}),e._uU(22,"Select File"),e.qZA(),e._UZ(23,"input",13,14)(25,"label",15,16),e.YNc(27,No,2,0,"button",17),e.qZA()(),e.TgZ(28,"div",18)(29,"app-crud-button",19),e._uU(30,"Attach"),e.qZA()()()()),2&i){const r=e.MAs(18),s=e.MAs(26);e.xp6(1),e.hij(" Attach Doc File : ",l.data.documentType.name,"\n"),e.xp6(2),e.Q6J("formGroup",l.manageForm),e.xp6(3),e.AsE("",l.data.employee.name," (",l.data.employee.code,")"),e.xp6(9),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(11),e.Q6J("ngIf",""!=s.textContent),e.xp6(2),e.Q6J("disabled",l.isProcessing||""==s.textContent)}},dependencies:[_.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,g.R9,I.Nt,A.lW,u.xY,Z.Mq,Z.hl,Z.nW,Co.X,L.H]}),t})();var qo=p(5894);const Lo=["page"];function Uo(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," DocType "),e.qZA())}function Jo(t,a){1&t&&(e.TgZ(0,"span",25)(1,"i",26),e._uU(2,"attachment"),e.qZA()())}function So(t,a){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.YNc(2,Jo,3,0,"span",24),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.documentType.name," "),e.xp6(1),e.Q6J("ngIf",null!=n.fileName)}}function Fo(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," Identifier "),e.qZA())}function ko(t,a){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.identifier," ")}}function Qo(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," Expiry (Days) "),e.qZA())}function Yo(t,a){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.AsE(" ",n.expiryDate," (",n.expiryDays,") ")}}function Ko(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," Name "),e.qZA())}function Ro(t,a){1&t&&e._UZ(0,"img",31)}function Mo(t,a){if(1&t&&e._UZ(0,"img",32),2&t){const n=e.oxw().$implicit,o=e.oxw();e.hYB("src","",o.baseUrl,"/profile/",n.employee.profileUrl,"",e.LSH)}}function Oo(t,a){if(1&t&&(e.TgZ(0,"td",27),e.YNc(1,Ro,1,0,"img",28),e.YNc(2,Mo,1,2,"img",29),e.TgZ(3,"span",30),e._uU(4),e.qZA()()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",null==n.employee.profileUrl),e.xp6(1),e.Q6J("ngIf",null!=n.employee.profileUrl),e.xp6(2),e.AsE("",n.employee.name," (",n.employee.code,")")}}function Go(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," Work Site "),e.qZA())}function Ho(t,a){if(1&t&&(e.TgZ(0,"td",33),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.employee.workingCompany," ")}}function $o(t,a){1&t&&(e.TgZ(0,"th",22),e._uU(1," Status "),e.qZA())}function Vo(t,a){1&t&&(e.TgZ(0,"span",37),e._uU(1,"Valid"),e.qZA())}function Po(t,a){1&t&&(e.TgZ(0,"span",38),e._uU(1,"Expired"),e.qZA())}function jo(t,a){1&t&&(e.TgZ(0,"span",39),e._uU(1,"Near Expiry"),e.qZA())}function Bo(t,a){if(1&t&&(e.TgZ(0,"td",23),e.YNc(1,Vo,2,0,"span",34),e.YNc(2,Po,2,0,"span",35),e.YNc(3,jo,2,0,"span",36),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",1==n.valid),e.xp6(1),e.Q6J("ngIf",1==n.expired),e.xp6(1),e.Q6J("ngIf",1==n.nearExpiry)}}function zo(t,a){1&t&&e._UZ(0,"th",40)}function Wo(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-edit-action-icon",47),e.NdJ("editEvent",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.editDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function Xo(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-view-action-icon",48),e.NdJ("viewEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.viewDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function ei(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-download-action-icon",49),e.NdJ("downloadEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.downloadDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function ti(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-action-icon",50),e.NdJ("actionEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.removeDocFile(i))}),e._uU(1,"attach_file_off"),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function oi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-action-icon",51),e.NdJ("actionEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.attachDocFile(i))}),e._uU(1,"attach_file"),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function ii(t,a){if(1&t&&(e.TgZ(0,"td",41),e.YNc(1,Wo,1,1,"app-edit-action-icon",42),e.YNc(2,Xo,1,1,"app-view-action-icon",43),e.YNc(3,ei,1,1,"app-download-action-icon",44),e.YNc(4,ti,2,1,"app-action-icon",45),e.YNc(5,oi,2,1,"app-action-icon",46),e.qZA()),2&t){const n=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.allowEdit),e.xp6(1),e.Q6J("ngIf",null!=n.fileName&&o.allowExport),e.xp6(1),e.Q6J("ngIf",null!=n.fileName&&o.allowExport),e.xp6(1),e.Q6J("ngIf",null!=n.fileName&&o.allowDelete),e.xp6(1),e.Q6J("ngIf",null==n.fileName&&o.allowEdit)}}function ni(t,a){1&t&&e._UZ(0,"tr",52)}function ai(t,a){1&t&&e._UZ(0,"tr",53)}const li=function(){return[10,20,50]};let ci=(()=>{const a=class{constructor(o,i){this.menuRoleService=o,this.dialog=i,this.moreEvent=new E.x,this.displayedColumns=["docType","identifier","expiryDate","name","company","status","manage"],this.baseUrl=(0,S.SV)(),this.allowDelete=!1,this.allowEdit=!1,this.allowExport=!1,this.viewDocEvent=new E.x,this.downloadDocEvent=new E.x,this.removeDocFileEvent=new E.x,this.editDocEvent=new E.x}ngOnInit(){this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDoc,v.k.delete),this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDoc,v.k.edit),this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDoc,v.k.export)}ngOnChanges(o){this.employeeDocList.paginator=this.paginator}ngAfterViewInit(){this.employeeDocList.paginator=this.paginator}more(){this.moreEvent.next(!0)}viewDoc(o){this.viewDocEvent.next(o)}downloadDoc(o){this.downloadDocEvent.next(o)}removeDocFile(o){this.removeDocFileEvent.next(o)}attachDocFile(o){this.dialog.open(Ao,{data:o,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editDocEvent.next()})}editDoc(o){this.dialog.open(Do,{data:o,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editDocEvent.next()})}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(U.K),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-doc-list"]],viewQuery:function(i,l){if(1&i&&e.Gf(Lo,5),2&i){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{employeeDocList:"employeeDocList",count:"count"},outputs:{moreEvent:"moreEvent",viewDocEvent:"viewDocEvent",downloadDocEvent:"downloadDocEvent",removeDocFileEvent:"removeDocFileEvent",editDocEvent:"editDocEvent"},features:[e.TTD],decls:30,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","docType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","identifier"],["matColumnDef","expiryDate"],["matColumnDef","name"],["mat-cell","","class","col-3",4,"matCellDef"],["matColumnDef","company"],["mat-cell","","class","col-2",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["class","ms-3",4,"ngIf"],[1,"ms-3"],[1,"material-icons","text-success"],["mat-cell","",1,"col-3"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],[1,"ms-2"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-cell","",1,"col-2"],["class","bg-success p-2 text-light rounded-pill",4,"ngIf"],["class","bg-warn p-2 text-light rounded-pill",4,"ngIf"],["class","bg-accent p-2 text-dark rounded-pill",4,"ngIf"],[1,"bg-success","p-2","text-light","rounded-pill"],[1,"bg-warn","p-2","text-light","rounded-pill"],[1,"bg-accent","p-2","text-dark","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[3,"item","editEvent",4,"ngIf"],[3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],["color","accent",3,"item","actionEvent",4,"ngIf"],[3,"item","actionEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","viewEvent"],[3,"item","downloadEvent"],["color","accent",3,"item","actionEvent"],[3,"item","actionEvent"],["mat-header-row",""],["mat-row",""]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,Uo,2,0,"th",3),e.YNc(4,So,3,2,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,Fo,2,0,"th",3),e.YNc(7,ko,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,Qo,2,0,"th",3),e.YNc(10,Yo,2,2,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,Ko,2,0,"th",3),e.YNc(13,Oo,5,4,"td",8),e.BQk(),e.ynx(14,9),e.YNc(15,Go,2,0,"th",3),e.YNc(16,Ho,2,1,"td",10),e.BQk(),e.ynx(17,11),e.YNc(18,$o,2,0,"th",3),e.YNc(19,Bo,4,3,"td",4),e.BQk(),e.ynx(20,12),e.YNc(21,zo,1,0,"th",13),e.YNc(22,ii,6,5,"td",14),e.BQk(),e.YNc(23,ni,1,0,"tr",15),e.YNc(24,ai,1,0,"tr",16),e.qZA(),e._UZ(25,"mat-paginator",17,18),e.qZA(),e.TgZ(27,"div",19)(28,"div",20)(29,"app-server-pagination",21),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("dataSource",l.employeeDocList),e.xp6(22),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,li)),e.xp6(4),e.Q6J("loaded",l.employeeDocList.data.length)("count",l.count))},dependencies:[_.O5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,W.NW,X.H,ee.p,G.R,z.e,qo.m]}),t})();function ri(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-employee-doc-search-filter",3),e.NdJ("onSearchChange",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.changeSearchData(i))})("onSearch",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("searchData",n.searchData)}}function si(t,a){1&t&&(e.TgZ(0,"div",4)(1,"app-table-heading",5),e._uU(2," Employee Doc "),e.qZA()())}function pi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-employee-doc-list",6),e.NdJ("moreEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())})("viewDocEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.viewDoc(i))})("downloadDocEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.downloadDoc(i))})("removeDocFileEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.removeDocFile(i))})("editDocEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.refreshList())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("employeeDocList",n.dataSource)("count",n.count)}}let mi=(()=>{const a=class{constructor(o,i,l,r){this.employeeDocService=o,this.employeeService=i,this.fileService=l,this.menuRoleService=r,this.isLoaded=!1,this.req=new vo,this.eList=[],this.count=0,this.viewPeople=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeDocService.getEmployeeDocSearchData().pipe((0,x.w)(o=>(this.searchData=o.item,this.isLoaded=!0,this.dataSource=new d.by(this.eList),this.req.pagination.pageSize=10,this.employeeDocService.getEmployeeDocList(this.req)))).subscribe(o=>{this.viewPeople=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.view),this.update(o)})}ngAfterViewInit(){}changeSearchData(o){console.log(o),this.eList=[],this.dataSource=new d.by(this.eList),this.req.searchKey=o.searchKey,this.req.companyId=""!=o.companyId?o.companyId:null,this.req.docTypeId=""!=o.docTypeId?o.docTypeId:null,this.req.mode=o.mode,this.req.expiryDays=o.expiryDays,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new d.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(o){o?.response?.status==T.s.success&&(this.eList.push.apply(this.eList,o.list),this.dataSource=new d.by(this.eList),this.count=o.totalRecords,o.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.employeeDocService.getEmployeeDocList(this.req).subscribe(o=>{this.update(o)})}viewDoc(o){var i=this;this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var l=(0,K.Z)(function*(r){i.fileService.viewFile(r)});return function(r){return l.apply(this,arguments)}}())}downloadDoc(o){var i=this;let l=this.searchData.docTypeList.find(s=>s.id==o.documentType.id),r=`${o.employee.code}_${l.code}`;null!=o.identifier&&(r=`${r}_${o.identifier}`),this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var s=(0,K.Z)(function*(m){i.fileService.downloadFile(m,r)});return function(m){return s.apply(this,arguments)}}())}removeDocFile(o){confirm(D.J.confirmRemove("file"))&&(this.sub=this.employeeDocService.removeEmployeeDocFile(o.id).subscribe(i=>{this.refreshList()}))}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(R.L),e.Y36(N.G),e.Y36(B.I),e.Y36(U.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-doc"]],decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"employeeDocList","count","moreEvent","viewDocEvent","downloadDocEvent","removeDocFileEvent","editDocEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],[1,"col-6"],[3,"employeeDocList","count","moreEvent","viewDocEvent","downloadDocEvent","removeDocFileEvent","editDocEvent"]],template:function(i,l){1&i&&(e.YNc(0,ri,1,1,"app-employee-doc-search-filter",0),e.YNc(1,si,3,0,"div",1),e.YNc(2,pi,1,2,"app-employee-doc-list",2)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.O5,$.u,To,ci]}),t})();class di extends re.G{}class pe{}let ui=(()=>{const a=class{constructor(o,i,l,r){this.dialogRef=o,this.employeeDocService=i,this.ds=l,this.data=r,this.isProcessing=!1,this.baseUrl=(0,S.SV)()}ngOnInit(){null!=this.data.timestamp&&this.ds.responseFormatToDate(this.data.timestamp),this.manageForm=new c.cw({remark:new c.NI(null)})}notMarking(){confirm(D.J.areYouSureTo)&&(this.isProcessing=!0,this.sub=this.employeeDocService.deleteEmployeeDocKeep(this.data.id).subscribe(o=>{if(o.status!=T.s.success)return this.isProcessing=!1,void alert(o.message);this.closeDialog()}))}notKeep(){if(!confirm(D.J.areYouSureTo))return;let o=new pe;o.id=this.data.id,o.remark=this.manageForm.value.remark,o.keepCompany=!1,this.isProcessing=!0,this.sub=this.employeeDocService.keepEmployeeDoc(o).subscribe(i=>{if(i.status!=T.s.success)return this.isProcessing=!1,void alert(i.message);this.closeDialog()})}keep(){if(!confirm(D.J.areYouSureTo))return;let o=new pe;o.id=this.data.id,o.remark=this.manageForm.value.remark,o.keepCompany=!0,this.isProcessing=!0,this.sub=this.employeeDocService.keepEmployeeDoc(o).subscribe(i=>{if(i.status!=T.s.success)return this.isProcessing=!1,void alert(i.message);this.closeDialog()})}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(u.so),e.Y36(R.L),e.Y36(k.R),e.Y36(u.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-keep-emp-doc"]],decls:19,vars:5,consts:[["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row","mb-4"],[1,"col-12"],[1,"row","form-group"],[1,"form-field","col-12"],["type","text","matInput","","formControlName","remark"],[1,"row"],["type","button","mat-raised-button","","color","accent",1,"col-3","my-2",3,"click"],["type","button","mat-raised-button","",1,"bg-dark","text-light","col-3","offset-1","my-2",3,"click"],["type","button","mat-raised-button","","color","primary",1,"offset-1","col-4","my-2",3,"click"]],template:function(i,l){1&i&&(e.TgZ(0,"app-form-heading"),e._uU(1),e.qZA(),e.TgZ(2,"div",0)(3,"form",1)(4,"div",2)(5,"label",3),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Remark"),e.qZA(),e._UZ(11,"input",6),e.qZA()(),e.TgZ(12,"div",7)(13,"button",8),e.NdJ("click",function(){return l.notMarking()}),e._uU(14," Not marking "),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return l.notKeep()}),e._uU(16," Not Keep Comany "),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return l.keep()}),e._uU(18," Keep Company "),e.qZA()()()()),2&i&&(e.xp6(1),e.AsE(" Edit Doc Keep Company : ",l.data.documentType.name," ",l.data.identifier,"\n"),e.xp6(2),e.Q6J("formGroup",l.manageForm),e.xp6(3),e.AsE("",l.data.employee.name," (",l.data.employee.code,")"))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,A.lW,u.xY,L.H]}),t})();const fi=["page"];function _i(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Identifier "),e.qZA())}function hi(t,a){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.identifier," ")}}function gi(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Expiry (Days) "),e.qZA())}function yi(t,a){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.AsE(" ",n.expiryDate," (",n.expiryDays,") ")}}function vi(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Name "),e.qZA())}function xi(t,a){1&t&&e._UZ(0,"img",29)}function Ei(t,a){if(1&t&&e._UZ(0,"img",30),2&t){const n=e.oxw().$implicit,o=e.oxw();e.hYB("src","",o.baseUrl,"/profile/",n.employee.profileUrl,"",e.LSH)}}function wi(t,a){if(1&t&&(e.TgZ(0,"td",25),e.YNc(1,xi,1,0,"img",26),e.YNc(2,Ei,1,2,"img",27),e.TgZ(3,"span",28),e._uU(4),e.qZA()()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",null==n.employee.profileUrl),e.xp6(1),e.Q6J("ngIf",null!=n.employee.profileUrl),e.xp6(2),e.AsE("",n.employee.name," (",n.employee.code,")")}}function Ti(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Work Site "),e.qZA())}function Zi(t,a){if(1&t&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.employee.workingCompany," ")}}function Di(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Status "),e.qZA())}function Ci(t,a){1&t&&(e.TgZ(0,"span",35),e._uU(1,"Valid"),e.qZA())}function Ii(t,a){1&t&&(e.TgZ(0,"span",36),e._uU(1,"Expired"),e.qZA())}function bi(t,a){1&t&&(e.TgZ(0,"span",37),e._uU(1,"Near Expiry"),e.qZA())}function Ni(t,a){if(1&t&&(e.TgZ(0,"td",24),e.YNc(1,Ci,2,0,"span",32),e.YNc(2,Ii,2,0,"span",33),e.YNc(3,bi,2,0,"span",34),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",1==n.valid),e.xp6(1),e.Q6J("ngIf",1==n.expired),e.xp6(1),e.Q6J("ngIf",1==n.nearExpiry)}}function Ai(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Keep Company "),e.qZA())}function qi(t,a){1&t&&(e.TgZ(0,"span",41),e._uU(1,"Keeping"),e.qZA())}function Li(t,a){1&t&&(e.TgZ(0,"span",42),e._uU(1,"Not Keeping"),e.qZA())}function Ui(t,a){1&t&&(e.TgZ(0,"span",43),e._uU(1,"Not Marked"),e.qZA())}function Ji(t,a){if(1&t&&(e.TgZ(0,"td",24),e.YNc(1,qi,2,0,"span",38),e.YNc(2,Li,2,0,"span",39),e.YNc(3,Ui,2,0,"span",40),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",1==n.keepCompany),e.xp6(1),e.Q6J("ngIf",0==n.keepCompany),e.xp6(1),e.Q6J("ngIf",null==n.keepCompany)}}function Si(t,a){1&t&&(e.TgZ(0,"th",23),e._uU(1," Remark "),e.qZA())}function Fi(t,a){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.hij(" ",n.remark," ")}}function ki(t,a){1&t&&e._UZ(0,"th",44)}function Qi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-edit-action-icon",49),e.NdJ("editEvent",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.editDocKeep(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function Yi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-view-action-icon",50),e.NdJ("viewEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.viewDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function Ki(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-download-action-icon",51),e.NdJ("downloadEvent",function(i){e.CHM(n);const l=e.oxw(2);return e.KtG(l.downloadDoc(i))}),e.qZA()}if(2&t){const n=e.oxw().$implicit;e.Q6J("item",n)}}function Ri(t,a){if(1&t&&(e.TgZ(0,"td",45),e.YNc(1,Qi,1,1,"app-edit-action-icon",46),e.YNc(2,Yi,1,1,"app-view-action-icon",47),e.YNc(3,Ki,1,1,"app-download-action-icon",48),e.qZA()),2&t){const n=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.allowEdit),e.xp6(1),e.Q6J("ngIf",null!=n.fileName&&o.allowExport),e.xp6(1),e.Q6J("ngIf",null!=n.fileName&&o.allowExport)}}function Mi(t,a){1&t&&e._UZ(0,"tr",52)}function Oi(t,a){1&t&&e._UZ(0,"tr",53)}const Gi=function(){return[10,20,50]};let Hi=(()=>{const a=class{constructor(o,i){this.menuRoleService=o,this.dialog=i,this.moreEvent=new E.x,this.displayedColumns=["identifier","name","company","status","keep","remark","manage"],this.baseUrl=(0,S.SV)(),this.allowEdit=!1,this.allowExport=!1,this.viewDocEvent=new E.x,this.downloadDocEvent=new E.x,this.editDocKeepEvent=new E.x}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDocKeep,v.k.edit),this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.EmployeeDocKeep,v.k.export)}ngOnChanges(o){this.empDocKeepList.paginator=this.paginator}ngAfterViewInit(){this.empDocKeepList.paginator=this.paginator}more(){this.moreEvent.next(!0)}viewDoc(o){this.viewDocEvent.next(o)}downloadDoc(o){this.downloadDocEvent.next(o)}editDocKeep(o){this.dialog.open(ui,{data:o,width:"40%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editDocKeepEvent.next()})}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(U.K),e.Y36(u.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-doc-keep-list"]],viewQuery:function(i,l){if(1&i&&e.Gf(fi,5),2&i){let r;e.iGM(r=e.CRH())&&(l.paginator=r.first)}},inputs:{empDocKeepList:"empDocKeepList",count:"count"},outputs:{moreEvent:"moreEvent",viewDocEvent:"viewDocEvent",downloadDocEvent:"downloadDocEvent",editDocKeepEvent:"editDocKeepEvent"},features:[e.TTD],decls:33,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","identifier"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","expiryDate"],["matColumnDef","name"],["mat-cell","","class","col-3",4,"matCellDef"],["matColumnDef","company"],["mat-cell","","class","col-2",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","keep"],["matColumnDef","remark"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["mat-cell","",1,"col-3"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],[1,"ms-2"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-cell","",1,"col-2"],["class","text-success p-2 rounded-pill",4,"ngIf"],["class","text-danger p-2 rounded-pill",4,"ngIf"],["class","text-warning p-2 rounded-pill",4,"ngIf"],[1,"text-success","p-2","rounded-pill"],[1,"text-danger","p-2","rounded-pill"],[1,"text-warning","p-2","rounded-pill"],["class","bg-primary text-light p-2 rounded-pill",4,"ngIf"],["class","bg-dark text-light p-2 rounded-pill",4,"ngIf"],["class","bg-light text-warning p-2 rounded-pill",4,"ngIf"],[1,"bg-primary","text-light","p-2","rounded-pill"],[1,"bg-dark","text-light","p-2","rounded-pill"],[1,"bg-light","text-warning","p-2","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[3,"item","editEvent",4,"ngIf"],[3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","viewEvent"],[3,"item","downloadEvent"],["mat-header-row",""],["mat-row",""]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,_i,2,0,"th",3),e.YNc(4,hi,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,gi,2,0,"th",3),e.YNc(7,yi,2,2,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,vi,2,0,"th",3),e.YNc(10,wi,5,4,"td",7),e.BQk(),e.ynx(11,8),e.YNc(12,Ti,2,0,"th",3),e.YNc(13,Zi,2,1,"td",9),e.BQk(),e.ynx(14,10),e.YNc(15,Di,2,0,"th",3),e.YNc(16,Ni,4,3,"td",4),e.BQk(),e.ynx(17,11),e.YNc(18,Ai,2,0,"th",3),e.YNc(19,Ji,4,3,"td",4),e.BQk(),e.ynx(20,12),e.YNc(21,Si,2,0,"th",3),e.YNc(22,Fi,2,1,"td",4),e.BQk(),e.ynx(23,13),e.YNc(24,ki,1,0,"th",14),e.YNc(25,Ri,4,3,"td",15),e.BQk(),e.YNc(26,Mi,1,0,"tr",16),e.YNc(27,Oi,1,0,"tr",17),e.qZA(),e._UZ(28,"mat-paginator",18,19),e.qZA(),e.TgZ(30,"div",20)(31,"div",21)(32,"app-server-pagination",22),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("dataSource",l.empDocKeepList),e.xp6(25),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Gi)),e.xp6(4),e.Q6J("loaded",l.empDocKeepList.data.length)("count",l.count))},dependencies:[_.O5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,W.NW,X.H,ee.p,G.R,z.e]}),t})();function $i(t,a){if(1&t&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Vi(t,a){if(1&t&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function Pi(t,a){if(1&t&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}let ji=(()=>{const a=class{constructor(){this.onSearchChange=new E.x,this.onSearch=new E.x}ngOnInit(){const o=this.searchData.docTypeList.find(i=>"Passport"===i.name)?.id||"";this.filterForm=new c.cw({searchKey:new c.NI(""),companyId:new c.NI(""),docTypeId:new c.NI({value:o,disabled:!0}),mode:new c.NI(4,[c.kI.required]),expiryDays:new c.NI(null),keepCompany:new c.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(i=>{this.onSearchChange.next(i)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",docTypeId:"",mode:4,expiryDays:null,keepCompany:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-doc-keep-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:47,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","mt-2",3,"click"],["appearance","outline","floatLabel","always",1,"form-field","col-1"],["type","number","placeholder","","matInput","","formControlName","expiryDays"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","col-4"],[1,"form-field","col-4"],["formControlName","docTypeId"],["formControlName","mode"],["formControlName","keepCompany"],["value","true"],["value","false"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(i,l){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Expire In"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Company"),e.qZA(),e.TgZ(11,"mat-select",6)(12,"mat-option",7),e._uU(13,"All"),e.qZA(),e.YNc(14,$i,2,2,"mat-option",8),e.qZA()(),e.TgZ(15,"div",9)(16,"mat-form-field",10)(17,"mat-label"),e._uU(18,"Doc Type"),e.qZA(),e.TgZ(19,"mat-select",11)(20,"mat-option",7),e._uU(21,"All"),e.qZA(),e.YNc(22,Vi,2,2,"mat-option",8),e.qZA()(),e.TgZ(23,"mat-form-field",10)(24,"mat-label"),e._uU(25,"Mode"),e.qZA(),e.TgZ(26,"mat-select",12),e.YNc(27,Pi,2,2,"mat-option",8),e.qZA()(),e.TgZ(28,"mat-form-field",10)(29,"mat-label"),e._uU(30,"Keep Company"),e.qZA(),e.TgZ(31,"mat-select",13)(32,"mat-option",7),e._uU(33,"All"),e.qZA(),e.TgZ(34,"mat-option",14),e._uU(35,"Keeping"),e.qZA(),e.TgZ(36,"mat-option",15),e._uU(37,"Not Keeping"),e.qZA()()()(),e.TgZ(38,"mat-form-field",16)(39,"mat-label"),e._uU(40,"Search"),e.qZA(),e._UZ(41,"input",17),e.qZA(),e.TgZ(42,"div",18)(43,"button",19)(44,"i",20),e._uU(45,"search"),e.qZA(),e._uU(46," Search"),e.qZA()()()()),2&i&&(e.Q6J("formGroup",l.filterForm),e.xp6(14),e.Q6J("ngForOf",l.searchData.companyList),e.xp6(8),e.Q6J("ngForOf",l.searchData.docTypeList),e.xp6(5),e.Q6J("ngForOf",l.searchData.searchModeList))},dependencies:[_.sg,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,g.KE,g.hX,I.Nt,A.lW,Q.gD,Y.ey]}),t})();function Bi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-emp-doc-keep-search-filter",3),e.NdJ("onSearchChange",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.changeSearchData(i))})("onSearch",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("searchData",n.searchData)}}function zi(t,a){1&t&&(e.TgZ(0,"div",4)(1,"app-table-heading",5),e._uU(2," Doc Keep "),e.qZA()())}function Wi(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"app-emp-doc-keep-list",6),e.NdJ("moreEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getList())})("viewDocEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.viewDoc(i))})("downloadDocEvent",function(i){e.CHM(n);const l=e.oxw();return e.KtG(l.downloadDoc(i))})("editDocKeepEvent",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.refreshList())}),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("empDocKeepList",n.dataSource)("count",n.count)}}const Xi=[{path:"",component:yo},{path:"doc",component:mi,pathMatch:"full"},{path:"doc/keep",component:(()=>{const a=class{constructor(o,i,l,r){this.employeeDocService=o,this.employeeService=i,this.fileService=l,this.menuRoleService=r,this.isLoaded=!1,this.req=new di,this.eList=[],this.count=0,this.viewPeople=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeDocService.getEmployeeDocSearchData().pipe((0,x.w)(o=>{this.searchData=o.item,this.isLoaded=!0,this.dataSource=new d.by(this.eList),this.req.pagination.pageSize=10;const i=this.searchData.docTypeList.find(l=>"Passport"===l.name)?.id||"";return this.req.docTypeId=i,this.employeeDocService.getEmployeeDocKeepList(this.req)})).subscribe(o=>{this.viewPeople=this.menuRoleService.isMenuRoleAuthorizedSingle(h.w.People,v.k.view),this.update(o)})}ngAfterViewInit(){}changeSearchData(o){console.log(o),this.eList=[],this.dataSource=new d.by(this.eList),this.req.searchKey=o.searchKey,this.req.companyId=""!=o.companyId?o.companyId:null;const i=this.searchData.docTypeList.find(l=>"Passport"===l.name)?.id||"";this.req.docTypeId=i,this.req.mode=o.mode,this.req.expiryDays=o.expiryDays,this.req.keepCompany="true"==o.keepCompany||"false"!=o.keepCompany&&void 0,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new d.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(o){o?.response?.status==T.s.success&&(this.eList.push.apply(this.eList,o.list),this.dataSource=new d.by(this.eList),this.count=o.totalRecords,o.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.employeeDocService.getEmployeeDocKeepList(this.req).subscribe(o=>{this.update(o)})}viewDoc(o){var i=this;this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var l=(0,K.Z)(function*(r){i.fileService.viewFile(r)});return function(r){return l.apply(this,arguments)}}())}downloadDoc(o){var i=this;let l=this.searchData.docTypeList.find(s=>s.id==o.documentType.id),r=`${o.employee.code}_${l.code}`;null!=o.identifier&&(r=`${r}_${o.identifier}`),this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var s=(0,K.Z)(function*(m){i.fileService.downloadFile(m,r)});return function(m){return s.apply(this,arguments)}}())}ngOnDestroy(){this.sub?.unsubscribe()}};let t=a;return a.\u0275fac=function(i){return new(i||a)(e.Y36(R.L),e.Y36(N.G),e.Y36(B.I),e.Y36(U.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-doc-keep"]],decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"empDocKeepList","count","moreEvent","viewDocEvent","downloadDocEvent","editDocKeepEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],[1,"col-6"],[3,"empDocKeepList","count","moreEvent","viewDocEvent","downloadDocEvent","editDocKeepEvent"]],template:function(i,l){1&i&&(e.YNc(0,Bi,1,1,"app-emp-doc-keep-search-filter",0),e.YNc(1,zi,3,0,"div",1),e.YNc(2,Wi,1,2,"app-emp-doc-keep-list",2)),2&i&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.O5,$.u,Hi,ji]}),t})(),pathMatch:"full"}];let en=(()=>{const a=class{};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[ce.Bz.forChild(Xi)]}),t})();var tn=p(529),on=p(3214),nn=p(1260);let an=(()=>{const a=class{};let t=a;return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[_.ez,en,c.u5,c.UX,tn.JF,on._,nn.m,ce.Bz]}),t})()},6141:(te,F,p)=>{p.d(F,{j:()=>u});var _=p(4650),h=p(6895);function v(x,C){1&x&&_._UZ(0,"label",1)}const c=["*"];let u=(()=>{const C=class{};let x=C;return C.\u0275fac=function(b){return new(b||C)},C.\u0275cmp=_.Xpm({type:C,selectors:[["app-active-text"]],inputs:{active:"active"},ngContentSelectors:c,decls:2,vars:1,consts:[["class","bg-warn active-box",4,"ngIf"],[1,"bg-warn","active-box"]],template:function(b,D){1&b&&(_.F$t(),_.YNc(0,v,1,0,"label",0),_.Hsn(1)),2&b&&_.Q6J("ngIf",!D.active)},dependencies:[h.O5],styles:[".active-box[_ngcontent-%COMP%]{width:10px;height:10px;margin-right:5px}"]}),x})()},2696:(te,F,p)=>{p.d(F,{L:()=>c});var _=p(7579),h=p(4650),v=p(4859);let c=(()=>{const x=class{constructor(){this.addEvent=new _.x}addItem(){this.addEvent.next()}};let u=x;return x.\u0275fac=function(J){return new(J||x)},x.\u0275cmp=h.Xpm({type:x,selectors:[["app-add-button"]],outputs:{addEvent:"addEvent"},decls:4,vars:0,consts:[["type","button","mat-raised-button","","color","primary",1,"col-12","my-2",3,"click"],[1,"material-icons"]],template:function(J,b){1&J&&(h.TgZ(0,"button",0),h.NdJ("click",function(){return b.addItem()}),h.TgZ(1,"i",1),h._uU(2,"add"),h.qZA(),h._uU(3," Add"),h.qZA())},dependencies:[v.lW]}),u})()}}]);