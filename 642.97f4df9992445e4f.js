"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[642],{5311:(L,Z,m)=>{m.d(Z,{J:()=>_});let _=(()=>{const y=class{static confirmAdd(d){return this.areYouSure+" to add "+d+" ?"}static confirmEdit(d){return this.areYouSure+" to edit "+d+" ?"}static confirmDelete(d){return this.areYouSure+" to delete "+d+" ?"}static confirmActivate(d){return this.areYouSure+" to activate "+d+" ?"}static confirmInactivate(d){return this.areYouSure+" to inactivate "+d+" ?"}static confirmClear(d){return this.areYouSure+" to clear "+d+" ?"}static confirmAddUserRole(d,u){return this.areYouSure+" to add role "+u+" to user "+d+" ?"}static confirmRemoveUserRole(d,u){return this.areYouSure+" to remove role "+u+" to user "+d+" ?"}static confirmChangeUsername(d,u){return this.areYouSure+" to change username from "+d+" to "+u+" ?"}static confirmChangeEmail(d,u){return this.areYouSure+" to change email from "+d+" to "+u+" ?"}static revokeUser(d){return this.areYouSure+" to revoke user "+d+" ?"}};let s=y;return y.areYouSure="Are you sure",y.areYouSureTo="Are you sure ?",y.downloading="Downloading ...",y.downloaded="",s})()},6212:(L,Z,m)=>{m.d(Z,{G:()=>s});class _{constructor(){this.required=!0,this.pageNumber=1,this.pageSize=20}}class s{constructor(){this.searchKey="",this.pagination=new _}}},3642:(L,Z,m)=>{m.r(Z),m.d(Z,{EmployeeModule:()=>Jo});var _=m(6895),s=m(9172),y=m(1654),r=m(4006),d=m(5412),u=m(3900),v=m(9646),I=m(4128);class g{}class h{}var E=m(5311),T=m(673),A=m(8230);class S{}var N=m(676);class q{}var e=m(4650),O=m(5332),M=m(5659),b=m(9549),Q=m(4144),F=m(4859),Y=m(4385),k=m(3238),J=m(9602),ne=m(2833),ie=m(4682),B=m(1837),W=m(1234),H=m(2043);const ae=["profileUpload"],le=["docUpload"],re=["docName"];function ce(t,i){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Add Employee\n"),e.qZA())}function me(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function se(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function pe(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function de(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function ue(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function _e(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.onProfileRemoveClick())}),e._uU(1,"Remove"),e.qZA()}}function fe(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function ge(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(a);const n=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(n))}),e._uU(1,"Remove File"),e.qZA()}}function he(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",45)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",46,47),e.NdJ("selectionChange",function(n){const c=e.CHM(a).index,p=e.oxw(2);return e.KtG(p.onDocumentTypeChange(n,c))}),e.YNc(7,fe,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",48),e.qZA(),e.TgZ(12,"mat-form-field",49)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",50)(16,"mat-datepicker-toggle",25)(17,"mat-datepicker",null,26),e.qZA(),e.TgZ(19,"div",51)(20,"button",52),e.NdJ("click",function(){const l=e.CHM(a).index,c=e.oxw(2);return e.KtG(c.onDocSelect(l))}),e._uU(21,"Select File"),e.qZA(),e._UZ(22,"input",53,54)(24,"label",55,56),e.YNc(26,ge,2,0,"button",57),e.qZA(),e.TgZ(27,"div",58)(28,"app-delete-action-icon",59),e.NdJ("deleteEvent",function(){const l=e.CHM(a).index,c=e.oxw(2);return e.KtG(c.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const a=i.$implicit,o=i.index,n=e.MAs(6),l=e.MAs(18),c=e.MAs(25),p=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(7),e.Q6J("ngForOf",p.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(4),e.Q6J("disabled",null==n.value),e.xp6(6),e.Q6J("ngIf",""!=c.textContent),e.xp6(2),e.Q6J("item",a)}}function ye(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.addEmployee())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,me,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,se,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,pe,2,2,"mat-option",11),e.qZA()(),e.TgZ(30,"button",19),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.applySameCompany())}),e._uU(31,"Mark Same"),e.qZA()(),e.TgZ(32,"div",16)(33,"mat-form-field",17)(34,"mat-label"),e._uU(35,"Work Site"),e.qZA(),e.TgZ(36,"mat-select",20),e.YNc(37,de,2,2,"mat-option",11),e.qZA()()(),e.TgZ(38,"div",21)(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Position"),e.qZA(),e.TgZ(42,"mat-select",22),e.YNc(43,ue,2,2,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",21)(45,"mat-form-field",23)(46,"mat-label"),e._uU(47,"Joining Date"),e.qZA(),e._UZ(48,"input",24)(49,"mat-datepicker-toggle",25)(50,"mat-datepicker",null,26),e.qZA()()()(),e.TgZ(52,"div",21)(53,"div",27)(54,"div",28),e._UZ(55,"img",29),e.qZA()(),e.TgZ(56,"div",30),e.YNc(57,_e,2,0,"button",31),e.TgZ(58,"button",32),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onProfileSetClick())}),e._uU(59,"Select"),e.qZA(),e._UZ(60,"input",33,34),e.qZA()()(),e.TgZ(62,"div",4)(63,"div",28)(64,"div",35)(65,"div",36)(66,"div",21)(67,"label"),e._uU(68,"Document"),e.qZA()(),e.TgZ(69,"div",37)(70,"app-add-action-icon",38),e.NdJ("addEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.addDocumentItemForm())}),e.qZA()()(),e.TgZ(71,"div",39),e.YNc(72,he,29,7,"div",40),e.qZA()()()(),e.TgZ(73,"div",4)(74,"app-crud-reset-button",41),e.NdJ("resetEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.reset())}),e.qZA(),e._UZ(75,"app-crud-add-button",42),e.qZA()()()}if(2&t){const a=e.MAs(51),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(8),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(2),e.Q6J("ngIf",o.profileSet),e.xp6(1),e.Q6J("ngClass",o.profileSet?"col-6":"col-12"),e.xp6(14),e.Q6J("ngForOf",o.documentListControls)}}let ve=(()=>{const i=class{constructor(o,n,l,c,p){this.dialogRef=o,this.employeeService=n,this.ds=l,this.renderer=c,this.data=p,this.isLoaded=!1,this.profileSrc=null,this.profileEmpty=N.O.profileEmptySrc,this.profileSet=!1,this.profile=null}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new r.cw({person:new r.cw({firstName:new r.NI(null,r.kI.required),gender:new r.NI("M",r.kI.required),dob:new r.NI(null)}),code:new r.NI(null,[r.kI.required,r.kI.maxLength(40)]),visaCompanyId:new r.NI(null,[r.kI.required]),workingCompanyId:new r.NI(null,[r.kI.required]),groupId:new r.NI(null,[r.kI.required]),joiningDate:new r.NI(null,[r.kI.required]),homeAddress:new r.cw({addressType:new r.NI("Work",r.kI.required),name:new r.NI("NA",[r.kI.maxLength(100)]),countryId:new r.NI(null,r.kI.required)}),documentList:new r.Oe([])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().subscribe(o=>{this.manageData=o.item,this.addDefaultDoc("Passport"),this.addDefaultDoc("Emirates ID"),this.addDefaultDoc("Labour Card"),this.isLoaded=!0,this.profileSrc=this.profileEmpty})}addDefaultDoc(o){let n=this.manageData.documentTypeList.find(l=>l.name==o)?.id;this.manageForm.get("documentList").push(new r.cw({documentTypeId:new r.NI(n,r.kI.required),identifier:new r.NI(null,r.kI.required),expiryDate:new r.NI(null,r.kI.required),file:new r.NI(null)}))}onProfileSetClick(){const o=this.profileUpload.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const n=o.files[0];if(n.size>1e3*N.O.profileImageLimitKb)return void alert(`Profile size max allowed ${N.O.profileImageLimitKb}kb exceeded`);this.profile=n;const l=new FileReader;l.onload=c=>this.profileSrc=l.result,l.readAsDataURL(n),this.profileSet=!0}},o.click()}onProfileRemoveClick(){this.profileSrc=this.profileEmpty,this.profileSet=!1,this.profileUpload.nativeElement.value="",this.profile=null}onDocumentTypeChange(o,n){let l=this.manageData.documentTypeList.find(p=>p.id==o.value);var c=this.manageForm.get("documentList").at(n);c.get("identifier").disabled&&c.get("identifier").enable(),c.get("expiryDate").disabled&&c.get("expiryDate").enable(),c.patchValue({identifier:null,expiryDate:null,file:null}),this.onDocRemove(n),l.isIdentifier?c.get("identifier")?.setValidators(r.kI.required):c.get("identifier")?.removeValidators(r.kI.required),l.isExpiry?c.get("expiryDate")?.setValidators(r.kI.required):c.get("expiryDate")?.removeValidators(r.kI.required),c.get("identifier").markAsUntouched(),c.get("expiryDate").markAsUntouched(),c.get("identifier").updateValueAndValidity(),c.get("expiryDate").updateValueAndValidity()}addDocumentItemForm(){this.manageForm.get("documentList").push(new r.cw({documentTypeId:new r.NI(null,r.kI.required),identifier:new r.NI({value:null,disabled:!0}),expiryDate:new r.NI({value:null,disabled:!0}),file:new r.NI(null)}))}deleteDocumentItem(o){this.manageForm.get("documentList").removeAt(o)}applySameCompany(){null!=this.manageForm.value.visaCompanyId&&this.manageForm.patchValue({workingCompanyId:this.manageForm.value.visaCompanyId})}onDocSelect(o){let n=this.manageForm.get("documentList").at(o),l=this.manageData.documentTypeList.find(p=>p.id==n.value.documentTypeId),c=this.docUpload.get(o).nativeElement;c.onchange=()=>{if(c.files&&c.files[0]){const p=c.files[0];if(l.contentLimitKb>0&&p.size>1e3*l.contentLimitKb)return c.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let f=this.docName.get(o).nativeElement;this.renderer.setProperty(f,"textContent",p.name),n.patchValue({file:p})}},c.click()}onDocRemove(o){let n=this.manageForm.get("documentList").at(o);this.docUpload.get(o).nativeElement.value="";let c=this.docName.get(o).nativeElement;this.renderer.setProperty(c,"textContent",""),n.patchValue({file:null})}addEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(E.J.areYouSureTo))return;let o=new g;o.person=new S,o.person.firstName=this.manageForm.value.person.firstName,o.person.gender=this.manageForm.value.person.gender,o.code=this.manageForm.value.code,o.visaCompanyId=this.manageForm.value.visaCompanyId,o.workingCompanyId=this.manageForm.value.workingCompanyId,o.groupId=this.manageForm.value.groupId,o.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),o.homeAddress=new A.h,o.homeAddress.addressType=this.manageForm.value.homeAddress.addressType,o.homeAddress.name=this.manageForm.value.homeAddress.name,o.homeAddress.countryId=this.manageForm.value.homeAddress.countryId,o.documents=[],this.manageForm.value.documentList.forEach(c=>{let p=new h;p.documentTypeId=c.documentTypeId,p.identifier=c.identifier,null!=c.expiryDate&&(p.expiryDate=this.ds.formatToRequest(c.expiryDate)),o.documents.push(p)});let n=this.validateDoc(o.documents);if(""!=n)return void alert(`Error : ${n}`);const l=new FormData;l.append("data",JSON.stringify(o)),this.profileSet&&l.append("profile",this.profile),this.sub=this.employeeService.addEmployee(l).pipe((0,u.w)(c=>{if(c.response?.status!=T.s.success)return alert(c.response?.message),(0,v.of)(null);let p=c.item?.id;const f=[];return this.manageForm.value.documentList.forEach(x=>{if(null==x.file)return;let D=new q;D.employeeId=p,D.documentTypeId=x.documentTypeId,D.identifier=x.identifier;const w=new FormData;w.append("data",JSON.stringify(D)),w.append("doc",x.file),f.push(this.employeeService.addEmployeeDoc(w))}),0==f.length?(this.reset(),this.closeDialog(),(0,v.of)(null)):(0,I.D)(f)})).subscribe(c=>{this.reset(),this.closeDialog()})}validateDoc(o){let n=[],l="";if(o.forEach(p=>{n.findIndex(x=>x.key.docId==p.documentTypeId)>=0?l=p.documentTypeId:n.push({key:{docId:p.documentTypeId},value:1})}),""!=l){var c=this.manageData.documentTypeList.find(p=>p.id==l)?.name;return`Duplicate doc ${c} found`}return""}validateDocAlt(o){let n=[],l="";if(o.forEach(p=>{n.findIndex(x=>x.key.docId==p.documentTypeId&&x.key.identifier==p.identifier)>=0?l=p.documentTypeId:n.push({key:{docId:p.documentTypeId,identifier:p.identifier},value:1})}),""!=l){var c=this.manageData.documentTypeList.find(p=>p.id==l)?.name;return`Duplicate doc ${c} with same identifier found`}return""}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(d.so),e.Y36(O.G),e.Y36(M.R),e.Y36(e.Qsj),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-employee"]],viewQuery:function(n,l){if(1&n&&(e.Gf(ae,5),e.Gf(le,5),e.Gf(re,5)),2&n){let c;e.iGM(c=e.CRH())&&(l.profileUpload=c.first),e.iGM(c=e.CRH())&&(l.docUpload=c),e.iGM(c=e.CRH())&&(l.docName=c)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["type","button","mat-button","","color","primary",1,"col-4","offset-8",3,"click"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],[1,"row","my-2"],["type","button","mat-button","","color","primary","class","col-6",3,"click",4,"ngIf"],["type","button","mat-button","","color","primary",1,"",3,"ngClass","click"],["type","file","id","profileUpload","name","profileUpload","accept","image/*",2,"display","none"],["profileUpload",""],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-2",3,"resetEvent"],[1,"col-2","offset-8"],[3,"value"],["type","button","mat-button","","color","primary",1,"col-6",3,"click"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"]],template:function(n,l){1&n&&(e.YNc(0,ce,2,0,"app-form-heading",0),e.YNc(1,ye,76,12,"div",1)),2&n&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.sg,_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,b.KE,b.hX,b.R9,Q.Nt,F.lW,d.xY,Y.gD,k.ey,J.Mq,J.hl,J.nW,ne.L,ie.X,B.b,W.E,H.H]}),t})();var C=m(7155),V=m(6212);class Ee extends V.G{}var P=m(1219),xe=m(2696),U=m(7579);let Te=(()=>{const i=class{constructor(){this.importEvent=new U.x}import(){this.importEvent.next()}};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-import-button"]],outputs:{importEvent:"importEvent"},decls:4,vars:0,consts:[["type","button","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"],[1,"material-icons"]],template:function(n,l){1&n&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.import()}),e.TgZ(1,"i",1),e._uU(2,"upload"),e.qZA(),e._uU(3," Import"),e.qZA())},dependencies:[F.lW]}),t})();var K=m(9057);class Ce{}var j=m(455),Ze=m(7786);const Ie=["profileUpload"],De=["docUpload"],we=["docName"];function Ae(t,i){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," Edit Employee\n"),e.qZA())}function Ne(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function be(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ue(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Le(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function qe(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Je(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.onProfileRemoveClick())}),e._uU(1,"Remove"),e.qZA()}}function Se(t,i){if(1&t&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Fe(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){e.CHM(a);const n=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocSelect(n))}),e._uU(1,"Select File"),e.qZA()}if(2&t){e.oxw();const a=e.MAs(6);e.Q6J("disabled",null==a.value)}}function Oe(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(a);const n=e.oxw().index,l=e.oxw(2);return e.KtG(l.onDocRemove(n))}),e._uU(1,"Remove File"),e.qZA()}}function Me(t,i){1&t&&(e.TgZ(0,"label"),e._uU(1,"Doc Uploaded"),e.qZA())}function Qe(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",45)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",46,47),e.NdJ("selectionChange",function(n){const c=e.CHM(a).index,p=e.oxw(2);return e.KtG(p.onDocumentTypeChange(n,c))}),e.YNc(7,Se,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",48),e.qZA(),e.TgZ(12,"mat-form-field",49)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",50)(16,"mat-datepicker-toggle",25)(17,"mat-datepicker",null,26),e.qZA(),e._UZ(19,"input",51,52)(21,"input",53,54),e.TgZ(23,"div",55),e.YNc(24,Fe,2,1,"button",56),e._UZ(25,"input",57,58)(27,"label",59,60),e.YNc(29,Oe,2,0,"button",61),e.YNc(30,Me,2,0,"label",0),e.qZA(),e.TgZ(31,"div",62)(32,"app-delete-action-icon",63),e.NdJ("deleteEvent",function(){const l=e.CHM(a).index,c=e.oxw(2);return e.KtG(c.deleteDocumentItem(l))}),e.qZA()()()()}if(2&t){const a=i.$implicit,o=i.index,n=e.MAs(18),l=e.MAs(20),c=e.MAs(22),p=e.MAs(28),f=e.oxw(2);e.Q6J("formGroupName",o),e.xp6(7),e.Q6J("ngForOf",f.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(8),e.Q6J("ngIf",0==l.value.length||0==c.value.length),e.xp6(5),e.Q6J("ngIf",""!=p.textContent),e.xp6(1),e.Q6J("ngIf",l.value.length>0&&c.value.length>0),e.xp6(2),e.Q6J("item",a)}}function Ye(t,i){1&t&&e._UZ(0,"app-crud-edit-button",21)}function ke(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("submit",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.editEmployee())}),e.TgZ(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,Ne,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,be,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,Ue,2,2,"mat-option",11),e.qZA()(),e.TgZ(30,"button",19),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.applySameCompany())}),e._uU(31,"Mark Same"),e.qZA()(),e.TgZ(32,"div",16)(33,"mat-form-field",17)(34,"mat-label"),e._uU(35,"Work Site"),e.qZA(),e.TgZ(36,"mat-select",20),e.YNc(37,Le,2,2,"mat-option",11),e.qZA()()(),e.TgZ(38,"div",21)(39,"mat-form-field",17)(40,"mat-label"),e._uU(41,"Position"),e.qZA(),e.TgZ(42,"mat-select",22),e.YNc(43,qe,2,2,"mat-option",11),e.qZA()()(),e.TgZ(44,"div",21)(45,"mat-form-field",23)(46,"mat-label"),e._uU(47,"Joining Date"),e.qZA(),e._UZ(48,"input",24)(49,"mat-datepicker-toggle",25)(50,"mat-datepicker",null,26),e.qZA()()()(),e.TgZ(52,"div",21)(53,"div",27)(54,"div",28),e._UZ(55,"img",29),e.qZA()(),e.TgZ(56,"div",30),e.YNc(57,Je,2,0,"button",31),e.TgZ(58,"button",32),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onProfileSetClick())}),e._uU(59,"Select"),e.qZA(),e._UZ(60,"input",33,34),e.qZA()()(),e.TgZ(62,"div",4)(63,"div",28)(64,"div",35)(65,"div",36)(66,"div",21)(67,"label"),e._uU(68,"Document"),e.qZA()(),e.TgZ(69,"div",37)(70,"app-add-action-icon",38),e.NdJ("addEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.addDocumentItemForm())}),e.qZA()()(),e.TgZ(71,"div",39),e.YNc(72,Qe,33,8,"div",40),e.qZA()(),e.TgZ(73,"div",4)(74,"mat-slide-toggle",41),e._uU(75,"Active"),e.qZA(),e.YNc(76,Ye,1,0,"app-crud-edit-button",42),e.qZA()()()()()}if(2&t){const a=e.MAs(51),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(8),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(2),e.Q6J("ngIf",o.profileSet),e.xp6(1),e.Q6J("ngClass",o.profileSet?"col-6":"col-12"),e.xp6(14),e.Q6J("ngForOf",o.documentListControls),e.xp6(4),e.Q6J("ngIf",null!=o.data)}}let Re=(()=>{const i=class{constructor(o,n,l,c,p){this.dialogRef=o,this.employeeService=n,this.ds=l,this.renderer=c,this.data=p,this.isLoaded=!1,this.profileSrc=null,this.currentProfileUrl=null,this.profileEmpty=N.O.profileEmptySrc,this.profileSet=!1,this.profile=null,this.deletedDocuments=[]}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.manageForm=new r.cw({person:new r.cw({firstName:new r.NI(null,r.kI.required),gender:new r.NI("M",r.kI.required),dob:new r.NI(null)}),code:new r.NI({value:null,disabled:!0}),visaCompanyId:new r.NI(null,[r.kI.required]),workingCompanyId:new r.NI(null,[r.kI.required]),groupId:new r.NI(null,[r.kI.required]),joiningDate:new r.NI(null,[r.kI.required]),homeAddress:new r.cw({addressType:new r.NI("Work",r.kI.required),name:new r.NI("NA",[r.kI.maxLength(100)]),countryId:new r.NI(null,r.kI.required)}),documentList:new r.Oe([]),active:new r.NI(!0,[r.kI.required])}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,u.w)(o=>(this.manageData=o.item,this.employeeService.getEmployeeById(this.data?.id)))).subscribe(o=>{this.isLoaded=!0;let n=o.item;this.profileSrc=null==n.profileUrl?N.O.profileEmptySrc:`${(0,K.S)()}/profile/${n.profileUrl}`,this.profileSet=null!=n.profileUrl,this.currentProfileUrl=n.profileUrl,this.manageForm.patchValue({person:{firstName:n.person.firstName,gender:n.person.gender,dob:n.person.dOB},code:n.code,visaCompanyId:n.visaCompany.id,workingCompanyId:n.workingCompany.id,groupId:n.group.id,joiningDate:this.ds.responseFormatToDate(n.joiningDate),homeAddress:{addressType:n.homeAddress.addressType,name:n.homeAddress.name,countryId:n.homeAddress.country.id},active:n.active}),n.documentList.forEach(l=>{let c=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new r.cw({id:new r.NI(l.id),documentTypeId:new r.NI({value:l.documentType.id,disabled:!0}),identifier:new r.NI({value:l.identifier,disabled:!0}),expiryDate:new r.NI({value:c,disabled:!0}),file:new r.NI(null),fileName:new r.NI(l.fileName)}))})})}applySameCompany(){null!=this.manageForm.value.visaCompanyId&&this.manageForm.patchValue({workingCompanyId:this.manageForm.value.visaCompanyId})}onProfileSetClick(){const o=this.profileUpload.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const n=o.files[0];if(n.size>1e3*N.O.profileImageLimitKb)return void alert(`Profile size max allowed ${N.O.profileImageLimitKb}kb exceeded`);this.profile=n;const l=new FileReader;l.onload=c=>this.profileSrc=l.result,l.readAsDataURL(n),this.profileSet=!0}},o.click()}onProfileRemoveClick(){this.profileSrc=this.profileEmpty,this.profileSet=!1,this.profileUpload.nativeElement.value="",this.profile=null}addDocumentItemForm(){this.manageForm.get("documentList").push(new r.cw({id:new r.NI(null),documentTypeId:new r.NI(null,r.kI.required),identifier:new r.NI({value:null,disabled:!0}),expiryDate:new r.NI({value:null,disabled:!0}),file:new r.NI(null),fileName:new r.NI(null)}))}deleteDocumentItem(o){let n=this.manageForm.get("documentList").at(o);null!=n.value.id&&this.deletedDocuments.push(n.value.id),this.manageForm.get("documentList").removeAt(o)}onDocumentTypeChange(o,n){let l=this.manageData.documentTypeList.find(p=>p.id==o.value);var c=this.manageForm.get("documentList").at(n);c.get("identifier").disabled&&c.get("identifier").enable(),c.get("expiryDate").disabled&&c.get("expiryDate").enable(),c.patchValue({identifier:null,expiryDate:null,file:null,fileName:null}),this.onDocRemove(n),l.isIdentifier?c.get("identifier")?.setValidators(r.kI.required):c.get("identifier")?.removeValidators(r.kI.required),l.isExpiry?c.get("expiryDate")?.setValidators(r.kI.required):c.get("expiryDate")?.removeValidators(r.kI.required),c.get("identifier").markAsUntouched(),c.get("expiryDate").markAsUntouched(),c.get("identifier").updateValueAndValidity(),c.get("expiryDate").updateValueAndValidity()}onDocSelect(o){let n=this.manageForm.get("documentList").at(o),l=this.manageData.documentTypeList.find(p=>p.id==n.getRawValue().documentTypeId),c=this.docUpload.get(o).nativeElement;c.onchange=()=>{if(c.files&&c.files[0]){const p=c.files[0];if(l.contentLimitKb>0&&p.size>1e3*l.contentLimitKb)return c.value="",void alert(`Size max allowed ${l.contentLimitKb}kb exceeded`);let f=this.docName.get(o).nativeElement;this.renderer.setProperty(f,"textContent",p.name),n.patchValue({file:p})}},c.click()}onDocRemove(o){let n=this.manageForm.get("documentList").at(o);this.docUpload.get(o).nativeElement.value="";let c=this.docName.get(o).nativeElement;this.renderer.setProperty(c,"textContent",""),n.patchValue({file:null})}reset(){for(this.manageForm.reset();this.manageForm.get("documentList").length>0;)this.manageForm.get("documentList").removeAt(0)}editEmployee(){if(!this.manageForm.valid)return void this.manageForm.markAllAsTouched();if(!confirm(E.J.areYouSureTo))return;let o=new Ce;o.id=this.data?.id,o.person=new S,o.person.firstName=this.manageForm.value.person.firstName,o.person.gender=this.manageForm.value.person.gender,o.visaCompanyId=this.manageForm.value.visaCompanyId,o.workingCompanyId=this.manageForm.value.workingCompanyId,o.groupId=this.manageForm.value.groupId,o.joiningDate=this.ds.formatToRequest(this.manageForm.value.joiningDate),o.homeAddress=new A.h,o.homeAddress.addressType=this.manageForm.value.homeAddress.addressType,o.homeAddress.name=this.manageForm.value.homeAddress.name,o.homeAddress.countryId=this.manageForm.value.homeAddress.countryId,o.active=this.manageForm.value.active,o.documents=[];let n=[];this.manageForm.get("documentList").controls.forEach((p,f)=>{if(null!=p.value.id)return void n.push({docId:p.getRawValue().documentTypeId,identifier:p.getRawValue().identifier});let x=new h;x.documentTypeId=p.value.documentTypeId,x.identifier=p.value.identifier,null!=p.value.expiryDate&&(x.expiryDate=this.ds.formatToRequest(p.value.expiryDate)),o.documents.push(x)}),o.deletedDocuments=[],this.deletedDocuments.length>0&&(o.deletedDocuments=this.deletedDocuments);let l=this.validateDoc(o.documents,n);if(""!=l)return void alert(`Error : ${l}`);const c=new FormData;this.profileSet?null!=this.profile&&c.append("profile",this.profile):null!=this.currentProfileUrl&&(o.profileRemoved=!0),c.append("data",JSON.stringify(o)),this.sub=this.employeeService.editEmployee(c).pipe((0,u.w)(p=>{if(p.status!=T.s.success)return alert(p.message),(0,v.of)(null);let f=o.id;const x=[];return this.manageForm.get("documentList").controls.forEach(D=>{if(console.log(D),null==D.value.file)return;let w=new q;w.employeeId=f,w.documentTypeId=D.getRawValue().documentTypeId,w.identifier=D.getRawValue().identifier;const R=new FormData;R.append("data",JSON.stringify(w)),R.append("doc",D.value.file),x.push(this.employeeService.addEmployeeDoc(R))}),0==x.length?(this.reset(),this.closeDialog(),(0,v.of)(null)):(0,I.D)(x)})).subscribe(p=>{this.reset(),this.closeDialog()})}validateDoc(o,n){let l=[],c="";if(o.forEach(f=>{l.findIndex(D=>D.key.docId==f.documentTypeId)>=0||n.findIndex(w=>w.docId==f.documentTypeId)>=0?c=f.documentTypeId:l.push({key:{docId:f.documentTypeId},value:1})}),""!=c){var p=this.manageData.documentTypeList.find(f=>f.id==c)?.name;return`Duplicate doc ${p} found`}return""}validateDocAlt(o,n){let l=[],c="";if(o.forEach(f=>{l.findIndex(D=>D.key.docId==f.documentTypeId&&D.key.identifier==f.identifier)>=0||n.findIndex(w=>w.docId==f.documentTypeId&&w.identifier==f.identifier)>=0?c=f.documentTypeId:l.push({key:{docId:f.documentTypeId,identifier:f.identifier},value:1})}),""!=c){var p=this.manageData.documentTypeList.find(f=>f.id==c)?.name;return`Duplicate doc ${p} with same identifier found`}return""}closeDialog(){this.dialogRef.close(!0)}ngOnDestroy(){this.sub?.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(d.so),e.Y36(O.G),e.Y36(M.R),e.Y36(e.Qsj),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-employee"]],viewQuery:function(n,l){if(1&n&&(e.Gf(Ie,5),e.Gf(De,5),e.Gf(we,5)),2&n){let c;e.iGM(c=e.CRH())&&(l.profileUpload=c.first),e.iGM(c=e.CRH())&&(l.docUpload=c),e.iGM(c=e.CRH())&&(l.docName=c)}},decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup","submit"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["type","button","mat-button","","color","primary",1,"col-4","offset-8",3,"click"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],[1,"row","my-2"],["type","button","mat-button","","color","primary","class","col-6",3,"click",4,"ngIf"],["type","button","mat-button","","color","primary",1,"",3,"ngClass","click"],["type","file","id","profileUpload","name","profileUpload","accept","image/*",2,"display","none"],["profileUpload",""],["formArrayName","documentList"],[1,"row","my-4"],[1,"col-2","text-end"],[3,"addEvent"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],["class","col-2",4,"ngIf"],[3,"value"],["type","button","mat-button","","color","primary",1,"col-6",3,"click"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId",3,"selectionChange"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-5","mt-2"],["type","button","mat-button","","color","primary","class","col-3",3,"disabled","click",4,"ngIf"],["type","file","accept","image/*,.pdf",2,"display","none"],["docUpload",""],[1,"col-6"],["docName",""],["type","button","mat-button","","color","primary","class","col-3",3,"click",4,"ngIf"],[1,"col-1","text-end","mt-2"],[3,"item","deleteEvent"],["type","button","mat-button","","color","primary",1,"col-3",3,"disabled","click"],["type","button","mat-button","","color","primary",1,"col-3",3,"click"]],template:function(n,l){1&n&&(e.YNc(0,Ae,2,0,"app-form-heading",0),e.YNc(1,ke,77,13,"div",1)),2&n&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.sg,_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,b.KE,b.hX,b.R9,Q.Nt,F.lW,d.xY,Y.gD,k.ey,j.Rr,J.Mq,J.hl,J.nW,Ze.W,B.b,W.E,H.H]}),t})();var G=m(5861),X=m(8064),z=m(7392);let $=(()=>{const i=class{constructor(){this.viewEvent=new U.x}viewItem(){this.viewEvent.next(this.item)}};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-action-icon"]],inputs:{item:"item"},outputs:{viewEvent:"viewEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(n,l){1&n&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.viewItem()}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA()())},dependencies:[F.nh,z.Hw]}),t})(),ee=(()=>{const i=class{constructor(){this.downloadEvent=new U.x}downloadItem(){this.downloadEvent.next(this.item)}};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-download-action-icon"]],inputs:{item:"item"},outputs:{downloadEvent:"downloadEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(n,l){1&n&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.downloadItem()}),e.TgZ(1,"mat-icon"),e._uU(2,"download"),e.qZA()())},dependencies:[F.nh,z.Hw]}),t})();function Pe(t,i){1&t&&(e.TgZ(0,"app-form-heading"),e._uU(1," View Employee\n"),e.qZA())}function Ke(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ge(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Be(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function He(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function $e(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function We(t,i){if(1&t&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ve(t,i){1&t&&(e.TgZ(0,"label",49),e._uU(1,"Doc Uploaded"),e.qZA())}function je(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-view-action-icon",50),e.NdJ("viewEvent",function(n){e.CHM(a);const l=e.oxw(3);return e.KtG(l.viewDoc(n))}),e.qZA()}if(2&t){const a=e.oxw().index;e.Q6J("item",a)}}function Xe(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-download-action-icon",51),e.NdJ("downloadEvent",function(n){e.CHM(a);const l=e.oxw(3);return e.KtG(l.downloadDoc(n))}),e.qZA()}if(2&t){const a=e.oxw().index;e.Q6J("item",a)}}function ze(t,i){if(1&t&&(e.TgZ(0,"div",35)(1,"div",6)(2,"mat-form-field",12)(3,"mat-label"),e._uU(4,"Doc Type"),e.qZA(),e.TgZ(5,"mat-select",36,37),e.YNc(7,We,2,2,"mat-option",11),e.qZA()(),e.TgZ(8,"mat-form-field",12)(9,"mat-label"),e._uU(10,"Identifier"),e.qZA(),e._UZ(11,"input",38),e.qZA(),e.TgZ(12,"mat-form-field",39)(13,"mat-label"),e._uU(14,"Expiry"),e.qZA(),e._UZ(15,"input",40)(16,"mat-datepicker-toggle",24)(17,"mat-datepicker",null,25),e.qZA(),e._UZ(19,"input",41,42)(21,"input",43,44),e.TgZ(23,"div",45),e.YNc(24,Ve,2,0,"label",46),e.YNc(25,je,1,1,"app-view-action-icon",47),e.YNc(26,Xe,1,1,"app-download-action-icon",48),e.qZA()()()),2&t){const a=i.index,o=e.MAs(18),n=e.MAs(20),l=e.MAs(22),c=e.oxw(2);e.Q6J("formGroupName",a),e.xp6(7),e.Q6J("ngForOf",c.manageData.documentTypeList),e.xp6(8),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(8),e.Q6J("ngIf",n.value.length>0&&l.value.length>0),e.xp6(1),e.Q6J("ngIf",n.value.length>0&&l.value.length>0&&c.allowExport),e.xp6(1),e.Q6J("ngIf",n.value.length>0&&l.value.length>0&&c.allowExport)}}function et(t,i){if(1&t&&(e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field",9)(10,"mat-label"),e._uU(11,"Gender"),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,Ke,2,2,"mat-option",11),e.qZA()(),e.TgZ(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Code"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"mat-form-field",14)(19,"mat-label"),e._uU(20,"Nationality"),e.qZA(),e.TgZ(21,"mat-select",15),e.YNc(22,Ge,2,2,"mat-option",11),e.qZA()()(),e.TgZ(23,"div",6)(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e._uU(27,"Visa Company"),e.qZA(),e.TgZ(28,"mat-select",18),e.YNc(29,Be,2,2,"mat-option",11),e.qZA()()(),e.TgZ(30,"div",16)(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Work Site"),e.qZA(),e.TgZ(34,"mat-select",19),e.YNc(35,He,2,2,"mat-option",11),e.qZA()()(),e.TgZ(36,"div",20)(37,"mat-form-field",17)(38,"mat-label"),e._uU(39,"Position"),e.qZA(),e.TgZ(40,"mat-select",21),e.YNc(41,$e,2,2,"mat-option",11),e.qZA()()(),e.TgZ(42,"div",20)(43,"mat-form-field",22)(44,"mat-label"),e._uU(45,"Joining Date"),e.qZA(),e._UZ(46,"input",23)(47,"mat-datepicker-toggle",24)(48,"mat-datepicker",null,25),e.qZA()()()(),e.TgZ(50,"div",20)(51,"div",26)(52,"div",27),e._UZ(53,"img",28),e.qZA()()()(),e.TgZ(54,"div",4)(55,"div",27)(56,"div",29)(57,"div",30)(58,"div",20)(59,"label"),e._uU(60,"Document"),e.qZA()()(),e.TgZ(61,"div",31),e.YNc(62,ze,27,7,"div",32),e.qZA()(),e.TgZ(63,"div",4)(64,"mat-slide-toggle",33),e._uU(65,"Active"),e.qZA()()()()()()),2&t){const a=e.MAs(49),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.manageForm),e.xp6(12),e.Q6J("ngForOf",o.manageData.personManageData.genderList),e.xp6(9),e.Q6J("ngForOf",o.manageData.addressManageData.countryList),e.xp6(7),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.companyList),e.xp6(6),e.Q6J("ngForOf",o.manageData.groupList),e.xp6(5),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("src",o.profileSrc,e.LSH),e.xp6(9),e.Q6J("ngForOf",o.documentListControls)}}let tt=(()=>{const i=class{constructor(o,n,l,c,p,f,x){this.dialogRef=o,this.menuRoleService=n,this.employeeService=l,this.ds=c,this.renderer=p,this.fileService=f,this.data=x,this.isLoaded=!1,this.profileSrc=null,this.allowExport=!1}get documentListControls(){return this.manageForm.get("documentList").controls}ngOnInit(){this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.People,y.k.export),this.manageForm=new r.cw({person:new r.cw({firstName:new r.NI({value:null,disabled:!0}),gender:new r.NI({value:null,disabled:!0}),dob:new r.NI({value:null,disabled:!0})}),code:new r.NI({value:null,disabled:!0}),visaCompanyId:new r.NI({value:null,disabled:!0}),workingCompanyId:new r.NI({value:null,disabled:!0}),groupId:new r.NI({value:null,disabled:!0}),joiningDate:new r.NI({value:null,disabled:!0}),homeAddress:new r.cw({addressType:new r.NI({value:null,disabled:!0}),name:new r.NI({value:null,disabled:!0}),countryId:new r.NI({value:null,disabled:!0})}),documentList:new r.Oe([]),active:new r.NI({value:null,disabled:!0})}),this.isLoaded=!1,this.sub=this.employeeService.getEmployeeManageData().pipe((0,u.w)(o=>(this.manageData=o.item,this.employeeService.getEmployeeById(this.data?.id)))).subscribe(o=>{this.isLoaded=!0;let n=o.item;this.profileSrc=null==n.profileUrl?N.O.profileEmptySrc:`${(0,K.S)()}/profile/${n.profileUrl}`,this.manageForm.patchValue({person:{firstName:n.person.firstName,gender:n.person.gender,dob:n.person.dOB},code:n.code,visaCompanyId:n.visaCompany.id,workingCompanyId:n.workingCompany.id,groupId:n.group.id,joiningDate:this.ds.responseFormatToDate(n.joiningDate),homeAddress:{addressType:n.homeAddress.addressType,name:n.homeAddress.name,countryId:n.homeAddress.country.id},active:n.active}),n.documentList.forEach(l=>{let c=null!=l.expiryDate?this.ds.responseFormatToDate(l.expiryDate):null;this.manageForm.get("documentList").push(new r.cw({id:new r.NI(l.id),documentTypeId:new r.NI({value:l.documentType.id,disabled:!0}),identifier:new r.NI({value:l.identifier,disabled:!0}),expiryDate:new r.NI({value:c,disabled:!0}),file:new r.NI(null),fileName:new r.NI(l.fileName)}))})})}viewDoc(o){var n=this;let c=this.manageForm.get("documentList").at(o).getRawValue().id;this.sub=this.employeeService.exportEmployeeDoc(c).subscribe(function(){var p=(0,G.Z)(function*(f){n.fileService.viewFile(f)});return function(f){return p.apply(this,arguments)}}())}downloadDoc(o){var n=this,l=this.manageForm.get("documentList").at(o);let c=l.getRawValue().id,p=l.getRawValue().identifier,f=this.manageData.documentTypeList.find(D=>D.id==l.getRawValue().documentTypeId),x=`${this.data.code}_${f.code}`;null!=p&&(x=`${x}_${p}`),this.sub=this.employeeService.exportEmployeeDoc(c).subscribe(function(){var D=(0,G.Z)(function*(w){n.fileService.downloadFile(w,x)});return function(w){return D.apply(this,arguments)}}())}ngOnDestroy(){this.sub?.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(d.so),e.Y36(P.K),e.Y36(O.G),e.Y36(M.R),e.Y36(e.Qsj),e.Y36(X.I),e.Y36(d.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-employee"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content","","class","row",4,"ngIf"],["mat-dialog-content","",1,"row"],[1,"my-2",3,"formGroup"],[1,"row"],[1,"col-10"],[1,"row","form-group"],["formGroupName","person",1,"form-field","col-5"],["type","text","matInput","","formControlName","firstName"],["formGroupName","person",1,"form-field","col-2"],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["type","text","matInput","","formControlName","code"],["formGroupName","homeAddress",1,"form-field","col-3"],["formControlName","countryId"],[1,"col-4"],[1,"form-field","col-12"],["formControlName","visaCompanyId"],["formControlName","workingCompanyId"],[1,"col-2"],["formControlName","groupId"],["appearance","outline",1,"col-12","form-field"],["matInput","","formControlName","joiningDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","text-center"],[1,"col-12"],["width","150","height","160",1,"rounded",3,"src"],["formArrayName","documentList"],[1,"row","my-4"],[1,"mt-3"],["class","col-12 form-group",3,"formGroupName",4,"ngFor","ngForOf"],["formControlName","active",1,"form-field","col-2","offset-8","text-start"],[3,"value"],[1,"col-12","form-group",3,"formGroupName"],["formControlName","documentTypeId"],["typeId",""],["type","text","matInput","","formControlName","identifier"],["appearance","outline",1,"col-2","form-field"],["matInput","","formControlName","expiryDate",3,"matDatepicker"],["hidden","","formControlName","id"],["id",""],["hidden","","formControlName","fileName"],["fileName",""],[1,"col-6","mt-2"],["class","col-8 text-center",4,"ngIf"],["class","mx-4",3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],[1,"col-8","text-center"],[1,"mx-4",3,"item","viewEvent"],[3,"item","downloadEvent"]],template:function(n,l){1&n&&(e.YNc(0,Pe,2,0,"app-form-heading",0),e.YNc(1,et,66,10,"div",1)),2&n&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.sg,_.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,b.KE,b.hX,b.R9,Q.Nt,d.xY,Y.gD,k.ey,j.Rr,J.Mq,J.hl,J.nW,$,ee,H.H]}),t})();var te=m(7974),oe=m(4521),ot=m(6141),nt=m(1763);const it=["page"];function at(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Name "),e.qZA())}function lt(t,i){1&t&&e._UZ(0,"img",27)}function rt(t,i){if(1&t&&e._UZ(0,"img",28),2&t){const a=e.oxw().$implicit,o=e.oxw();e.hYB("src","",o.baseUrl,"/profile/",a.profileUrl,"",e.LSH)}}function ct(t,i){if(1&t&&(e.TgZ(0,"td",23),e.YNc(1,lt,1,0,"img",24),e.YNc(2,rt,1,2,"img",25),e.TgZ(3,"app-active-text",26),e._uU(4),e.qZA()()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==a.profileUrl),e.xp6(1),e.Q6J("ngIf",null!=a.profileUrl),e.xp6(1),e.Q6J("active",a.active),e.xp6(1),e.Oqu(a.name)}}function mt(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Code "),e.qZA())}function st(t,i){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.code," ")}}function pt(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Visa Company (Work Site) "),e.qZA())}function dt(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.visaCompany," (",a.workingCompany,")")}}function ut(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.hij("",a.visaCompany," (same)")}}function _t(t,i){if(1&t&&(e.TgZ(0,"td",23),e.YNc(1,dt,2,2,"span",30),e.YNc(2,ut,2,1,"span",30),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",a.visaCompany!=a.workingCompany),e.xp6(1),e.Q6J("ngIf",a.visaCompany==a.workingCompany)}}function ft(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Profession "),e.qZA())}function gt(t,i){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.group," ")}}function ht(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Nationality "),e.qZA())}function yt(t,i){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.nationality," ")}}function vt(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1," Joining Date "),e.qZA())}function Et(t,i){if(1&t&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.joiningDate," ")}}function xt(t,i){1&t&&(e.TgZ(0,"th",22)(1,"i",31),e._uU(2,"attachment"),e.qZA(),e._uU(3," / "),e.TgZ(4,"i",31),e._uU(5,"description"),e.qZA()())}function Tt(t,i){if(1&t&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function Ct(t,i){if(1&t&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function Zt(t,i){if(1&t&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.AsE("",a.fileCount,"/",a.docCount,"")}}function It(t,i){if(1&t&&(e.TgZ(0,"td",29),e.YNc(1,Tt,2,2,"span",32),e.YNc(2,Ct,2,2,"span",33),e.YNc(3,Zt,2,2,"span",34),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",0==a.fileCount),e.xp6(1),e.Q6J("ngIf",a.fileCount==a.docCount),e.xp6(1),e.Q6J("ngIf",a.fileCount<a.docCount&&a.fileCount>0)}}function Dt(t,i){1&t&&e._UZ(0,"th",38)}function wt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-edit-action-icon",43),e.NdJ("editEvent",function(){e.CHM(a);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.edit(n))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function At(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-delete-action-icon",44),e.NdJ("deleteEvent",function(){e.CHM(a);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.delete(n))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function Nt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"td",39)(1,"app-view-action-icon",40),e.NdJ("viewEvent",function(){const l=e.CHM(a).$implicit,c=e.oxw();return e.KtG(c.view(l))}),e.qZA(),e.YNc(2,wt,1,1,"app-edit-action-icon",41),e.YNc(3,At,1,1,"app-delete-action-icon",42),e.qZA()}if(2&t){const a=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("item",a),e.xp6(1),e.Q6J("ngIf",o.allowEdit),e.xp6(1),e.Q6J("ngIf",o.allowDelete)}}function bt(t,i){1&t&&e._UZ(0,"tr",45)}function Ut(t,i){1&t&&e._UZ(0,"tr",46)}const Lt=function(){return[10,20,50]};let qt=(()=>{const i=class{constructor(o,n){this.menuRoleService=o,this.dialog=n,this.moreEvent=new U.x,this.editEvent=new U.x,this.deleteEvent=new U.x,this.displayedColumns=["name","code","company","group","nationality","joiningDate","d/f","manage"],this.baseUrl=(0,K.S)(),this.allowEdit=!1,this.allowDelete=!1}ngOnInit(){this.allowEdit=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.People,y.k.edit),this.allowDelete=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.People,y.k.delete)}ngOnChanges(o){this.employeeList.paginator=this.paginator}ngAfterViewInit(){this.employeeList.paginator=this.paginator}more(){this.moreEvent.next(!0)}edit(o){this.dialog.open(Re,{data:o,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(l=>{1==l&&this.editEvent.next()})}view(o){this.dialog.open(tt,{data:o,width:"85%",maxHeight:"auto"})}delete(o){this.deleteEvent.next(o)}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(P.K),e.Y36(d.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-list"]],viewQuery:function(n,l){if(1&n&&e.Gf(it,5),2&n){let c;e.iGM(c=e.CRH())&&(l.paginator=c.first)}},inputs:{employeeList:"employeeList",count:"count"},outputs:{moreEvent:"moreEvent",editEvent:"editEvent",deleteEvent:"deleteEvent"},features:[e.TTD],decls:33,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","code"],["mat-cell","","class","col-1",4,"matCellDef"],["matColumnDef","company"],["matColumnDef","group"],["matColumnDef","nationality"],["matColumnDef","joiningDate"],["matColumnDef","d/f"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],[1,"ms-2",3,"active"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-cell","",1,"col-1"],[4,"ngIf"],[1,"material-icons"],["class","bg-warn p-1 rounded-pill text-white",4,"ngIf"],["class","bg-success p-1 rounded-pill text-white",4,"ngIf"],["class","bg-accent p-1 rounded-pill",4,"ngIf"],[1,"bg-warn","p-1","rounded-pill","text-white"],[1,"bg-success","p-1","rounded-pill","text-white"],[1,"bg-accent","p-1","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col","text-end"],[3,"item","viewEvent"],[3,"item","editEvent",4,"ngIf"],[3,"item","deleteEvent",4,"ngIf"],[3,"item","editEvent"],[3,"item","deleteEvent"],["mat-header-row",""],["mat-row",""]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,at,2,0,"th",3),e.YNc(4,ct,5,4,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,mt,2,0,"th",3),e.YNc(7,st,2,1,"td",6),e.BQk(),e.ynx(8,7),e.YNc(9,pt,2,0,"th",3),e.YNc(10,_t,3,2,"td",4),e.BQk(),e.ynx(11,8),e.YNc(12,ft,2,0,"th",3),e.YNc(13,gt,2,1,"td",6),e.BQk(),e.ynx(14,9),e.YNc(15,ht,2,0,"th",3),e.YNc(16,yt,2,1,"td",6),e.BQk(),e.ynx(17,10),e.YNc(18,vt,2,0,"th",3),e.YNc(19,Et,2,1,"td",6),e.BQk(),e.ynx(20,11),e.YNc(21,xt,6,0,"th",3),e.YNc(22,It,4,3,"td",6),e.BQk(),e.ynx(23,12),e.YNc(24,Dt,1,0,"th",13),e.YNc(25,Nt,4,3,"td",14),e.BQk(),e.YNc(26,bt,1,0,"tr",15),e.YNc(27,Ut,1,0,"tr",16),e.qZA(),e._UZ(28,"mat-paginator",17,18),e.qZA(),e.TgZ(30,"div",19)(31,"div",20)(32,"app-server-pagination",21),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("dataSource",l.employeeList),e.xp6(25),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Lt)),e.xp6(4),e.Q6J("loaded",l.employeeList.data.length)("count",l.count))},dependencies:[_.O5,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,te.NW,oe.H,ot.j,B.b,nt.p,$]}),t})();function Jt(t,i){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function St(t,i){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Ft(t,i){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}let Ot=(()=>{const i=class{constructor(){this.onSearchChange=new U.x,this.onSearch=new U.x}ngOnInit(){this.filterForm=new r.cw({searchKey:new r.NI(""),companyId:new r.NI(""),groupId:new r.NI(""),countryId:new r.NI("")}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(o=>{this.onSearchChange.next(o)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",groupId:"",countryId:""})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:34,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","offset-1","mt-2",3,"click"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","countryId"],["formControlName","groupId"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(n,l){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Company"),e.qZA(),e.TgZ(7,"mat-select",4)(8,"mat-option",5),e._uU(9,"All"),e.qZA(),e.YNc(10,Jt,2,2,"mat-option",6),e.qZA()(),e.TgZ(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Nationality"),e.qZA(),e.TgZ(14,"mat-select",8)(15,"mat-option",5),e._uU(16,"All"),e.qZA(),e.YNc(17,St,2,2,"mat-option",6),e.qZA()(),e.TgZ(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"Profession"),e.qZA(),e.TgZ(21,"mat-select",9)(22,"mat-option",5),e._uU(23,"All"),e.qZA(),e.YNc(24,Ft,2,2,"mat-option",6),e.qZA()(),e.TgZ(25,"mat-form-field",10)(26,"mat-label"),e._uU(27,"Search"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"div",12)(30,"button",13)(31,"i",14),e._uU(32,"search"),e.qZA(),e._uU(33," Search"),e.qZA()()()()),2&n&&(e.Q6J("formGroup",l.filterForm),e.xp6(10),e.Q6J("ngForOf",l.searchData.companyList),e.xp6(7),e.Q6J("ngForOf",l.searchData.countryList),e.xp6(7),e.Q6J("ngForOf",l.searchData.groupList))},dependencies:[_.sg,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,b.KE,b.hX,Q.Nt,F.lW,Y.gD,k.ey]}),t})();const Mt=["employeeImport"];function Qt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-employee-search-filter",3),e.NdJ("onSearchChange",function(n){e.CHM(a);const l=e.oxw();return e.KtG(l.changeSearchData(n))})("onSearch",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.getList())}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("searchData",a.searchData)}}function Yt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-import-button",8),e.NdJ("importEvent",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.importEmployee())}),e.qZA()}}function kt(t,i){1&t&&e._UZ(0,"input",9,10)}function Rt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-add-button",11),e.NdJ("addEvent",function(){e.CHM(a);const n=e.oxw(2);return e.KtG(n.addEmployee())}),e.qZA()}if(2&t){const a=e.oxw(2);e.Q6J("ngClass",0==a.allowImport?"offset-11":"offset-0")}}function Pt(t,i){if(1&t&&(e.TgZ(0,"div",4),e.YNc(1,Yt,1,0,"app-import-button",5),e.YNc(2,kt,2,0,"input",6),e.YNc(3,Rt,1,1,"app-add-button",7),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.allowImport),e.xp6(1),e.Q6J("ngIf",a.allowImport),e.xp6(1),e.Q6J("ngIf",a.allowAdd)}}function Kt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-employee-list",12),e.NdJ("moreEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.getList())})("editEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.editEmployee())})("deleteEvent",function(n){e.CHM(a);const l=e.oxw();return e.KtG(l.deleteEmployee(n))}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("employeeList",a.dataSource)("count",a.count)}}let Gt=(()=>{const i=class{constructor(o,n,l){this.menuRoleService=o,this.employeeService=n,this.dialog=l,this.isLoaded=!1,this.req=new Ee,this.eList=[],this.count=0,this.allowAdd=!1,this.allowImport=!1}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeService.getEmployeeSearchData().pipe((0,u.w)(o=>(this.searchData=o.item,this.isLoaded=!0,this.dataSource=new C.by(this.eList),this.req.pagination.pageSize=10,this.allowAdd=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.People,y.k.add),this.allowImport=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.People,y.k.import),this.employeeService.getEmployeeList(this.req)))).subscribe(o=>{this.update(o)})}ngAfterViewInit(){}changeSearchData(o){console.log(o),this.eList=[],this.dataSource=new C.by(this.eList),this.req.searchKey=o.searchKey,this.req.companyId=""!=o.companyId?o.companyId:null,this.req.groupId=""!=o.groupId?o.groupId:null,this.req.countryId=""!=o.countryId?o.countryId:null,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new C.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(o){o?.response?.status==T.s.success&&(this.eList.push.apply(this.eList,o.list),this.dataSource=new C.by(this.eList),this.count=o.totalRecords,o.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.employeeService.getEmployeeList(this.req).subscribe(o=>{this.update(o)})}addEmployee(){this.dialog.open(ve,{data:null,width:"85%",maxHeight:"auto"}).afterClosed().subscribe(n=>{1==n&&this.refreshList()})}editEmployee(){this.refreshList()}deleteEmployee(o){confirm(E.J.confirmDelete(o.name))&&(this.sub=this.employeeService.deleteEmployee(o.id).subscribe(n=>{n?.status==T.s.success?this.refreshList():alert(n?.message)}))}importEmployee(){const o=this.employeeImport.nativeElement;o.onchange=()=>{if(o.files&&o.files[0]){const n=o.files[0];if(!confirm(E.J.areYouSureTo))return void(o.value="");const l=new FormData;l.append("file",n),this.importSub=this.employeeService.importEmployee(l).subscribe(c=>{alert(JSON.stringify(c)),this.refreshList()})}},o.click()}ngOnDestroy(){this.sub?.unsubscribe(),this.importSub?.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(P.K),e.Y36(O.G),e.Y36(d.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee"]],viewQuery:function(n,l){if(1&n&&e.Gf(Mt,5),2&n){let c;e.iGM(c=e.CRH())&&(l.employeeImport=c.first)}},decls:3,vars:3,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],["class","row",4,"ngIf"],[3,"employeeList","count","moreEvent","editEvent","deleteEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[1,"row"],["class","col-1 offset-10",3,"importEvent",4,"ngIf"],["type","file","id","employeeImport","name","employeeImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","style","display: none;",4,"ngIf"],["class","col-1",3,"ngClass","addEvent",4,"ngIf"],[1,"col-1","offset-10",3,"importEvent"],["type","file","id","employeeImport","name","employeeImport","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",2,"display","none"],["employeeImport",""],[1,"col-1",3,"ngClass","addEvent"],[3,"employeeList","count","moreEvent","editEvent","deleteEvent"]],template:function(n,l){1&n&&(e.YNc(0,Qt,1,1,"app-employee-search-filter",0),e.YNc(1,Pt,4,3,"div",1),e.YNc(2,Kt,1,2,"app-employee-list",2)),2&n&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",(l.allowAdd||l.allowImport)&&l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.mk,_.O5,xe.L,Te,qt,Ot]}),t})();var Bt=m(1635);class Ht extends V.G{}var $t=m(538);function Wt(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function Vt(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}function jt(t,i){if(1&t&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.name)}}let Xt=(()=>{const i=class{constructor(){this.onSearchChange=new U.x,this.onSearch=new U.x}ngOnInit(){this.filterForm=new r.cw({searchKey:new r.NI(""),companyId:new r.NI(""),docTypeId:new r.NI(""),mode:new r.NI(4,[r.kI.required]),expiryDays:new r.NI(null)}),this.valueChangeSub=this.filterForm.valueChanges.subscribe(o=>{this.onSearchChange.next(o)})}search(){this.onSearch.next()}resetFilter(){this.filterForm.patchValue({searchKey:"",companyId:"",docTypeId:"",mode:4,expiryDays:null})}ngOnDestroy(){this.valueChangeSub.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-doc-search-filter"]],inputs:{searchData:"searchData"},outputs:{onSearchChange:"onSearchChange",onSearch:"onSearch"},decls:36,vars:4,consts:[[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","form-group"],["type","button","mat-button","","color","primary",1,"col-1","mt-2",3,"click"],["appearance","outline","floatLabel","always",1,"form-field","col-1"],["type","number","placeholder","","matInput","","formControlName","expiryDays"],[1,"form-field","col-3"],["formControlName","companyId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-2"],["formControlName","docTypeId"],["formControlName","mode"],["appearance","outline","floatLabel","always",1,"form-field","col-2"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-1"],["type","submit","mat-raised-button","","color","primary",1,"col-12","offset-0","mt-2"],[1,"material-icons"],[3,"value"]],template:function(n,l){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return l.search()}),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return l.resetFilter()}),e._uU(3,"Reset"),e.qZA(),e.TgZ(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Expire In"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Company"),e.qZA(),e.TgZ(11,"mat-select",6)(12,"mat-option",7),e._uU(13,"All"),e.qZA(),e.YNc(14,Wt,2,2,"mat-option",8),e.qZA()(),e.TgZ(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Doc Type"),e.qZA(),e.TgZ(18,"mat-select",10)(19,"mat-option",7),e._uU(20,"All"),e.qZA(),e.YNc(21,Vt,2,2,"mat-option",8),e.qZA()(),e.TgZ(22,"mat-form-field",9)(23,"mat-label"),e._uU(24,"Mode"),e.qZA(),e.TgZ(25,"mat-select",11),e.YNc(26,jt,2,2,"mat-option",8),e.qZA()(),e.TgZ(27,"mat-form-field",12)(28,"mat-label"),e._uU(29,"Search"),e.qZA(),e._UZ(30,"input",13),e.qZA(),e.TgZ(31,"div",14)(32,"button",15)(33,"i",16),e._uU(34,"search"),e.qZA(),e._uU(35," Search"),e.qZA()()()()),2&n&&(e.Q6J("formGroup",l.filterForm),e.xp6(14),e.Q6J("ngForOf",l.searchData.companyList),e.xp6(7),e.Q6J("ngForOf",l.searchData.docTypeList),e.xp6(5),e.Q6J("ngForOf",l.searchData.searchModeList))},dependencies:[_.sg,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,b.KE,b.hX,Q.Nt,F.lW,Y.gD,k.ey]}),t})();const zt=["page"];function eo(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," DocType "),e.qZA())}function to(t,i){1&t&&(e.TgZ(0,"span",26)(1,"i",27),e._uU(2,"attachment"),e.qZA()())}function oo(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.YNc(2,to,3,0,"span",25),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.documentType.name," "),e.xp6(1),e.Q6J("ngIf",null!=a.fileName)}}function no(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Identifier "),e.qZA())}function io(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.identifier," ")}}function ao(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Expiry (Days) "),e.qZA())}function lo(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.AsE(" ",a.expiryDate," (",a.expiryDays,") ")}}function ro(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Name "),e.qZA())}function co(t,i){1&t&&e._UZ(0,"img",32)}function mo(t,i){if(1&t&&e._UZ(0,"img",33),2&t){const a=e.oxw().$implicit,o=e.oxw();e.hYB("src","",o.baseUrl,"/profile/",a.employee.profileUrl,"",e.LSH)}}function so(t,i){if(1&t&&(e.TgZ(0,"td",28),e.YNc(1,co,1,0,"img",29),e.YNc(2,mo,1,2,"img",30),e.TgZ(3,"span",31),e._uU(4),e.qZA()()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==a.employee.profileUrl),e.xp6(1),e.Q6J("ngIf",null!=a.employee.profileUrl),e.xp6(2),e.AsE("",a.employee.name," (",a.employee.code,")")}}function po(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Work Site "),e.qZA())}function uo(t,i){if(1&t&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.hij(" ",a.employee.workingCompany," ")}}function _o(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Status "),e.qZA())}function fo(t,i){1&t&&(e.TgZ(0,"span",39),e._uU(1,"Valid"),e.qZA())}function go(t,i){1&t&&(e.TgZ(0,"span",40),e._uU(1,"Expired"),e.qZA())}function ho(t,i){1&t&&(e.TgZ(0,"span",41),e._uU(1,"Near Expiry"),e.qZA())}function yo(t,i){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,fo,2,0,"span",36),e.YNc(2,go,2,0,"span",37),e.YNc(3,ho,2,0,"span",38),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",1==a.valid),e.xp6(1),e.Q6J("ngIf",1==a.expired),e.xp6(1),e.Q6J("ngIf",1==a.nearExpiry)}}function vo(t,i){1&t&&e._UZ(0,"th",42)}function Eo(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-view-action-icon",46),e.NdJ("viewEvent",function(n){e.CHM(a);const l=e.oxw(2);return e.KtG(l.viewDoc(n))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function xo(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-download-action-icon",47),e.NdJ("downloadEvent",function(n){e.CHM(a);const l=e.oxw(2);return e.KtG(l.downloadDoc(n))}),e.qZA()}if(2&t){const a=e.oxw().$implicit;e.Q6J("item",a)}}function To(t,i){if(1&t&&(e.TgZ(0,"td",43),e.YNc(1,Eo,1,1,"app-view-action-icon",44),e.YNc(2,xo,1,1,"app-download-action-icon",45),e.qZA()),2&t){const a=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=a.fileName&&o.allowExport),e.xp6(1),e.Q6J("ngIf",null!=a.fileName&&o.allowExport)}}function Co(t,i){1&t&&e._UZ(0,"tr",48)}function Zo(t,i){1&t&&e._UZ(0,"tr",49)}const Io=function(){return[10,20,50]};let Do=(()=>{const i=class{constructor(o,n){this.menuRoleService=o,this.dialog=n,this.moreEvent=new U.x,this.displayedColumns=["docType","identifier","expiryDate","name","company","status","manage"],this.baseUrl=(0,K.S)(),this.allowExport=!1,this.viewDocEvent=new U.x,this.downloadDocEvent=new U.x}ngOnInit(){this.allowExport=this.menuRoleService.isMenuRoleAuthorizedSingle(s.w.EmployeeDoc,y.k.export)}ngOnChanges(o){this.employeeDocList.paginator=this.paginator}ngAfterViewInit(){this.employeeDocList.paginator=this.paginator}more(){this.moreEvent.next(!0)}viewDoc(o){this.viewDocEvent.next(o)}downloadDoc(o){this.downloadDocEvent.next(o)}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36(P.K),e.Y36(d.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-doc-list"]],viewQuery:function(n,l){if(1&n&&e.Gf(zt,5),2&n){let c;e.iGM(c=e.CRH())&&(l.paginator=c.first)}},inputs:{employeeDocList:"employeeDocList",count:"count"},outputs:{moreEvent:"moreEvent",viewDocEvent:"viewDocEvent",downloadDocEvent:"downloadDocEvent"},features:[e.TTD],decls:30,vars:7,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","docType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col",4,"matCellDef"],["matColumnDef","identifier"],["matColumnDef","expiryDate"],["matColumnDef","name"],["mat-cell","","class","col-3",4,"matCellDef"],["matColumnDef","company"],["mat-cell","","class","col-2",4,"matCellDef"],["matColumnDef","status"],["mat-cell","","class","col-1",4,"matCellDef"],["matColumnDef","manage"],["mat-header-cell","","class","text-end",4,"matHeaderCellDef"],["mat-cell","","class","col-1 text-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","",3,"pageSizeOptions"],["page",""],[1,"row"],[1,"col-6"],[3,"loaded","count","loadMore"],["mat-header-cell",""],["mat-cell","",1,"col"],["class","ms-3",4,"ngIf"],[1,"ms-3"],[1,"material-icons","text-success"],["mat-cell","",1,"col-3"],["src","assets/profile_empty.jpeg","class","rounded-circle img-thumbnail","width","50","height","50",4,"ngIf"],["class","rounded-circle img-thumbnail","width","45","height","45",3,"src",4,"ngIf"],[1,"ms-2"],["src","assets/profile_empty.jpeg","width","50","height","50",1,"rounded-circle","img-thumbnail"],["width","45","height","45",1,"rounded-circle","img-thumbnail",3,"src"],["mat-cell","",1,"col-2"],["mat-cell","",1,"col-1"],["class","bg-success p-2 text-light rounded-pill",4,"ngIf"],["class","bg-warn p-2 text-light rounded-pill",4,"ngIf"],["class","bg-accent p-2 text-dark rounded-pill",4,"ngIf"],[1,"bg-success","p-2","text-light","rounded-pill"],[1,"bg-warn","p-2","text-light","rounded-pill"],[1,"bg-accent","p-2","text-dark","rounded-pill"],["mat-header-cell","",1,"text-end"],["mat-cell","",1,"col-1","text-end"],[3,"item","viewEvent",4,"ngIf"],[3,"item","downloadEvent",4,"ngIf"],[3,"item","viewEvent"],[3,"item","downloadEvent"],["mat-header-row",""],["mat-row",""]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,eo,2,0,"th",3),e.YNc(4,oo,3,2,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,no,2,0,"th",3),e.YNc(7,io,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,ao,2,0,"th",3),e.YNc(10,lo,2,2,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,ro,2,0,"th",3),e.YNc(13,so,5,4,"td",8),e.BQk(),e.ynx(14,9),e.YNc(15,po,2,0,"th",3),e.YNc(16,uo,2,1,"td",10),e.BQk(),e.ynx(17,11),e.YNc(18,_o,2,0,"th",3),e.YNc(19,yo,4,3,"td",12),e.BQk(),e.ynx(20,13),e.YNc(21,vo,1,0,"th",14),e.YNc(22,To,3,2,"td",15),e.BQk(),e.YNc(23,Co,1,0,"tr",16),e.YNc(24,Zo,1,0,"tr",17),e.qZA(),e._UZ(25,"mat-paginator",18,19),e.qZA(),e.TgZ(27,"div",20)(28,"div",21)(29,"app-server-pagination",22),e.NdJ("loadMore",function(){return l.more()}),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("dataSource",l.employeeDocList),e.xp6(22),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Io)),e.xp6(4),e.Q6J("loaded",l.employeeDocList.data.length)("count",l.count))},dependencies:[_.O5,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,te.NW,oe.H,$,ee]}),t})();function wo(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-employee-doc-search-filter",2),e.NdJ("onSearchChange",function(n){e.CHM(a);const l=e.oxw();return e.KtG(l.changeSearchData(n))})("onSearch",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.getList())}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("searchData",a.searchData)}}function Ao(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"app-employee-doc-list",3),e.NdJ("moreEvent",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.getList())})("viewDocEvent",function(n){e.CHM(a);const l=e.oxw();return e.KtG(l.viewDoc(n))})("downloadDocEvent",function(n){e.CHM(a);const l=e.oxw();return e.KtG(l.downloadDoc(n))}),e.qZA()}if(2&t){const a=e.oxw();e.Q6J("employeeDocList",a.dataSource)("count",a.count)}}const No=[{path:"",component:Gt},{path:"doc",component:(()=>{const i=class{constructor(o,n,l){this.employeeDocService=o,this.employeeService=n,this.fileService=l,this.isLoaded=!1,this.req=new Ht,this.eList=[],this.count=0}ngOnInit(){this.isLoaded=!1,this.sub=this.employeeDocService.getEmployeeDocSearchData().pipe((0,u.w)(o=>(this.searchData=o.item,this.isLoaded=!0,this.dataSource=new C.by(this.eList),this.req.pagination.pageSize=10,this.employeeDocService.getEmployeeDocList(this.req)))).subscribe(o=>{this.update(o)})}ngAfterViewInit(){}changeSearchData(o){console.log(o),this.eList=[],this.dataSource=new C.by(this.eList),this.req.searchKey=o.searchKey,this.req.companyId=""!=o.companyId?o.companyId:null,this.req.docTypeId=""!=o.docTypeId?o.docTypeId:null,this.req.mode=o.mode,this.req.expiryDays=o.expiryDays,this.req.pagination.pageNumber=1}refreshList(){this.eList=[],this.dataSource=new C.by(this.eList),this.req.pagination.pageNumber=1,this.getList()}update(o){o?.response?.status==T.s.success&&(this.eList.push.apply(this.eList,o.list),this.dataSource=new C.by(this.eList),this.count=o.totalRecords,o.list.length>0&&(this.req.pagination.pageNumber+=1))}getList(){this.sub=this.employeeDocService.getEmployeeDocList(this.req).subscribe(o=>{this.update(o)})}viewDoc(o){var n=this;this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var l=(0,G.Z)(function*(c){n.fileService.viewFile(c)});return function(c){return l.apply(this,arguments)}}())}downloadDoc(o){var n=this;let l=this.searchData.docTypeList.find(p=>p.id==o.documentType.id),c=`${o.employee.code}_${l.code}`;null!=o.identifier&&(c=`${c}_${o.identifier}`),this.sub=this.employeeService.exportEmployeeDoc(o.id).subscribe(function(){var p=(0,G.Z)(function*(f){n.fileService.downloadFile(f,c)});return function(f){return p.apply(this,arguments)}}())}ngOnDestroy(){this.sub?.unsubscribe()}};let t=i;return i.\u0275fac=function(n){return new(n||i)(e.Y36($t.L),e.Y36(O.G),e.Y36(X.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-doc"]],decls:2,vars:2,consts:[[3,"searchData","onSearchChange","onSearch",4,"ngIf"],[3,"employeeDocList","count","moreEvent","viewDocEvent","downloadDocEvent",4,"ngIf"],[3,"searchData","onSearchChange","onSearch"],[3,"employeeDocList","count","moreEvent","viewDocEvent","downloadDocEvent"]],template:function(n,l){1&n&&(e.YNc(0,wo,1,1,"app-employee-doc-search-filter",0),e.YNc(1,Ao,1,2,"app-employee-doc-list",1)),2&n&&(e.Q6J("ngIf",l.isLoaded),e.xp6(1),e.Q6J("ngIf",l.isLoaded))},dependencies:[_.O5,Xt,Do]}),t})(),pathMatch:"full"}];let bo=(()=>{const i=class{};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Bt.Bz.forChild(No)]}),t})();var Uo=m(529),Lo=m(3214),qo=m(1260);let Jo=(()=>{const i=class{};let t=i;return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.ez,bo,r.u5,r.UX,Uo.JF,Lo._,qo.m]}),t})()},6141:(L,Z,m)=>{m.d(Z,{j:()=>d});var _=m(4650),s=m(6895);function y(u,v){1&u&&_._UZ(0,"label",1)}const r=["*"];let d=(()=>{const v=class{};let u=v;return v.\u0275fac=function(h){return new(h||v)},v.\u0275cmp=_.Xpm({type:v,selectors:[["app-active-text"]],inputs:{active:"active"},ngContentSelectors:r,decls:2,vars:1,consts:[["class","bg-warn active-box",4,"ngIf"],[1,"bg-warn","active-box"]],template:function(h,E){1&h&&(_.F$t(),_.YNc(0,y,1,0,"label",0),_.Hsn(1)),2&h&&_.Q6J("ngIf",!E.active)},dependencies:[s.O5],styles:[".active-box[_ngcontent-%COMP%]{width:10px;height:10px;margin-right:5px}"]}),u})()},2696:(L,Z,m)=>{m.d(Z,{L:()=>r});var _=m(7579),s=m(4650),y=m(4859);let r=(()=>{const u=class{constructor(){this.addEvent=new _.x}addItem(){this.addEvent.next()}};let d=u;return u.\u0275fac=function(g){return new(g||u)},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-add-button"]],outputs:{addEvent:"addEvent"},decls:4,vars:0,consts:[["type","button","mat-raised-button","","color","primary",1,"col-12","my-2",3,"click"],[1,"material-icons"]],template:function(g,h){1&g&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return h.addItem()}),s.TgZ(1,"i",1),s._uU(2,"add"),s.qZA(),s._uU(3," Add"),s.qZA())},dependencies:[y.lW]}),d})()},2833:(L,Z,m)=>{m.d(Z,{L:()=>r});var _=m(7579),s=m(4650),y=m(4859);let r=(()=>{const u=class{constructor(){this.addEvent=new _.x}addItem(){this.addEvent.next()}};let d=u;return u.\u0275fac=function(g){return new(g||u)},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-crud-add-button"]],outputs:{addEvent:"addEvent"},decls:2,vars:0,consts:[["type","submit","mat-raised-button","","color","primary",1,"col-12","my-2",3,"click"]],template:function(g,h){1&g&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return h.addItem()}),s._uU(1,"Add"),s.qZA())},dependencies:[y.lW]}),d})()},4682:(L,Z,m)=>{m.d(Z,{X:()=>v});var _=m(7579),s=m(4650),y=m(6895),r=m(4859);function d(I,g){if(1&I){const h=s.EpF();s.TgZ(0,"button",2),s.NdJ("click",function(){s.CHM(h);const T=s.oxw();return s.KtG(T.resetItem())}),s._uU(1,"Reset"),s.qZA()}}function u(I,g){if(1&I){const h=s.EpF();s.TgZ(0,"button",3),s.NdJ("click",function(){s.CHM(h);const T=s.oxw();return s.KtG(T.resetItem())}),s._uU(1,"Reset"),s.qZA()}}let v=(()=>{const g=class{constructor(){this.resetEvent=new _.x,this.isReset=!0}resetItem(){this.resetEvent.next()}};let I=g;return g.\u0275fac=function(T){return new(T||g)},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-crud-reset-button"]],inputs:{isReset:"isReset"},outputs:{resetEvent:"resetEvent"},decls:2,vars:2,consts:[["type","reset","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","button","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","reset","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"],["type","button","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"]],template:function(T,A){1&T&&(s.YNc(0,d,2,0,"button",0),s.YNc(1,u,2,0,"button",1)),2&T&&(s.Q6J("ngIf",A.isReset),s.xp6(1),s.Q6J("ngIf",!A.isReset))},dependencies:[y.O5,r.lW]}),I})()},1837:(L,Z,m)=>{m.d(Z,{b:()=>d});var _=m(7579),s=m(4650),y=m(4859),r=m(7392);let d=(()=>{const v=class{constructor(){this.deleteEvent=new _.x}deleteItem(){this.deleteEvent.next(this.item)}};let u=v;return v.\u0275fac=function(h){return new(h||v)},v.\u0275cmp=s.Xpm({type:v,selectors:[["app-delete-action-icon"]],inputs:{item:"item"},outputs:{deleteEvent:"deleteEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","warn",1,"ms-1",3,"click"]],template:function(h,E){1&h&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return E.deleteItem()}),s.TgZ(1,"mat-icon"),s._uU(2,"delete"),s.qZA()())},dependencies:[y.nh,r.Hw]}),u})()},1763:(L,Z,m)=>{m.d(Z,{p:()=>d});var _=m(7579),s=m(4650),y=m(4859),r=m(7392);let d=(()=>{const v=class{constructor(){this.editEvent=new _.x}editItem(){this.editEvent.next(this.item)}};let u=v;return v.\u0275fac=function(h){return new(h||v)},v.\u0275cmp=s.Xpm({type:v,selectors:[["app-edit-action-icon"]],inputs:{item:"item"},outputs:{editEvent:"editEvent"},decls:3,vars:0,consts:[["mat-mini-fab","","color","primary",1,"ms-1",3,"click"]],template:function(h,E){1&h&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return E.editItem()}),s.TgZ(1,"mat-icon"),s._uU(2,"edit"),s.qZA()())},dependencies:[y.nh,r.Hw]}),u})()},2043:(L,Z,m)=>{m.d(Z,{H:()=>y});var _=m(4650);const s=["*"];let y=(()=>{const d=class{};let r=d;return d.\u0275fac=function(I){return new(I||d)},d.\u0275cmp=_.Xpm({type:d,selectors:[["app-form-heading"]],ngContentSelectors:s,decls:3,vars:0,consts:[[1,"text-center","bg-primary","text-light","py-3"],[1,"fw-normal"]],template:function(I,g){1&I&&(_.F$t(),_.TgZ(0,"div",0)(1,"h5",1),_.Hsn(2),_.qZA()())}}),r})()},3214:(L,Z,m)=>{m.d(Z,{_:()=>S});var _=m(4859),s=m(5412),y=m(9549),r=m(7392),d=m(4144),u=m(7974),v=m(4385),I=m(455),g=m(7155),h=m(9602),E=m(3238),T=m(2673),A=m(4650);let S=(()=>{const q=class{};let N=q;return q.\u0275fac=function(M){return new(M||q)},q.\u0275mod=A.oAB({type:q}),q.\u0275inj=A.cJS({imports:[g.p0,u.TU,y.lN,d.c,_.ot,r.Ps,s.Is,v.LD,I.rP,h.FA,E.XK,T.g]}),N})()},4521:(L,Z,m)=>{m.d(Z,{H:()=>I});var _=m(7579),s=m(4650),y=m(6895),r=m(4859);function d(g,h){if(1&g&&(s.TgZ(0,"label",5)(1,"span",6),s._uU(2),s.qZA(),s.TgZ(3,"span",7),s._uU(4," of "),s.qZA(),s.TgZ(5,"span",6),s._uU(6),s.qZA()()),2&g){const E=s.oxw(2);s.xp6(1),s.Q6J("ngClass",E.loaded!=E.count?"page-data":"page-data-full"),s.xp6(1),s.Oqu(E.loaded),s.xp6(3),s.Q6J("ngClass",E.loaded!=E.count?"page-data":"page-data-full"),s.xp6(1),s.Oqu(E.count)}}function u(g,h){if(1&g){const E=s.EpF();s.TgZ(0,"button",8),s.NdJ("click",function(){s.CHM(E);const A=s.oxw(2);return s.KtG(A.more())}),s._uU(1,"More ..."),s.qZA()}}function v(g,h){if(1&g&&(s.TgZ(0,"div",1),s.YNc(1,d,7,4,"label",2),s.TgZ(2,"div",3),s.YNc(3,u,2,0,"button",4),s.qZA()()),2&g){const E=s.oxw();s.xp6(1),s.Q6J("ngIf",E.loaded!=E.count),s.xp6(2),s.Q6J("ngIf",E.loaded!=E.count)}}let I=(()=>{const h=class{constructor(){this.loadMore=new _.x}more(){this.loadMore.next(!0)}};let g=h;return h.\u0275fac=function(A){return new(A||h)},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-server-pagination"]],inputs:{count:"count",loaded:"loaded"},outputs:{loadMore:"loadMore"},decls:1,vars:1,consts:[["class","row my-4",4,"ngIf"],[1,"row","my-4"],["class","col-4 mx-2",4,"ngIf"],[1,"col-6"],["mat-raised-button","","color","primary","type","button","class","col-4",3,"click",4,"ngIf"],[1,"col-4","mx-2"],[3,"ngClass"],[1,"page-data"],["mat-raised-button","","color","primary","type","button",1,"col-4",3,"click"]],template:function(A,S){1&A&&s.YNc(0,v,4,2,"div",0),2&A&&s.Q6J("ngIf",S.loaded>0)},dependencies:[y.mk,y.O5,r.lW],styles:[".page-data[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border-radius:10px;opacity:.3}.page-data-full[_ngcontent-%COMP%]{background-color:#009cbf;color:#fff;padding:10px;border-radius:10px}"]}),g})()},1260:(L,Z,m)=>{m.d(Z,{m:()=>h});var _=m(6895),s=m(4006),y=m(4859),r=m(9549),d=m(4144),u=m(7392),v=m(9602),I=m(3238),g=m(4650);let h=(()=>{const T=class{};let E=T;return T.\u0275fac=function(N){return new(N||T)},T.\u0275mod=g.oAB({type:T}),T.\u0275inj=g.cJS({imports:[_.ez,s.u5,s.UX,r.lN,y.ot,u.Ps,d.c,v.FA,I.XK]}),E})()}}]);