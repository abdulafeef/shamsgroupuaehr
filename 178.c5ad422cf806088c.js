"use strict";(self.webpackChunkshams_hr_web_app=self.webpackChunkshams_hr_web_app||[]).push([[178],{7912:(D,g,e)=>{e.r(g),e.d(g,{ReportVehicleModule:()=>$});var d=e(6895),s=e(529),a=e(4006),h=e(3214),m=e(1260),I=e(4661),u=e(1635),c=e(5861);class p{}var t=e(4650),f=e(8112),_=e(9057),y=e(5);let E=(()=>{const o=class{constructor(l){this.http=l}getVehicleReport(l){return this.http.postAttachment(_.b.getVehicleReport,l)}getVehicleDocReport(l){return this.http.postAttachment(_.b.getVehicleDocReport,l)}};let n=o;return o.\u0275fac=function(r){return new(r||o)(t.LFG(y.o))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var C=e(6523),T=e(8064),O=e(9549),R=e(4144),F=e(4385),x=e(3238),b=e(1583),U=e(4682),M=e(6303);function w(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function L(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function P(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function N(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-report-heading"),t._uU(4,"Vehicle Report"),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.getReport())}),t.TgZ(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Make"),t.qZA(),t.TgZ(10,"mat-select",7),t.NdJ("selectionChange",function(r){t.CHM(i);const v=t.oxw();return t.KtG(v.onMakeChange(r))}),t.TgZ(11,"mat-option",8),t._uU(12,"All"),t.qZA(),t.YNc(13,w,2,2,"mat-option",9),t.qZA()(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Model"),t.qZA(),t.TgZ(17,"mat-select",10)(18,"mat-option",8),t._uU(19,"All"),t.qZA(),t.YNc(20,L,2,2,"mat-option",9),t.qZA()()(),t.TgZ(21,"div",5)(22,"mat-form-field",11)(23,"mat-label"),t._uU(24,"Owner"),t.qZA(),t.TgZ(25,"mat-select",12)(26,"mat-option",8),t._uU(27,"All"),t.qZA(),t.YNc(28,P,2,2,"mat-option",9),t.qZA()(),t.TgZ(29,"mat-form-field",13)(30,"mat-label"),t._uU(31,"Search"),t.qZA(),t._UZ(32,"input",14),t.qZA()(),t.TgZ(33,"div",1)(34,"app-crud-reset-button",15),t.NdJ("resetEvent",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.reset())}),t.qZA(),t._UZ(35,"app-crud-download-button",16),t.qZA(),t.TgZ(36,"div",1)(37,"label",17),t._uU(38),t.qZA()()()()()()}if(2&n){const i=t.oxw();t.xp6(5),t.Q6J("formGroup",i.reportForm),t.xp6(8),t.Q6J("ngForOf",i.reportData.makeList),t.xp6(7),t.Q6J("ngForOf",i.modelListFiltered),t.xp6(8),t.Q6J("ngForOf",i.reportData.ownerList),t.xp6(6),t.Q6J("isReset",!1),t.xp6(4),t.Oqu(i.status)}}let J=(()=>{const o=class{constructor(l,r,v,Z){this.vehicleService=l,this.vehicleReportService=r,this.reportService=v,this.fileService=Z,this.isLoaded=!1,this.status="",this.modelListFiltered=[]}ngOnInit(){this.reportForm=new a.cw({searchKey:new a.NI(""),makeId:new a.NI(""),modelId:new a.NI(""),ownerId:new a.NI("")}),this.valueChangeSub=this.reportService.reportEvent.subscribe(l=>{this.status=l}),this.isLoaded=!1,this.sub=this.vehicleService.getVehicleSearchData().subscribe(l=>{this.reportData=l.item,this.isLoaded=!0})}onMakeChange(l){this.modelListFiltered=this.reportData.modelList.filter(r=>r.make.id==this.reportForm.value.makeId)??[],this.reportForm.patchValue({modelId:""})}getReport(){var l=this;if(!this.reportForm.valid)return void this.reportForm.markAllAsTouched();let r=new p;r.searchKey=this.reportForm.value.searchKey,r.makeId=""!=this.reportForm.value.makeId?this.reportForm.value.makeId:null,r.modelId=""!=this.reportForm.value.modelId?this.reportForm.value.modelId:null,r.ownerId=""!=this.reportForm.value.ownerId?this.reportForm.value.ownerId:null,this.reportService.reportDownloading(),this.sub=this.vehicleReportService.getVehicleReport(r).subscribe(function(){var v=(0,c.Z)(function*(Z){yield l.fileService.downloadFile(Z,"VehicleReport")});return function(Z){return v.apply(this,arguments)}}())}reset(){this.reportForm.patchValue({searchKey:"",makeId:"",modelId:"",ownerId:""})}ngOnDestroy(){this.sub?.unsubscribe(),this.valueChangeSub?.unsubscribe()}};let n=o;return o.\u0275fac=function(r){return new(r||o)(t.Y36(f.f),t.Y36(E),t.Y36(C.r),t.Y36(T.I))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-vehicle-report"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-6","offset-3","form-margin-top"],[1,"card"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"row","form-group"],[1,"form-field","col-6"],["formControlName","makeId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","modelId"],[1,"form-field","col-8"],["formControlName","ownerId"],["appearance","outline","floatLabel","always",1,"form-field","col-4"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-4",3,"isReset","resetEvent"],[1,"col-4","offset-4"],[1,"col-12","text-center"],[3,"value"]],template:function(r,v){1&r&&t.YNc(0,N,39,6,"div",0),2&r&&t.Q6J("ngIf",v.isLoaded)},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,O.KE,O.hX,R.Nt,F.gD,x.ey,b.h,U.X,M.t],styles:[".vertical-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:30%;transform:translate(-50%,-50%)}",".left-menu[_ngcontent-%COMP%]{height:80vh;overflow-y:scroll;overflow-x:hidden}.form-margin-top[_ngcontent-%COMP%]{margin-top:150px}"]}),n})();var K=e(3900);class S{}var V=e(3104);function B(n,o){if(1&n&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function Y(n,o){if(1&n&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function Q(n,o){if(1&n&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function W(n,o){if(1&n&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function q(n,o){if(1&n&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&n){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function G(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-report-heading"),t._uU(4,"Vehicle Doc Report"),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.getReport())}),t.TgZ(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Doc Type"),t.qZA(),t.TgZ(10,"mat-select",7)(11,"mat-option",8),t._uU(12,"All"),t.qZA(),t.YNc(13,B,2,2,"mat-option",9),t.qZA()(),t.TgZ(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Mode"),t.qZA(),t.TgZ(17,"mat-select",11),t.YNc(18,Y,2,2,"mat-option",9),t.qZA()(),t.TgZ(19,"mat-form-field",12)(20,"mat-label"),t._uU(21,"Expire In"),t.qZA(),t._UZ(22,"input",13),t.qZA()(),t.TgZ(23,"div",5)(24,"mat-form-field",14)(25,"mat-label"),t._uU(26,"Make"),t.qZA(),t.TgZ(27,"mat-select",15),t.NdJ("selectionChange",function(r){t.CHM(i);const v=t.oxw();return t.KtG(v.onMakeChange(r))}),t.TgZ(28,"mat-option",8),t._uU(29,"All"),t.qZA(),t.YNc(30,Q,2,2,"mat-option",9),t.qZA()(),t.TgZ(31,"mat-form-field",14)(32,"mat-label"),t._uU(33,"Model"),t.qZA(),t.TgZ(34,"mat-select",16)(35,"mat-option",8),t._uU(36,"All"),t.qZA(),t.YNc(37,W,2,2,"mat-option",9),t.qZA()()(),t.TgZ(38,"div",5)(39,"mat-form-field",17)(40,"mat-label"),t._uU(41,"Owner"),t.qZA(),t.TgZ(42,"mat-select",18)(43,"mat-option",8),t._uU(44,"All"),t.qZA(),t.YNc(45,q,2,2,"mat-option",9),t.qZA()(),t.TgZ(46,"mat-form-field",19)(47,"mat-label"),t._uU(48,"Search"),t.qZA(),t._UZ(49,"input",20),t.qZA()(),t.TgZ(50,"div",1)(51,"app-crud-reset-button",21),t.NdJ("resetEvent",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.reset())}),t.qZA(),t._UZ(52,"app-crud-download-button",22),t.qZA(),t.TgZ(53,"div",1)(54,"label",23),t._uU(55),t.qZA()()()()()()}if(2&n){const i=t.oxw();t.xp6(5),t.Q6J("formGroup",i.reportForm),t.xp6(8),t.Q6J("ngForOf",i.reportData.docTypeList),t.xp6(5),t.Q6J("ngForOf",i.reportData.searchModeList),t.xp6(12),t.Q6J("ngForOf",i.reportVehicleData.makeList),t.xp6(7),t.Q6J("ngForOf",i.modelListFiltered),t.xp6(8),t.Q6J("ngForOf",i.reportData.ownerList),t.xp6(6),t.Q6J("isReset",!1),t.xp6(4),t.Oqu(i.status)}}const X=[{path:"",component:J},{path:"doc",component:(()=>{const o=class{constructor(l,r,v,Z,A){this.vehicleDocService=l,this.vehicleService=r,this.vehicleReportService=v,this.reportService=Z,this.fileService=A,this.isLoaded=!1,this.status="",this.modelListFiltered=[]}ngOnInit(){this.reportForm=new a.cw({searchKey:new a.NI(""),makeId:new a.NI(""),modelId:new a.NI(""),ownerId:new a.NI(""),docTypeId:new a.NI(""),mode:new a.NI(4,[a.kI.required]),expiryDays:new a.NI(null)}),this.valueChangeSub=this.reportService.reportEvent.subscribe(l=>{this.status=l}),this.isLoaded=!1,this.sub=this.vehicleDocService.getVehicleDocSearchData().pipe((0,K.w)(l=>(this.reportData=l.item,this.vehicleService.getVehicleSearchData()))).subscribe(l=>{this.reportVehicleData=l.item,this.isLoaded=!0})}onMakeChange(l){this.modelListFiltered=this.reportVehicleData.modelList.filter(r=>r.make.id==this.reportForm.value.makeId)??[],this.reportForm.patchValue({modelId:""})}getReport(){var l=this;if(!this.reportForm.valid)return void this.reportForm.markAllAsTouched();let r=new S;r.searchKey=this.reportForm.value.searchKey,r.makeId=""!=this.reportForm.value.makeId?this.reportForm.value.makeId:null,r.modelId=""!=this.reportForm.value.modelId?this.reportForm.value.modelId:null,r.ownerId=""!=this.reportForm.value.ownerId?this.reportForm.value.ownerId:null,r.docTypeId=""!=this.reportForm.value.docTypeId?this.reportForm.value.docTypeId:null,r.mode=this.reportForm.value.mode,r.expiryDays=this.reportForm.value.expiryDays,this.reportService.reportDownloading(),this.sub=this.vehicleReportService.getVehicleDocReport(r).subscribe(function(){var v=(0,c.Z)(function*(Z){yield l.fileService.downloadFile(Z,"VehicleDocReport")});return function(Z){return v.apply(this,arguments)}}())}reset(){this.reportForm.patchValue({searchKey:"",makeId:"",modelId:"",ownerId:"",docTypeId:"",mode:4,expiryDays:null})}ngOnDestroy(){this.sub?.unsubscribe(),this.valueChangeSub?.unsubscribe()}};let n=o;return o.\u0275fac=function(r){return new(r||o)(t.Y36(V.l),t.Y36(f.f),t.Y36(E),t.Y36(C.r),t.Y36(T.I))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-vehicle-doc-report"]],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-6","offset-3","form-margin-top"],[1,"card"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"row","form-group"],[1,"form-field","col-5"],["formControlName","docTypeId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-field","col-4"],["formControlName","mode"],["appearance","outline","floatLabel","always",1,"form-field","col-3"],["type","number","placeholder","","matInput","","formControlName","expiryDays"],[1,"form-field","col-6"],["formControlName","makeId",3,"selectionChange"],["formControlName","modelId"],[1,"form-field","col-8"],["formControlName","ownerId"],["appearance","outline","floatLabel","always",1,"form-field","col-4"],["type","search","placeholder","","matInput","","formControlName","searchKey"],[1,"col-4",3,"isReset","resetEvent"],[1,"col-4","offset-4"],[1,"col-12","text-center"],[3,"value"]],template:function(r,v){1&r&&t.YNc(0,G,56,8,"div",0),2&r&&t.Q6J("ngIf",v.isLoaded)},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,O.KE,O.hX,R.Nt,F.gD,x.ey,b.h,U.X,M.t],styles:[".left-menu[_ngcontent-%COMP%]{height:80vh;overflow-y:scroll;overflow-x:hidden}.form-margin-top[_ngcontent-%COMP%]{margin-top:150px}"]}),n})()}];let H=(()=>{const o=class{};let n=o;return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(X)]}),n})(),$=(()=>{const o=class{};let n=o;return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,H,a.u5,a.UX,s.JF,h._,m.m,I.ReportModule]}),n})()},4682:(D,g,e)=>{e.d(g,{X:()=>u});var d=e(7579),s=e(4650),a=e(6895),h=e(4859);function m(c,p){if(1&c){const t=s.EpF();s.TgZ(0,"button",2),s.NdJ("click",function(){s.CHM(t);const _=s.oxw();return s.KtG(_.resetItem())}),s._uU(1,"Reset"),s.qZA()}}function I(c,p){if(1&c){const t=s.EpF();s.TgZ(0,"button",3),s.NdJ("click",function(){s.CHM(t);const _=s.oxw();return s.KtG(_.resetItem())}),s._uU(1,"Reset"),s.qZA()}}let u=(()=>{const p=class{constructor(){this.resetEvent=new d.x,this.isReset=!0}resetItem(){this.resetEvent.next()}};let c=p;return p.\u0275fac=function(_){return new(_||p)},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-crud-reset-button"]],inputs:{isReset:"isReset"},outputs:{resetEvent:"resetEvent"},decls:2,vars:2,consts:[["type","reset","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","button","mat-raised-button","","color","accent","class","col-12 my-2",3,"click",4,"ngIf"],["type","reset","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"],["type","button","mat-raised-button","","color","accent",1,"col-12","my-2",3,"click"]],template:function(_,y){1&_&&(s.YNc(0,m,2,0,"button",0),s.YNc(1,I,2,0,"button",1)),2&_&&(s.Q6J("ngIf",y.isReset),s.xp6(1),s.Q6J("ngIf",!y.isReset))},dependencies:[a.O5,h.lW]}),c})()},2043:(D,g,e)=>{e.d(g,{H:()=>a});var d=e(4650);const s=["*"];let a=(()=>{const m=class{};let h=m;return m.\u0275fac=function(c){return new(c||m)},m.\u0275cmp=d.Xpm({type:m,selectors:[["app-form-heading"]],ngContentSelectors:s,decls:3,vars:0,consts:[[1,"text-center","bg-primary","text-light","py-3"],[1,"fw-normal"]],template:function(c,p){1&c&&(d.F$t(),d.TgZ(0,"div",0)(1,"h5",1),d.Hsn(2),d.qZA()())}}),h})()},3214:(D,g,e)=>{e.d(g,{_:()=>E});var d=e(4859),s=e(5412),a=e(9549),h=e(7392),m=e(4144),I=e(7974),u=e(4385),c=e(455),p=e(7155),t=e(9602),f=e(3238),_=e(2673),y=e(4650);let E=(()=>{const T=class{};let C=T;return T.\u0275fac=function(F){return new(F||T)},T.\u0275mod=y.oAB({type:T}),T.\u0275inj=y.cJS({imports:[p.p0,I.TU,a.lN,m.c,d.ot,h.Ps,s.Is,u.LD,c.rP,t.FA,f.XK,_.g]}),C})()},8064:(D,g,e)=>{e.d(g,{I:()=>a});var d=e(4650),s=e(6523);let a=(()=>{const m=class{constructor(u){this.reportService=u}viewFile(u){const c=new Blob([u.body],{type:u.body?.type});if(""!=c.type){const p=window.URL.createObjectURL(c);window.open(p)}}downloadFile(u,c){const p=new Blob([u.body],{type:u.body?.type});if(""!=p.type){const t=document.createElement("a");t.setAttribute("style","display:none;"),document.body.appendChild(t),t.download=c,t.href=URL.createObjectURL(p),t.target="_blank",t.click(),document.body.removeChild(t),this.reportService.reportDownloaded(),setTimeout(()=>{this.reportService.reportEvent.next("")},3e3)}}};let h=m;return m.\u0275fac=function(c){return new(c||m)(d.LFG(s.r))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),h})()},5861:(D,g,e)=>{function d(a,h,m,I,u,c,p){try{var t=a[c](p),f=t.value}catch(_){return void m(_)}t.done?h(f):Promise.resolve(f).then(I,u)}function s(a){return function(){var h=this,m=arguments;return new Promise(function(I,u){var c=a.apply(h,m);function p(f){d(c,I,u,p,t,"next",f)}function t(f){d(c,I,u,p,t,"throw",f)}p(void 0)})}}e.d(g,{Z:()=>s})}}]);